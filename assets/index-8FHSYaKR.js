var Z_=Object.defineProperty;var Fw=n=>{throw TypeError(n)};var eC=(n,e,t)=>e in n?Z_(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var de=(n,e,t)=>eC(n,typeof e!="symbol"?e+"":e,t),lm=(n,e,t)=>e.has(n)||Fw("Cannot "+t);var l=(n,e,t)=>(lm(n,e,"read from private field"),t?t.call(n):e.get(n)),b=(n,e,t)=>e.has(n)?Fw("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),m=(n,e,t,i)=>(lm(n,e,"write to private field"),i?i.call(n,t):e.set(n,t),t),A=(n,e,t)=>(lm(n,e,"access private method"),t);var on=(n,e,t,i)=>({set _(r){m(n,e,r,t)},get _(){return l(n,e,i)}});function Jb(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function Zb(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var eA={exports:{}},Mg={},tA={exports:{}},Se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kd=Symbol.for("react.element"),tC=Symbol.for("react.portal"),nC=Symbol.for("react.fragment"),iC=Symbol.for("react.strict_mode"),rC=Symbol.for("react.profiler"),sC=Symbol.for("react.provider"),aC=Symbol.for("react.context"),oC=Symbol.for("react.forward_ref"),lC=Symbol.for("react.suspense"),cC=Symbol.for("react.memo"),uC=Symbol.for("react.lazy"),jw=Symbol.iterator;function hC(n){return n===null||typeof n!="object"?null:(n=jw&&n[jw]||n["@@iterator"],typeof n=="function"?n:null)}var nA={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},iA=Object.assign,rA={};function Zc(n,e,t){this.props=n,this.context=e,this.refs=rA,this.updater=t||nA}Zc.prototype.isReactComponent={};Zc.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Zc.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function sA(){}sA.prototype=Zc.prototype;function av(n,e,t){this.props=n,this.context=e,this.refs=rA,this.updater=t||nA}var ov=av.prototype=new sA;ov.constructor=av;iA(ov,Zc.prototype);ov.isPureReactComponent=!0;var zw=Array.isArray,aA=Object.prototype.hasOwnProperty,lv={current:null},oA={key:!0,ref:!0,__self:!0,__source:!0};function lA(n,e,t){var i,r={},s=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)aA.call(e,i)&&!oA.hasOwnProperty(i)&&(r[i]=e[i]);var o=arguments.length-2;if(o===1)r.children=t;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];r.children=c}if(n&&n.defaultProps)for(i in o=n.defaultProps,o)r[i]===void 0&&(r[i]=o[i]);return{$$typeof:Kd,type:n,key:s,ref:a,props:r,_owner:lv.current}}function dC(n,e){return{$$typeof:Kd,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function cv(n){return typeof n=="object"&&n!==null&&n.$$typeof===Kd}function fC(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var Bw=/\/+/g;function cm(n,e){return typeof n=="object"&&n!==null&&n.key!=null?fC(""+n.key):e.toString(36)}function zf(n,e,t,i,r){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var a=!1;if(n===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(n.$$typeof){case Kd:case tC:a=!0}}if(a)return a=n,r=r(a),n=i===""?"."+cm(a,0):i,zw(r)?(t="",n!=null&&(t=n.replace(Bw,"$&/")+"/"),zf(r,e,t,"",function(u){return u})):r!=null&&(cv(r)&&(r=dC(r,t+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(Bw,"$&/")+"/")+n)),e.push(r)),1;if(a=0,i=i===""?".":i+":",zw(n))for(var o=0;o<n.length;o++){s=n[o];var c=i+cm(s,o);a+=zf(s,e,t,c,r)}else if(c=hC(n),typeof c=="function")for(n=c.call(n),o=0;!(s=n.next()).done;)s=s.value,c=i+cm(s,o++),a+=zf(s,e,t,c,r);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function pf(n,e,t){if(n==null)return n;var i=[],r=0;return zf(n,i,"","",function(s){return e.call(t,s,r++)}),i}function pC(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var vn={current:null},Bf={transition:null},gC={ReactCurrentDispatcher:vn,ReactCurrentBatchConfig:Bf,ReactCurrentOwner:lv};function cA(){throw Error("act(...) is not supported in production builds of React.")}Se.Children={map:pf,forEach:function(n,e,t){pf(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return pf(n,function(){e++}),e},toArray:function(n){return pf(n,function(e){return e})||[]},only:function(n){if(!cv(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Se.Component=Zc;Se.Fragment=nC;Se.Profiler=rC;Se.PureComponent=av;Se.StrictMode=iC;Se.Suspense=lC;Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gC;Se.act=cA;Se.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=iA({},n.props),r=n.key,s=n.ref,a=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=lv.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var o=n.type.defaultProps;for(c in e)aA.call(e,c)&&!oA.hasOwnProperty(c)&&(i[c]=e[c]===void 0&&o!==void 0?o[c]:e[c])}var c=arguments.length-2;if(c===1)i.children=t;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];i.children=o}return{$$typeof:Kd,type:n.type,key:r,ref:s,props:i,_owner:a}};Se.createContext=function(n){return n={$$typeof:aC,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:sC,_context:n},n.Consumer=n};Se.createElement=lA;Se.createFactory=function(n){var e=lA.bind(null,n);return e.type=n,e};Se.createRef=function(){return{current:null}};Se.forwardRef=function(n){return{$$typeof:oC,render:n}};Se.isValidElement=cv;Se.lazy=function(n){return{$$typeof:uC,_payload:{_status:-1,_result:n},_init:pC}};Se.memo=function(n,e){return{$$typeof:cC,type:n,compare:e===void 0?null:e}};Se.startTransition=function(n){var e=Bf.transition;Bf.transition={};try{n()}finally{Bf.transition=e}};Se.unstable_act=cA;Se.useCallback=function(n,e){return vn.current.useCallback(n,e)};Se.useContext=function(n){return vn.current.useContext(n)};Se.useDebugValue=function(){};Se.useDeferredValue=function(n){return vn.current.useDeferredValue(n)};Se.useEffect=function(n,e){return vn.current.useEffect(n,e)};Se.useId=function(){return vn.current.useId()};Se.useImperativeHandle=function(n,e,t){return vn.current.useImperativeHandle(n,e,t)};Se.useInsertionEffect=function(n,e){return vn.current.useInsertionEffect(n,e)};Se.useLayoutEffect=function(n,e){return vn.current.useLayoutEffect(n,e)};Se.useMemo=function(n,e){return vn.current.useMemo(n,e)};Se.useReducer=function(n,e,t){return vn.current.useReducer(n,e,t)};Se.useRef=function(n){return vn.current.useRef(n)};Se.useState=function(n){return vn.current.useState(n)};Se.useSyncExternalStore=function(n,e,t){return vn.current.useSyncExternalStore(n,e,t)};Se.useTransition=function(){return vn.current.useTransition()};Se.version="18.3.1";tA.exports=Se;var H=tA.exports;const uA=Zb(H),mC=Jb({__proto__:null,default:uA},[H]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yC=H,vC=Symbol.for("react.element"),wC=Symbol.for("react.fragment"),bC=Object.prototype.hasOwnProperty,AC=yC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xC={key:!0,ref:!0,__self:!0,__source:!0};function hA(n,e,t){var i,r={},s=null,a=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)bC.call(e,i)&&!xC.hasOwnProperty(i)&&(r[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:vC,type:n,key:s,ref:a,props:r,_owner:AC.current}}Mg.Fragment=wC;Mg.jsx=hA;Mg.jsxs=hA;eA.exports=Mg;var C=eA.exports,dA={exports:{}},ni={},fA={exports:{}},pA={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(F,P){var L=F.length;F.push(P);e:for(;0<L;){var D=L-1>>>1,U=F[D];if(0<r(U,P))F[D]=P,F[L]=U,L=D;else break e}}function t(F){return F.length===0?null:F[0]}function i(F){if(F.length===0)return null;var P=F[0],L=F.pop();if(L!==P){F[0]=L;e:for(var D=0,U=F.length,O=U>>>1;D<O;){var $=2*(D+1)-1,he=F[$],ie=$+1,te=F[ie];if(0>r(he,L))ie<U&&0>r(te,he)?(F[D]=te,F[ie]=L,D=ie):(F[D]=he,F[$]=L,D=$);else if(ie<U&&0>r(te,L))F[D]=te,F[ie]=L,D=ie;else break e}}return P}function r(F,P){var L=F.sortIndex-P.sortIndex;return L!==0?L:F.id-P.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var c=[],u=[],h=1,d=null,f=3,p=!1,g=!1,w=!1,S=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(F){for(var P=t(u);P!==null;){if(P.callback===null)i(u);else if(P.startTime<=F)i(u),P.sortIndex=P.expirationTime,e(c,P);else break;P=t(u)}}function E(F){if(w=!1,x(F),!g)if(t(c)!==null)g=!0,W(T);else{var P=t(u);P!==null&&X(E,P.startTime-F)}}function T(F,P){g=!1,w&&(w=!1,v(M),M=-1),p=!0;var L=f;try{for(x(P),d=t(c);d!==null&&(!(d.expirationTime>P)||F&&!V());){var D=d.callback;if(typeof D=="function"){d.callback=null,f=d.priorityLevel;var U=D(d.expirationTime<=P);P=n.unstable_now(),typeof U=="function"?d.callback=U:d===t(c)&&i(c),x(P)}else i(c);d=t(c)}if(d!==null)var O=!0;else{var $=t(u);$!==null&&X(E,$.startTime-P),O=!1}return O}finally{d=null,f=L,p=!1}}var _=!1,R=null,M=-1,j=5,z=-1;function V(){return!(n.unstable_now()-z<j)}function ue(){if(R!==null){var F=n.unstable_now();z=F;var P=!0;try{P=R(!0,F)}finally{P?pe():(_=!1,R=null)}}else _=!1}var pe;if(typeof y=="function")pe=function(){y(ue)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,Ce=oe.port2;oe.port1.onmessage=ue,pe=function(){Ce.postMessage(null)}}else pe=function(){S(ue,0)};function W(F){R=F,_||(_=!0,pe())}function X(F,P){M=S(function(){F(n.unstable_now())},P)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(F){F.callback=null},n.unstable_continueExecution=function(){g||p||(g=!0,W(T))},n.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<F?Math.floor(1e3/F):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(F){switch(f){case 1:case 2:case 3:var P=3;break;default:P=f}var L=f;f=P;try{return F()}finally{f=L}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(F,P){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var L=f;f=F;try{return P()}finally{f=L}},n.unstable_scheduleCallback=function(F,P,L){var D=n.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?D+L:D):L=D,F){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=L+U,F={id:h++,callback:P,priorityLevel:F,startTime:L,expirationTime:U,sortIndex:-1},L>D?(F.sortIndex=L,e(u,F),t(c)===null&&F===t(u)&&(w?(v(M),M=-1):w=!0,X(E,L-D))):(F.sortIndex=U,e(c,F),g||p||(g=!0,W(T))),F},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(F){var P=f;return function(){var L=f;f=P;try{return F.apply(this,arguments)}finally{f=L}}}})(pA);fA.exports=pA;var SC=fA.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EC=H,ti=SC;function G(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gA=new Set,th={};function nl(n,e){Vc(n,e),Vc(n+"Capture",e)}function Vc(n,e){for(th[n]=e,n=0;n<e.length;n++)gA.add(e[n])}var as=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ym=Object.prototype.hasOwnProperty,_C=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Hw={},$w={};function CC(n){return Ym.call($w,n)?!0:Ym.call(Hw,n)?!1:_C.test(n)?$w[n]=!0:(Hw[n]=!0,!1)}function TC(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function kC(n,e,t,i){if(e===null||typeof e>"u"||TC(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function wn(n,e,t,i,r,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var Wt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Wt[n]=new wn(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Wt[e]=new wn(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Wt[n]=new wn(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Wt[n]=new wn(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Wt[n]=new wn(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Wt[n]=new wn(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Wt[n]=new wn(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Wt[n]=new wn(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Wt[n]=new wn(n,5,!1,n.toLowerCase(),null,!1,!1)});var uv=/[\-:]([a-z])/g;function hv(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(uv,hv);Wt[e]=new wn(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(uv,hv);Wt[e]=new wn(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(uv,hv);Wt[e]=new wn(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Wt[n]=new wn(n,1,!1,n.toLowerCase(),null,!1,!1)});Wt.xlinkHref=new wn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Wt[n]=new wn(n,1,!1,n.toLowerCase(),null,!0,!0)});function dv(n,e,t,i){var r=Wt.hasOwnProperty(e)?Wt[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(kC(e,t,r,i)&&(t=null),i||r===null?CC(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,i=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var ds=EC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,gf=Symbol.for("react.element"),vl=Symbol.for("react.portal"),wl=Symbol.for("react.fragment"),fv=Symbol.for("react.strict_mode"),Km=Symbol.for("react.profiler"),mA=Symbol.for("react.provider"),yA=Symbol.for("react.context"),pv=Symbol.for("react.forward_ref"),qm=Symbol.for("react.suspense"),Qm=Symbol.for("react.suspense_list"),gv=Symbol.for("react.memo"),vs=Symbol.for("react.lazy"),vA=Symbol.for("react.offscreen"),Uw=Symbol.iterator;function ou(n){return n===null||typeof n!="object"?null:(n=Uw&&n[Uw]||n["@@iterator"],typeof n=="function"?n:null)}var at=Object.assign,um;function xu(n){if(um===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);um=e&&e[1]||""}return`
`+um+n}var hm=!1;function dm(n,e){if(!n||hm)return"";hm=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){i=u}n.call(e.prototype)}else{try{throw Error()}catch(u){i=u}n()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),s=i.stack.split(`
`),a=r.length-1,o=s.length-1;1<=a&&0<=o&&r[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(r[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||r[a]!==s[o]){var c=`
`+r[a].replace(" at new "," at ");return n.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",n.displayName)),c}while(1<=a&&0<=o);break}}}finally{hm=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?xu(n):""}function RC(n){switch(n.tag){case 5:return xu(n.type);case 16:return xu("Lazy");case 13:return xu("Suspense");case 19:return xu("SuspenseList");case 0:case 2:case 15:return n=dm(n.type,!1),n;case 11:return n=dm(n.type.render,!1),n;case 1:return n=dm(n.type,!0),n;default:return""}}function Jm(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case wl:return"Fragment";case vl:return"Portal";case Km:return"Profiler";case fv:return"StrictMode";case qm:return"Suspense";case Qm:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case yA:return(n.displayName||"Context")+".Consumer";case mA:return(n._context.displayName||"Context")+".Provider";case pv:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case gv:return e=n.displayName||null,e!==null?e:Jm(n.type)||"Memo";case vs:e=n._payload,n=n._init;try{return Jm(n(e))}catch{}}return null}function PC(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Jm(e);case 8:return e===fv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ha(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function wA(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function LC(n){var e=wA(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,s.call(this,a)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function mf(n){n._valueTracker||(n._valueTracker=LC(n))}function bA(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=wA(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function kp(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Zm(n,e){var t=e.checked;return at({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function Gw(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=ha(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function AA(n,e){e=e.checked,e!=null&&dv(n,"checked",e,!1)}function e0(n,e){AA(n,e);var t=ha(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?t0(n,e.type,t):e.hasOwnProperty("defaultValue")&&t0(n,e.type,ha(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function Vw(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function t0(n,e,t){(e!=="number"||kp(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Su=Array.isArray;function Ml(n,e,t,i){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&i&&(n[t].defaultSelected=!0)}else{for(t=""+ha(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,i&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function n0(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(G(91));return at({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Ww(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(G(92));if(Su(t)){if(1<t.length)throw Error(G(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:ha(t)}}function xA(n,e){var t=ha(e.value),i=ha(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function Xw(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function SA(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function i0(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?SA(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var yf,EA=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(yf=yf||document.createElement("div"),yf.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=yf.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function nh(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Uu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},MC=["Webkit","ms","Moz","O"];Object.keys(Uu).forEach(function(n){MC.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Uu[e]=Uu[n]})});function _A(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Uu.hasOwnProperty(n)&&Uu[n]?(""+e).trim():e+"px"}function CA(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,r=_A(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,r):n[t]=r}}var NC=at({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function r0(n,e){if(e){if(NC[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(G(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(G(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(G(61))}if(e.style!=null&&typeof e.style!="object")throw Error(G(62))}}function s0(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var a0=null;function mv(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var o0=null,Nl=null,Il=null;function Yw(n){if(n=Jd(n)){if(typeof o0!="function")throw Error(G(280));var e=n.stateNode;e&&(e=Fg(e),o0(n.stateNode,n.type,e))}}function TA(n){Nl?Il?Il.push(n):Il=[n]:Nl=n}function kA(){if(Nl){var n=Nl,e=Il;if(Il=Nl=null,Yw(n),e)for(n=0;n<e.length;n++)Yw(e[n])}}function RA(n,e){return n(e)}function PA(){}var fm=!1;function LA(n,e,t){if(fm)return n(e,t);fm=!0;try{return RA(n,e,t)}finally{fm=!1,(Nl!==null||Il!==null)&&(PA(),kA())}}function ih(n,e){var t=n.stateNode;if(t===null)return null;var i=Fg(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(G(231,e,typeof t));return t}var l0=!1;if(as)try{var lu={};Object.defineProperty(lu,"passive",{get:function(){l0=!0}}),window.addEventListener("test",lu,lu),window.removeEventListener("test",lu,lu)}catch{l0=!1}function IC(n,e,t,i,r,s,a,o,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(h){this.onError(h)}}var Gu=!1,Rp=null,Pp=!1,c0=null,DC={onError:function(n){Gu=!0,Rp=n}};function OC(n,e,t,i,r,s,a,o,c){Gu=!1,Rp=null,IC.apply(DC,arguments)}function FC(n,e,t,i,r,s,a,o,c){if(OC.apply(this,arguments),Gu){if(Gu){var u=Rp;Gu=!1,Rp=null}else throw Error(G(198));Pp||(Pp=!0,c0=u)}}function il(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function MA(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function Kw(n){if(il(n)!==n)throw Error(G(188))}function jC(n){var e=n.alternate;if(!e){if(e=il(n),e===null)throw Error(G(188));return e!==n?null:n}for(var t=n,i=e;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){t=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return Kw(r),n;if(s===i)return Kw(r),e;s=s.sibling}throw Error(G(188))}if(t.return!==i.return)t=r,i=s;else{for(var a=!1,o=r.child;o;){if(o===t){a=!0,t=r,i=s;break}if(o===i){a=!0,i=r,t=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===t){a=!0,t=s,i=r;break}if(o===i){a=!0,i=s,t=r;break}o=o.sibling}if(!a)throw Error(G(189))}}if(t.alternate!==i)throw Error(G(190))}if(t.tag!==3)throw Error(G(188));return t.stateNode.current===t?n:e}function NA(n){return n=jC(n),n!==null?IA(n):null}function IA(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=IA(n);if(e!==null)return e;n=n.sibling}return null}var DA=ti.unstable_scheduleCallback,qw=ti.unstable_cancelCallback,zC=ti.unstable_shouldYield,BC=ti.unstable_requestPaint,ft=ti.unstable_now,HC=ti.unstable_getCurrentPriorityLevel,yv=ti.unstable_ImmediatePriority,OA=ti.unstable_UserBlockingPriority,Lp=ti.unstable_NormalPriority,$C=ti.unstable_LowPriority,FA=ti.unstable_IdlePriority,Ng=null,yr=null;function UC(n){if(yr&&typeof yr.onCommitFiberRoot=="function")try{yr.onCommitFiberRoot(Ng,n,void 0,(n.current.flags&128)===128)}catch{}}var $i=Math.clz32?Math.clz32:WC,GC=Math.log,VC=Math.LN2;function WC(n){return n>>>=0,n===0?32:31-(GC(n)/VC|0)|0}var vf=64,wf=4194304;function Eu(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Mp(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,r=n.suspendedLanes,s=n.pingedLanes,a=t&268435455;if(a!==0){var o=a&~r;o!==0?i=Eu(o):(s&=a,s!==0&&(i=Eu(s)))}else a=t&~r,a!==0?i=Eu(a):s!==0&&(i=Eu(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-$i(e),r=1<<t,i|=n[t],e&=~r;return i}function XC(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function YC(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,r=n.expirationTimes,s=n.pendingLanes;0<s;){var a=31-$i(s),o=1<<a,c=r[a];c===-1?(!(o&t)||o&i)&&(r[a]=XC(o,e)):c<=e&&(n.expiredLanes|=o),s&=~o}}function u0(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function jA(){var n=vf;return vf<<=1,!(vf&4194240)&&(vf=64),n}function pm(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function qd(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-$i(e),n[e]=t}function KC(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-$i(t),s=1<<r;e[r]=0,i[r]=-1,n[r]=-1,t&=~s}}function vv(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-$i(t),r=1<<i;r&e|n[i]&e&&(n[i]|=e),t&=~r}}var je=0;function zA(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var BA,wv,HA,$A,UA,h0=!1,bf=[],na=null,ia=null,ra=null,rh=new Map,sh=new Map,bs=[],qC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Qw(n,e){switch(n){case"focusin":case"focusout":na=null;break;case"dragenter":case"dragleave":ia=null;break;case"mouseover":case"mouseout":ra=null;break;case"pointerover":case"pointerout":rh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":sh.delete(e.pointerId)}}function cu(n,e,t,i,r,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Jd(e),e!==null&&wv(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function QC(n,e,t,i,r){switch(e){case"focusin":return na=cu(na,n,e,t,i,r),!0;case"dragenter":return ia=cu(ia,n,e,t,i,r),!0;case"mouseover":return ra=cu(ra,n,e,t,i,r),!0;case"pointerover":var s=r.pointerId;return rh.set(s,cu(rh.get(s)||null,n,e,t,i,r)),!0;case"gotpointercapture":return s=r.pointerId,sh.set(s,cu(sh.get(s)||null,n,e,t,i,r)),!0}return!1}function GA(n){var e=Ia(n.target);if(e!==null){var t=il(e);if(t!==null){if(e=t.tag,e===13){if(e=MA(t),e!==null){n.blockedOn=e,UA(n.priority,function(){HA(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Hf(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=d0(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);a0=i,t.target.dispatchEvent(i),a0=null}else return e=Jd(t),e!==null&&wv(e),n.blockedOn=t,!1;e.shift()}return!0}function Jw(n,e,t){Hf(n)&&t.delete(e)}function JC(){h0=!1,na!==null&&Hf(na)&&(na=null),ia!==null&&Hf(ia)&&(ia=null),ra!==null&&Hf(ra)&&(ra=null),rh.forEach(Jw),sh.forEach(Jw)}function uu(n,e){n.blockedOn===e&&(n.blockedOn=null,h0||(h0=!0,ti.unstable_scheduleCallback(ti.unstable_NormalPriority,JC)))}function ah(n){function e(r){return uu(r,n)}if(0<bf.length){uu(bf[0],n);for(var t=1;t<bf.length;t++){var i=bf[t];i.blockedOn===n&&(i.blockedOn=null)}}for(na!==null&&uu(na,n),ia!==null&&uu(ia,n),ra!==null&&uu(ra,n),rh.forEach(e),sh.forEach(e),t=0;t<bs.length;t++)i=bs[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<bs.length&&(t=bs[0],t.blockedOn===null);)GA(t),t.blockedOn===null&&bs.shift()}var Dl=ds.ReactCurrentBatchConfig,Np=!0;function ZC(n,e,t,i){var r=je,s=Dl.transition;Dl.transition=null;try{je=1,bv(n,e,t,i)}finally{je=r,Dl.transition=s}}function eT(n,e,t,i){var r=je,s=Dl.transition;Dl.transition=null;try{je=4,bv(n,e,t,i)}finally{je=r,Dl.transition=s}}function bv(n,e,t,i){if(Np){var r=d0(n,e,t,i);if(r===null)Em(n,e,i,Ip,t),Qw(n,i);else if(QC(r,n,e,t,i))i.stopPropagation();else if(Qw(n,i),e&4&&-1<qC.indexOf(n)){for(;r!==null;){var s=Jd(r);if(s!==null&&BA(s),s=d0(n,e,t,i),s===null&&Em(n,e,i,Ip,t),s===r)break;r=s}r!==null&&i.stopPropagation()}else Em(n,e,i,null,t)}}var Ip=null;function d0(n,e,t,i){if(Ip=null,n=mv(i),n=Ia(n),n!==null)if(e=il(n),e===null)n=null;else if(t=e.tag,t===13){if(n=MA(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Ip=n,null}function VA(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(HC()){case yv:return 1;case OA:return 4;case Lp:case $C:return 16;case FA:return 536870912;default:return 16}default:return 16}}var Zs=null,Av=null,$f=null;function WA(){if($f)return $f;var n,e=Av,t=e.length,i,r="value"in Zs?Zs.value:Zs.textContent,s=r.length;for(n=0;n<t&&e[n]===r[n];n++);var a=t-n;for(i=1;i<=a&&e[t-i]===r[s-i];i++);return $f=r.slice(n,1<i?1-i:void 0)}function Uf(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Af(){return!0}function Zw(){return!1}function ii(n){function e(t,i,r,s,a){this._reactName=t,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in n)n.hasOwnProperty(o)&&(t=n[o],this[o]=t?t(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Af:Zw,this.isPropagationStopped=Zw,this}return at(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Af)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Af)},persist:function(){},isPersistent:Af}),e}var eu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xv=ii(eu),Qd=at({},eu,{view:0,detail:0}),tT=ii(Qd),gm,mm,hu,Ig=at({},Qd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sv,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==hu&&(hu&&n.type==="mousemove"?(gm=n.screenX-hu.screenX,mm=n.screenY-hu.screenY):mm=gm=0,hu=n),gm)},movementY:function(n){return"movementY"in n?n.movementY:mm}}),e1=ii(Ig),nT=at({},Ig,{dataTransfer:0}),iT=ii(nT),rT=at({},Qd,{relatedTarget:0}),ym=ii(rT),sT=at({},eu,{animationName:0,elapsedTime:0,pseudoElement:0}),aT=ii(sT),oT=at({},eu,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),lT=ii(oT),cT=at({},eu,{data:0}),t1=ii(cT),uT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fT(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=dT[n])?!!e[n]:!1}function Sv(){return fT}var pT=at({},Qd,{key:function(n){if(n.key){var e=uT[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Uf(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?hT[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sv,charCode:function(n){return n.type==="keypress"?Uf(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Uf(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),gT=ii(pT),mT=at({},Ig,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),n1=ii(mT),yT=at({},Qd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sv}),vT=ii(yT),wT=at({},eu,{propertyName:0,elapsedTime:0,pseudoElement:0}),bT=ii(wT),AT=at({},Ig,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),xT=ii(AT),ST=[9,13,27,32],Ev=as&&"CompositionEvent"in window,Vu=null;as&&"documentMode"in document&&(Vu=document.documentMode);var ET=as&&"TextEvent"in window&&!Vu,XA=as&&(!Ev||Vu&&8<Vu&&11>=Vu),i1=" ",r1=!1;function YA(n,e){switch(n){case"keyup":return ST.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function KA(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var bl=!1;function _T(n,e){switch(n){case"compositionend":return KA(e);case"keypress":return e.which!==32?null:(r1=!0,i1);case"textInput":return n=e.data,n===i1&&r1?null:n;default:return null}}function CT(n,e){if(bl)return n==="compositionend"||!Ev&&YA(n,e)?(n=WA(),$f=Av=Zs=null,bl=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return XA&&e.locale!=="ko"?null:e.data;default:return null}}var TT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function s1(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!TT[n.type]:e==="textarea"}function qA(n,e,t,i){TA(i),e=Dp(e,"onChange"),0<e.length&&(t=new xv("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var Wu=null,oh=null;function kT(n){ox(n,0)}function Dg(n){var e=Sl(n);if(bA(e))return n}function RT(n,e){if(n==="change")return e}var QA=!1;if(as){var vm;if(as){var wm="oninput"in document;if(!wm){var a1=document.createElement("div");a1.setAttribute("oninput","return;"),wm=typeof a1.oninput=="function"}vm=wm}else vm=!1;QA=vm&&(!document.documentMode||9<document.documentMode)}function o1(){Wu&&(Wu.detachEvent("onpropertychange",JA),oh=Wu=null)}function JA(n){if(n.propertyName==="value"&&Dg(oh)){var e=[];qA(e,oh,n,mv(n)),LA(kT,e)}}function PT(n,e,t){n==="focusin"?(o1(),Wu=e,oh=t,Wu.attachEvent("onpropertychange",JA)):n==="focusout"&&o1()}function LT(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Dg(oh)}function MT(n,e){if(n==="click")return Dg(e)}function NT(n,e){if(n==="input"||n==="change")return Dg(e)}function IT(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Gi=typeof Object.is=="function"?Object.is:IT;function lh(n,e){if(Gi(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var r=t[i];if(!Ym.call(e,r)||!Gi(n[r],e[r]))return!1}return!0}function l1(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function c1(n,e){var t=l1(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=l1(t)}}function ZA(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?ZA(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function ex(){for(var n=window,e=kp();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=kp(n.document)}return e}function _v(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function DT(n){var e=ex(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&ZA(t.ownerDocument.documentElement,t)){if(i!==null&&_v(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=c1(t,s);var a=c1(t,i);r&&a&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==a.node||n.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var OT=as&&"documentMode"in document&&11>=document.documentMode,Al=null,f0=null,Xu=null,p0=!1;function u1(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;p0||Al==null||Al!==kp(i)||(i=Al,"selectionStart"in i&&_v(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Xu&&lh(Xu,i)||(Xu=i,i=Dp(f0,"onSelect"),0<i.length&&(e=new xv("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=Al)))}function xf(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var xl={animationend:xf("Animation","AnimationEnd"),animationiteration:xf("Animation","AnimationIteration"),animationstart:xf("Animation","AnimationStart"),transitionend:xf("Transition","TransitionEnd")},bm={},tx={};as&&(tx=document.createElement("div").style,"AnimationEvent"in window||(delete xl.animationend.animation,delete xl.animationiteration.animation,delete xl.animationstart.animation),"TransitionEvent"in window||delete xl.transitionend.transition);function Og(n){if(bm[n])return bm[n];if(!xl[n])return n;var e=xl[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in tx)return bm[n]=e[t];return n}var nx=Og("animationend"),ix=Og("animationiteration"),rx=Og("animationstart"),sx=Og("transitionend"),ax=new Map,h1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ma(n,e){ax.set(n,e),nl(e,[n])}for(var Am=0;Am<h1.length;Am++){var xm=h1[Am],FT=xm.toLowerCase(),jT=xm[0].toUpperCase()+xm.slice(1);ma(FT,"on"+jT)}ma(nx,"onAnimationEnd");ma(ix,"onAnimationIteration");ma(rx,"onAnimationStart");ma("dblclick","onDoubleClick");ma("focusin","onFocus");ma("focusout","onBlur");ma(sx,"onTransitionEnd");Vc("onMouseEnter",["mouseout","mouseover"]);Vc("onMouseLeave",["mouseout","mouseover"]);Vc("onPointerEnter",["pointerout","pointerover"]);Vc("onPointerLeave",["pointerout","pointerover"]);nl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));nl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));nl("onBeforeInput",["compositionend","keypress","textInput","paste"]);nl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));nl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));nl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _u="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zT=new Set("cancel close invalid load scroll toggle".split(" ").concat(_u));function d1(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,FC(i,e,void 0,n),n.currentTarget=null}function ox(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var a=i.length-1;0<=a;a--){var o=i[a],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==s&&r.isPropagationStopped())break e;d1(r,o,u),s=c}else for(a=0;a<i.length;a++){if(o=i[a],c=o.instance,u=o.currentTarget,o=o.listener,c!==s&&r.isPropagationStopped())break e;d1(r,o,u),s=c}}}if(Pp)throw n=c0,Pp=!1,c0=null,n}function Xe(n,e){var t=e[w0];t===void 0&&(t=e[w0]=new Set);var i=n+"__bubble";t.has(i)||(lx(e,n,2,!1),t.add(i))}function Sm(n,e,t){var i=0;e&&(i|=4),lx(t,n,i,e)}var Sf="_reactListening"+Math.random().toString(36).slice(2);function ch(n){if(!n[Sf]){n[Sf]=!0,gA.forEach(function(t){t!=="selectionchange"&&(zT.has(t)||Sm(t,!1,n),Sm(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Sf]||(e[Sf]=!0,Sm("selectionchange",!1,e))}}function lx(n,e,t,i){switch(VA(e)){case 1:var r=ZC;break;case 4:r=eT;break;default:r=bv}t=r.bind(null,e,t,n),r=void 0,!l0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function Em(n,e,t,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var o=i.stateNode.containerInfo;if(o===r||o.nodeType===8&&o.parentNode===r)break;if(a===4)for(a=i.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;a=a.return}for(;o!==null;){if(a=Ia(o),a===null)return;if(c=a.tag,c===5||c===6){i=s=a;continue e}o=o.parentNode}}i=i.return}LA(function(){var u=s,h=mv(t),d=[];e:{var f=ax.get(n);if(f!==void 0){var p=xv,g=n;switch(n){case"keypress":if(Uf(t)===0)break e;case"keydown":case"keyup":p=gT;break;case"focusin":g="focus",p=ym;break;case"focusout":g="blur",p=ym;break;case"beforeblur":case"afterblur":p=ym;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=e1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=iT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=vT;break;case nx:case ix:case rx:p=aT;break;case sx:p=bT;break;case"scroll":p=tT;break;case"wheel":p=xT;break;case"copy":case"cut":case"paste":p=lT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=n1}var w=(e&4)!==0,S=!w&&n==="scroll",v=w?f!==null?f+"Capture":null:f;w=[];for(var y=u,x;y!==null;){x=y;var E=x.stateNode;if(x.tag===5&&E!==null&&(x=E,v!==null&&(E=ih(y,v),E!=null&&w.push(uh(y,E,x)))),S)break;y=y.return}0<w.length&&(f=new p(f,g,null,t,h),d.push({event:f,listeners:w}))}}if(!(e&7)){e:{if(f=n==="mouseover"||n==="pointerover",p=n==="mouseout"||n==="pointerout",f&&t!==a0&&(g=t.relatedTarget||t.fromElement)&&(Ia(g)||g[os]))break e;if((p||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,p?(g=t.relatedTarget||t.toElement,p=u,g=g?Ia(g):null,g!==null&&(S=il(g),g!==S||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=u),p!==g)){if(w=e1,E="onMouseLeave",v="onMouseEnter",y="mouse",(n==="pointerout"||n==="pointerover")&&(w=n1,E="onPointerLeave",v="onPointerEnter",y="pointer"),S=p==null?f:Sl(p),x=g==null?f:Sl(g),f=new w(E,y+"leave",p,t,h),f.target=S,f.relatedTarget=x,E=null,Ia(h)===u&&(w=new w(v,y+"enter",g,t,h),w.target=x,w.relatedTarget=S,E=w),S=E,p&&g)t:{for(w=p,v=g,y=0,x=w;x;x=cl(x))y++;for(x=0,E=v;E;E=cl(E))x++;for(;0<y-x;)w=cl(w),y--;for(;0<x-y;)v=cl(v),x--;for(;y--;){if(w===v||v!==null&&w===v.alternate)break t;w=cl(w),v=cl(v)}w=null}else w=null;p!==null&&f1(d,f,p,w,!1),g!==null&&S!==null&&f1(d,S,g,w,!0)}}e:{if(f=u?Sl(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var T=RT;else if(s1(f))if(QA)T=NT;else{T=LT;var _=PT}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(T=MT);if(T&&(T=T(n,u))){qA(d,T,t,h);break e}_&&_(n,f,u),n==="focusout"&&(_=f._wrapperState)&&_.controlled&&f.type==="number"&&t0(f,"number",f.value)}switch(_=u?Sl(u):window,n){case"focusin":(s1(_)||_.contentEditable==="true")&&(Al=_,f0=u,Xu=null);break;case"focusout":Xu=f0=Al=null;break;case"mousedown":p0=!0;break;case"contextmenu":case"mouseup":case"dragend":p0=!1,u1(d,t,h);break;case"selectionchange":if(OT)break;case"keydown":case"keyup":u1(d,t,h)}var R;if(Ev)e:{switch(n){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else bl?YA(n,t)&&(M="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(M="onCompositionStart");M&&(XA&&t.locale!=="ko"&&(bl||M!=="onCompositionStart"?M==="onCompositionEnd"&&bl&&(R=WA()):(Zs=h,Av="value"in Zs?Zs.value:Zs.textContent,bl=!0)),_=Dp(u,M),0<_.length&&(M=new t1(M,n,null,t,h),d.push({event:M,listeners:_}),R?M.data=R:(R=KA(t),R!==null&&(M.data=R)))),(R=ET?_T(n,t):CT(n,t))&&(u=Dp(u,"onBeforeInput"),0<u.length&&(h=new t1("onBeforeInput","beforeinput",null,t,h),d.push({event:h,listeners:u}),h.data=R))}ox(d,e)})}function uh(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Dp(n,e){for(var t=e+"Capture",i=[];n!==null;){var r=n,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=ih(n,t),s!=null&&i.unshift(uh(n,s,r)),s=ih(n,e),s!=null&&i.push(uh(n,s,r))),n=n.return}return i}function cl(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function f1(n,e,t,i,r){for(var s=e._reactName,a=[];t!==null&&t!==i;){var o=t,c=o.alternate,u=o.stateNode;if(c!==null&&c===i)break;o.tag===5&&u!==null&&(o=u,r?(c=ih(t,s),c!=null&&a.unshift(uh(t,c,o))):r||(c=ih(t,s),c!=null&&a.push(uh(t,c,o)))),t=t.return}a.length!==0&&n.push({event:e,listeners:a})}var BT=/\r\n?/g,HT=/\u0000|\uFFFD/g;function p1(n){return(typeof n=="string"?n:""+n).replace(BT,`
`).replace(HT,"")}function Ef(n,e,t){if(e=p1(e),p1(n)!==e&&t)throw Error(G(425))}function Op(){}var g0=null,m0=null;function y0(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var v0=typeof setTimeout=="function"?setTimeout:void 0,$T=typeof clearTimeout=="function"?clearTimeout:void 0,g1=typeof Promise=="function"?Promise:void 0,UT=typeof queueMicrotask=="function"?queueMicrotask:typeof g1<"u"?function(n){return g1.resolve(null).then(n).catch(GT)}:v0;function GT(n){setTimeout(function(){throw n})}function _m(n,e){var t=e,i=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(i===0){n.removeChild(r),ah(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=r}while(t);ah(e)}function sa(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function m1(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var tu=Math.random().toString(36).slice(2),mr="__reactFiber$"+tu,hh="__reactProps$"+tu,os="__reactContainer$"+tu,w0="__reactEvents$"+tu,VT="__reactListeners$"+tu,WT="__reactHandles$"+tu;function Ia(n){var e=n[mr];if(e)return e;for(var t=n.parentNode;t;){if(e=t[os]||t[mr]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=m1(n);n!==null;){if(t=n[mr])return t;n=m1(n)}return e}n=t,t=n.parentNode}return null}function Jd(n){return n=n[mr]||n[os],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Sl(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(G(33))}function Fg(n){return n[hh]||null}var b0=[],El=-1;function ya(n){return{current:n}}function Ke(n){0>El||(n.current=b0[El],b0[El]=null,El--)}function Ve(n,e){El++,b0[El]=n.current,n.current=e}var da={},an=ya(da),Pn=ya(!1),Wo=da;function Wc(n,e){var t=n.type.contextTypes;if(!t)return da;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in t)r[s]=e[s];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function Ln(n){return n=n.childContextTypes,n!=null}function Fp(){Ke(Pn),Ke(an)}function y1(n,e,t){if(an.current!==da)throw Error(G(168));Ve(an,e),Ve(Pn,t)}function cx(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(G(108,PC(n)||"Unknown",r));return at({},t,i)}function jp(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||da,Wo=an.current,Ve(an,n),Ve(Pn,Pn.current),!0}function v1(n,e,t){var i=n.stateNode;if(!i)throw Error(G(169));t?(n=cx(n,e,Wo),i.__reactInternalMemoizedMergedChildContext=n,Ke(Pn),Ke(an),Ve(an,n)):Ke(Pn),Ve(Pn,t)}var kr=null,jg=!1,Cm=!1;function ux(n){kr===null?kr=[n]:kr.push(n)}function XT(n){jg=!0,ux(n)}function va(){if(!Cm&&kr!==null){Cm=!0;var n=0,e=je;try{var t=kr;for(je=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}kr=null,jg=!1}catch(r){throw kr!==null&&(kr=kr.slice(n+1)),DA(yv,va),r}finally{je=e,Cm=!1}}return null}var _l=[],Cl=0,zp=null,Bp=0,di=[],fi=0,Xo=null,ts=1,ns="";function _a(n,e){_l[Cl++]=Bp,_l[Cl++]=zp,zp=n,Bp=e}function hx(n,e,t){di[fi++]=ts,di[fi++]=ns,di[fi++]=Xo,Xo=n;var i=ts;n=ns;var r=32-$i(i)-1;i&=~(1<<r),t+=1;var s=32-$i(e)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,ts=1<<32-$i(e)+r|t<<r|i,ns=s+n}else ts=1<<s|t<<r|i,ns=n}function Cv(n){n.return!==null&&(_a(n,1),hx(n,1,0))}function Tv(n){for(;n===zp;)zp=_l[--Cl],_l[Cl]=null,Bp=_l[--Cl],_l[Cl]=null;for(;n===Xo;)Xo=di[--fi],di[fi]=null,ns=di[--fi],di[fi]=null,ts=di[--fi],di[fi]=null}var Zn=null,Jn=null,et=!1,Bi=null;function dx(n,e){var t=mi(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function w1(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Zn=n,Jn=sa(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Zn=n,Jn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Xo!==null?{id:ts,overflow:ns}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=mi(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Zn=n,Jn=null,!0):!1;default:return!1}}function A0(n){return(n.mode&1)!==0&&(n.flags&128)===0}function x0(n){if(et){var e=Jn;if(e){var t=e;if(!w1(n,e)){if(A0(n))throw Error(G(418));e=sa(t.nextSibling);var i=Zn;e&&w1(n,e)?dx(i,t):(n.flags=n.flags&-4097|2,et=!1,Zn=n)}}else{if(A0(n))throw Error(G(418));n.flags=n.flags&-4097|2,et=!1,Zn=n}}}function b1(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Zn=n}function _f(n){if(n!==Zn)return!1;if(!et)return b1(n),et=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!y0(n.type,n.memoizedProps)),e&&(e=Jn)){if(A0(n))throw fx(),Error(G(418));for(;e;)dx(n,e),e=sa(e.nextSibling)}if(b1(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(G(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Jn=sa(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Jn=null}}else Jn=Zn?sa(n.stateNode.nextSibling):null;return!0}function fx(){for(var n=Jn;n;)n=sa(n.nextSibling)}function Xc(){Jn=Zn=null,et=!1}function kv(n){Bi===null?Bi=[n]:Bi.push(n)}var YT=ds.ReactCurrentBatchConfig;function du(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(G(309));var i=t.stateNode}if(!i)throw Error(G(147,n));var r=i,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var o=r.refs;a===null?delete o[s]:o[s]=a},e._stringRef=s,e)}if(typeof n!="string")throw Error(G(284));if(!t._owner)throw Error(G(290,n))}return n}function Cf(n,e){throw n=Object.prototype.toString.call(e),Error(G(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function A1(n){var e=n._init;return e(n._payload)}function px(n){function e(v,y){if(n){var x=v.deletions;x===null?(v.deletions=[y],v.flags|=16):x.push(y)}}function t(v,y){if(!n)return null;for(;y!==null;)e(v,y),y=y.sibling;return null}function i(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function r(v,y){return v=ca(v,y),v.index=0,v.sibling=null,v}function s(v,y,x){return v.index=x,n?(x=v.alternate,x!==null?(x=x.index,x<y?(v.flags|=2,y):x):(v.flags|=2,y)):(v.flags|=1048576,y)}function a(v){return n&&v.alternate===null&&(v.flags|=2),v}function o(v,y,x,E){return y===null||y.tag!==6?(y=Nm(x,v.mode,E),y.return=v,y):(y=r(y,x),y.return=v,y)}function c(v,y,x,E){var T=x.type;return T===wl?h(v,y,x.props.children,E,x.key):y!==null&&(y.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===vs&&A1(T)===y.type)?(E=r(y,x.props),E.ref=du(v,y,x),E.return=v,E):(E=qf(x.type,x.key,x.props,null,v.mode,E),E.ref=du(v,y,x),E.return=v,E)}function u(v,y,x,E){return y===null||y.tag!==4||y.stateNode.containerInfo!==x.containerInfo||y.stateNode.implementation!==x.implementation?(y=Im(x,v.mode,E),y.return=v,y):(y=r(y,x.children||[]),y.return=v,y)}function h(v,y,x,E,T){return y===null||y.tag!==7?(y=Go(x,v.mode,E,T),y.return=v,y):(y=r(y,x),y.return=v,y)}function d(v,y,x){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Nm(""+y,v.mode,x),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case gf:return x=qf(y.type,y.key,y.props,null,v.mode,x),x.ref=du(v,null,y),x.return=v,x;case vl:return y=Im(y,v.mode,x),y.return=v,y;case vs:var E=y._init;return d(v,E(y._payload),x)}if(Su(y)||ou(y))return y=Go(y,v.mode,x,null),y.return=v,y;Cf(v,y)}return null}function f(v,y,x,E){var T=y!==null?y.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return T!==null?null:o(v,y,""+x,E);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case gf:return x.key===T?c(v,y,x,E):null;case vl:return x.key===T?u(v,y,x,E):null;case vs:return T=x._init,f(v,y,T(x._payload),E)}if(Su(x)||ou(x))return T!==null?null:h(v,y,x,E,null);Cf(v,x)}return null}function p(v,y,x,E,T){if(typeof E=="string"&&E!==""||typeof E=="number")return v=v.get(x)||null,o(y,v,""+E,T);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case gf:return v=v.get(E.key===null?x:E.key)||null,c(y,v,E,T);case vl:return v=v.get(E.key===null?x:E.key)||null,u(y,v,E,T);case vs:var _=E._init;return p(v,y,x,_(E._payload),T)}if(Su(E)||ou(E))return v=v.get(x)||null,h(y,v,E,T,null);Cf(y,E)}return null}function g(v,y,x,E){for(var T=null,_=null,R=y,M=y=0,j=null;R!==null&&M<x.length;M++){R.index>M?(j=R,R=null):j=R.sibling;var z=f(v,R,x[M],E);if(z===null){R===null&&(R=j);break}n&&R&&z.alternate===null&&e(v,R),y=s(z,y,M),_===null?T=z:_.sibling=z,_=z,R=j}if(M===x.length)return t(v,R),et&&_a(v,M),T;if(R===null){for(;M<x.length;M++)R=d(v,x[M],E),R!==null&&(y=s(R,y,M),_===null?T=R:_.sibling=R,_=R);return et&&_a(v,M),T}for(R=i(v,R);M<x.length;M++)j=p(R,v,M,x[M],E),j!==null&&(n&&j.alternate!==null&&R.delete(j.key===null?M:j.key),y=s(j,y,M),_===null?T=j:_.sibling=j,_=j);return n&&R.forEach(function(V){return e(v,V)}),et&&_a(v,M),T}function w(v,y,x,E){var T=ou(x);if(typeof T!="function")throw Error(G(150));if(x=T.call(x),x==null)throw Error(G(151));for(var _=T=null,R=y,M=y=0,j=null,z=x.next();R!==null&&!z.done;M++,z=x.next()){R.index>M?(j=R,R=null):j=R.sibling;var V=f(v,R,z.value,E);if(V===null){R===null&&(R=j);break}n&&R&&V.alternate===null&&e(v,R),y=s(V,y,M),_===null?T=V:_.sibling=V,_=V,R=j}if(z.done)return t(v,R),et&&_a(v,M),T;if(R===null){for(;!z.done;M++,z=x.next())z=d(v,z.value,E),z!==null&&(y=s(z,y,M),_===null?T=z:_.sibling=z,_=z);return et&&_a(v,M),T}for(R=i(v,R);!z.done;M++,z=x.next())z=p(R,v,M,z.value,E),z!==null&&(n&&z.alternate!==null&&R.delete(z.key===null?M:z.key),y=s(z,y,M),_===null?T=z:_.sibling=z,_=z);return n&&R.forEach(function(ue){return e(v,ue)}),et&&_a(v,M),T}function S(v,y,x,E){if(typeof x=="object"&&x!==null&&x.type===wl&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case gf:e:{for(var T=x.key,_=y;_!==null;){if(_.key===T){if(T=x.type,T===wl){if(_.tag===7){t(v,_.sibling),y=r(_,x.props.children),y.return=v,v=y;break e}}else if(_.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===vs&&A1(T)===_.type){t(v,_.sibling),y=r(_,x.props),y.ref=du(v,_,x),y.return=v,v=y;break e}t(v,_);break}else e(v,_);_=_.sibling}x.type===wl?(y=Go(x.props.children,v.mode,E,x.key),y.return=v,v=y):(E=qf(x.type,x.key,x.props,null,v.mode,E),E.ref=du(v,y,x),E.return=v,v=E)}return a(v);case vl:e:{for(_=x.key;y!==null;){if(y.key===_)if(y.tag===4&&y.stateNode.containerInfo===x.containerInfo&&y.stateNode.implementation===x.implementation){t(v,y.sibling),y=r(y,x.children||[]),y.return=v,v=y;break e}else{t(v,y);break}else e(v,y);y=y.sibling}y=Im(x,v.mode,E),y.return=v,v=y}return a(v);case vs:return _=x._init,S(v,y,_(x._payload),E)}if(Su(x))return g(v,y,x,E);if(ou(x))return w(v,y,x,E);Cf(v,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,y!==null&&y.tag===6?(t(v,y.sibling),y=r(y,x),y.return=v,v=y):(t(v,y),y=Nm(x,v.mode,E),y.return=v,v=y),a(v)):t(v,y)}return S}var Yc=px(!0),gx=px(!1),Hp=ya(null),$p=null,Tl=null,Rv=null;function Pv(){Rv=Tl=$p=null}function Lv(n){var e=Hp.current;Ke(Hp),n._currentValue=e}function S0(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function Ol(n,e){$p=n,Rv=Tl=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Rn=!0),n.firstContext=null)}function wi(n){var e=n._currentValue;if(Rv!==n)if(n={context:n,memoizedValue:e,next:null},Tl===null){if($p===null)throw Error(G(308));Tl=n,$p.dependencies={lanes:0,firstContext:n}}else Tl=Tl.next=n;return e}var Da=null;function Mv(n){Da===null?Da=[n]:Da.push(n)}function mx(n,e,t,i){var r=e.interleaved;return r===null?(t.next=t,Mv(e)):(t.next=r.next,r.next=t),e.interleaved=t,ls(n,i)}function ls(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var ws=!1;function Nv(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yx(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function is(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function aa(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,Pe&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,ls(n,t)}return r=i.interleaved,r===null?(e.next=e,Mv(i)):(e.next=r.next,r.next=e),i.interleaved=e,ls(n,t)}function Gf(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,vv(n,t)}}function x1(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var a={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?r=s=a:s=s.next=a,t=t.next}while(t!==null);s===null?r=s=e:s=s.next=e}else r=s=e;t={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Up(n,e,t,i){var r=n.updateQueue;ws=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,o=r.shared.pending;if(o!==null){r.shared.pending=null;var c=o,u=c.next;c.next=null,a===null?s=u:a.next=u,a=c;var h=n.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==a&&(o===null?h.firstBaseUpdate=u:o.next=u,h.lastBaseUpdate=c))}if(s!==null){var d=r.baseState;a=0,h=u=c=null,o=s;do{var f=o.lane,p=o.eventTime;if((i&f)===f){h!==null&&(h=h.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var g=n,w=o;switch(f=e,p=t,w.tag){case 1:if(g=w.payload,typeof g=="function"){d=g.call(p,d,f);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=w.payload,f=typeof g=="function"?g.call(p,d,f):g,f==null)break e;d=at({},d,f);break e;case 2:ws=!0}}o.callback!==null&&o.lane!==0&&(n.flags|=64,f=r.effects,f===null?r.effects=[o]:f.push(o))}else p={eventTime:p,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(u=h=p,c=d):h=h.next=p,a|=f;if(o=o.next,o===null){if(o=r.shared.pending,o===null)break;f=o,o=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(h===null&&(c=d),r.baseState=c,r.firstBaseUpdate=u,r.lastBaseUpdate=h,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Ko|=a,n.lanes=a,n.memoizedState=d}}function S1(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],r=i.callback;if(r!==null){if(i.callback=null,i=t,typeof r!="function")throw Error(G(191,r));r.call(i)}}}var Zd={},vr=ya(Zd),dh=ya(Zd),fh=ya(Zd);function Oa(n){if(n===Zd)throw Error(G(174));return n}function Iv(n,e){switch(Ve(fh,e),Ve(dh,n),Ve(vr,Zd),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:i0(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=i0(e,n)}Ke(vr),Ve(vr,e)}function Kc(){Ke(vr),Ke(dh),Ke(fh)}function vx(n){Oa(fh.current);var e=Oa(vr.current),t=i0(e,n.type);e!==t&&(Ve(dh,n),Ve(vr,t))}function Dv(n){dh.current===n&&(Ke(vr),Ke(dh))}var it=ya(0);function Gp(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Tm=[];function Ov(){for(var n=0;n<Tm.length;n++)Tm[n]._workInProgressVersionPrimary=null;Tm.length=0}var Vf=ds.ReactCurrentDispatcher,km=ds.ReactCurrentBatchConfig,Yo=0,st=null,Ct=null,Dt=null,Vp=!1,Yu=!1,ph=0,KT=0;function Xt(){throw Error(G(321))}function Fv(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Gi(n[t],e[t]))return!1;return!0}function jv(n,e,t,i,r,s){if(Yo=s,st=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Vf.current=n===null||n.memoizedState===null?ZT:ek,n=t(i,r),Yu){s=0;do{if(Yu=!1,ph=0,25<=s)throw Error(G(301));s+=1,Dt=Ct=null,e.updateQueue=null,Vf.current=tk,n=t(i,r)}while(Yu)}if(Vf.current=Wp,e=Ct!==null&&Ct.next!==null,Yo=0,Dt=Ct=st=null,Vp=!1,e)throw Error(G(300));return n}function zv(){var n=ph!==0;return ph=0,n}function Ji(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dt===null?st.memoizedState=Dt=n:Dt=Dt.next=n,Dt}function bi(){if(Ct===null){var n=st.alternate;n=n!==null?n.memoizedState:null}else n=Ct.next;var e=Dt===null?st.memoizedState:Dt.next;if(e!==null)Dt=e,Ct=n;else{if(n===null)throw Error(G(310));Ct=n,n={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},Dt===null?st.memoizedState=Dt=n:Dt=Dt.next=n}return Dt}function gh(n,e){return typeof e=="function"?e(n):e}function Rm(n){var e=bi(),t=e.queue;if(t===null)throw Error(G(311));t.lastRenderedReducer=n;var i=Ct,r=i.baseQueue,s=t.pending;if(s!==null){if(r!==null){var a=r.next;r.next=s.next,s.next=a}i.baseQueue=r=s,t.pending=null}if(r!==null){s=r.next,i=i.baseState;var o=a=null,c=null,u=s;do{var h=u.lane;if((Yo&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:n(i,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(o=c=d,a=i):c=c.next=d,st.lanes|=h,Ko|=h}u=u.next}while(u!==null&&u!==s);c===null?a=i:c.next=o,Gi(i,e.memoizedState)||(Rn=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=c,t.lastRenderedState=i}if(n=t.interleaved,n!==null){r=n;do s=r.lane,st.lanes|=s,Ko|=s,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Pm(n){var e=bi(),t=e.queue;if(t===null)throw Error(G(311));t.lastRenderedReducer=n;var i=t.dispatch,r=t.pending,s=e.memoizedState;if(r!==null){t.pending=null;var a=r=r.next;do s=n(s,a.action),a=a.next;while(a!==r);Gi(s,e.memoizedState)||(Rn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,i]}function wx(){}function bx(n,e){var t=st,i=bi(),r=e(),s=!Gi(i.memoizedState,r);if(s&&(i.memoizedState=r,Rn=!0),i=i.queue,Bv(Sx.bind(null,t,i,n),[n]),i.getSnapshot!==e||s||Dt!==null&&Dt.memoizedState.tag&1){if(t.flags|=2048,mh(9,xx.bind(null,t,i,r,e),void 0,null),Ot===null)throw Error(G(349));Yo&30||Ax(t,e,r)}return r}function Ax(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=st.updateQueue,e===null?(e={lastEffect:null,stores:null},st.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function xx(n,e,t,i){e.value=t,e.getSnapshot=i,Ex(e)&&_x(n)}function Sx(n,e,t){return t(function(){Ex(e)&&_x(n)})}function Ex(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Gi(n,t)}catch{return!0}}function _x(n){var e=ls(n,1);e!==null&&Ui(e,n,1,-1)}function E1(n){var e=Ji();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gh,lastRenderedState:n},e.queue=n,n=n.dispatch=JT.bind(null,st,n),[e.memoizedState,n]}function mh(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=st.updateQueue,e===null?(e={lastEffect:null,stores:null},st.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function Cx(){return bi().memoizedState}function Wf(n,e,t,i){var r=Ji();st.flags|=n,r.memoizedState=mh(1|e,t,void 0,i===void 0?null:i)}function zg(n,e,t,i){var r=bi();i=i===void 0?null:i;var s=void 0;if(Ct!==null){var a=Ct.memoizedState;if(s=a.destroy,i!==null&&Fv(i,a.deps)){r.memoizedState=mh(e,t,s,i);return}}st.flags|=n,r.memoizedState=mh(1|e,t,s,i)}function _1(n,e){return Wf(8390656,8,n,e)}function Bv(n,e){return zg(2048,8,n,e)}function Tx(n,e){return zg(4,2,n,e)}function kx(n,e){return zg(4,4,n,e)}function Rx(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function Px(n,e,t){return t=t!=null?t.concat([n]):null,zg(4,4,Rx.bind(null,e,n),t)}function Hv(){}function Lx(n,e){var t=bi();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&Fv(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function Mx(n,e){var t=bi();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&Fv(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function Nx(n,e,t){return Yo&21?(Gi(t,e)||(t=jA(),st.lanes|=t,Ko|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Rn=!0),n.memoizedState=t)}function qT(n,e){var t=je;je=t!==0&&4>t?t:4,n(!0);var i=km.transition;km.transition={};try{n(!1),e()}finally{je=t,km.transition=i}}function Ix(){return bi().memoizedState}function QT(n,e,t){var i=la(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},Dx(n))Ox(e,t);else if(t=mx(n,e,t,i),t!==null){var r=pn();Ui(t,n,i,r),Fx(t,e,i)}}function JT(n,e,t){var i=la(n),r={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(Dx(n))Ox(e,r);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,t);if(r.hasEagerState=!0,r.eagerState=o,Gi(o,a)){var c=e.interleaved;c===null?(r.next=r,Mv(e)):(r.next=c.next,c.next=r),e.interleaved=r;return}}catch{}finally{}t=mx(n,e,r,i),t!==null&&(r=pn(),Ui(t,n,i,r),Fx(t,e,i))}}function Dx(n){var e=n.alternate;return n===st||e!==null&&e===st}function Ox(n,e){Yu=Vp=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function Fx(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,vv(n,t)}}var Wp={readContext:wi,useCallback:Xt,useContext:Xt,useEffect:Xt,useImperativeHandle:Xt,useInsertionEffect:Xt,useLayoutEffect:Xt,useMemo:Xt,useReducer:Xt,useRef:Xt,useState:Xt,useDebugValue:Xt,useDeferredValue:Xt,useTransition:Xt,useMutableSource:Xt,useSyncExternalStore:Xt,useId:Xt,unstable_isNewReconciler:!1},ZT={readContext:wi,useCallback:function(n,e){return Ji().memoizedState=[n,e===void 0?null:e],n},useContext:wi,useEffect:_1,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Wf(4194308,4,Rx.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Wf(4194308,4,n,e)},useInsertionEffect:function(n,e){return Wf(4,2,n,e)},useMemo:function(n,e){var t=Ji();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=Ji();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=QT.bind(null,st,n),[i.memoizedState,n]},useRef:function(n){var e=Ji();return n={current:n},e.memoizedState=n},useState:E1,useDebugValue:Hv,useDeferredValue:function(n){return Ji().memoizedState=n},useTransition:function(){var n=E1(!1),e=n[0];return n=qT.bind(null,n[1]),Ji().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=st,r=Ji();if(et){if(t===void 0)throw Error(G(407));t=t()}else{if(t=e(),Ot===null)throw Error(G(349));Yo&30||Ax(i,e,t)}r.memoizedState=t;var s={value:t,getSnapshot:e};return r.queue=s,_1(Sx.bind(null,i,s,n),[n]),i.flags|=2048,mh(9,xx.bind(null,i,s,t,e),void 0,null),t},useId:function(){var n=Ji(),e=Ot.identifierPrefix;if(et){var t=ns,i=ts;t=(i&~(1<<32-$i(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=ph++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=KT++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},ek={readContext:wi,useCallback:Lx,useContext:wi,useEffect:Bv,useImperativeHandle:Px,useInsertionEffect:Tx,useLayoutEffect:kx,useMemo:Mx,useReducer:Rm,useRef:Cx,useState:function(){return Rm(gh)},useDebugValue:Hv,useDeferredValue:function(n){var e=bi();return Nx(e,Ct.memoizedState,n)},useTransition:function(){var n=Rm(gh)[0],e=bi().memoizedState;return[n,e]},useMutableSource:wx,useSyncExternalStore:bx,useId:Ix,unstable_isNewReconciler:!1},tk={readContext:wi,useCallback:Lx,useContext:wi,useEffect:Bv,useImperativeHandle:Px,useInsertionEffect:Tx,useLayoutEffect:kx,useMemo:Mx,useReducer:Pm,useRef:Cx,useState:function(){return Pm(gh)},useDebugValue:Hv,useDeferredValue:function(n){var e=bi();return Ct===null?e.memoizedState=n:Nx(e,Ct.memoizedState,n)},useTransition:function(){var n=Pm(gh)[0],e=bi().memoizedState;return[n,e]},useMutableSource:wx,useSyncExternalStore:bx,useId:Ix,unstable_isNewReconciler:!1};function Ei(n,e){if(n&&n.defaultProps){e=at({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function E0(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:at({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Bg={isMounted:function(n){return(n=n._reactInternals)?il(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=pn(),r=la(n),s=is(i,r);s.payload=e,t!=null&&(s.callback=t),e=aa(n,s,r),e!==null&&(Ui(e,n,r,i),Gf(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=pn(),r=la(n),s=is(i,r);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=aa(n,s,r),e!==null&&(Ui(e,n,r,i),Gf(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=pn(),i=la(n),r=is(t,i);r.tag=2,e!=null&&(r.callback=e),e=aa(n,r,i),e!==null&&(Ui(e,n,i,t),Gf(e,n,i))}};function C1(n,e,t,i,r,s,a){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,a):e.prototype&&e.prototype.isPureReactComponent?!lh(t,i)||!lh(r,s):!0}function jx(n,e,t){var i=!1,r=da,s=e.contextType;return typeof s=="object"&&s!==null?s=wi(s):(r=Ln(e)?Wo:an.current,i=e.contextTypes,s=(i=i!=null)?Wc(n,r):da),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Bg,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=s),e}function T1(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&Bg.enqueueReplaceState(e,e.state,null)}function _0(n,e,t,i){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs={},Nv(n);var s=e.contextType;typeof s=="object"&&s!==null?r.context=wi(s):(s=Ln(e)?Wo:an.current,r.context=Wc(n,s)),r.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(E0(n,e,s,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Bg.enqueueReplaceState(r,r.state,null),Up(n,t,r,i),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function qc(n,e){try{var t="",i=e;do t+=RC(i),i=i.return;while(i);var r=t}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:r,digest:null}}function Lm(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function C0(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var nk=typeof WeakMap=="function"?WeakMap:Map;function zx(n,e,t){t=is(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){Yp||(Yp=!0,O0=i),C0(n,e)},t}function Bx(n,e,t){t=is(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;t.payload=function(){return i(r)},t.callback=function(){C0(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){C0(n,e),typeof i!="function"&&(oa===null?oa=new Set([this]):oa.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),t}function k1(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new nk;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(t)||(r.add(t),n=mk.bind(null,n,e,t),e.then(n,n))}function R1(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function P1(n,e,t,i,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=is(-1,1),e.tag=2,aa(t,e,1))),t.lanes|=1),n)}var ik=ds.ReactCurrentOwner,Rn=!1;function fn(n,e,t,i){e.child=n===null?gx(e,null,t,i):Yc(e,n.child,t,i)}function L1(n,e,t,i,r){t=t.render;var s=e.ref;return Ol(e,r),i=jv(n,e,t,i,s,r),t=zv(),n!==null&&!Rn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,cs(n,e,r)):(et&&t&&Cv(e),e.flags|=1,fn(n,e,i,r),e.child)}function M1(n,e,t,i,r){if(n===null){var s=t.type;return typeof s=="function"&&!Kv(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,Hx(n,e,s,i,r)):(n=qf(t.type,null,i,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&r)){var a=s.memoizedProps;if(t=t.compare,t=t!==null?t:lh,t(a,i)&&n.ref===e.ref)return cs(n,e,r)}return e.flags|=1,n=ca(s,i),n.ref=e.ref,n.return=e,e.child=n}function Hx(n,e,t,i,r){if(n!==null){var s=n.memoizedProps;if(lh(s,i)&&n.ref===e.ref)if(Rn=!1,e.pendingProps=i=s,(n.lanes&r)!==0)n.flags&131072&&(Rn=!0);else return e.lanes=n.lanes,cs(n,e,r)}return T0(n,e,t,i,r)}function $x(n,e,t){var i=e.pendingProps,r=i.children,s=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ve(Rl,Yn),Yn|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Ve(Rl,Yn),Yn|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:t,Ve(Rl,Yn),Yn|=i}else s!==null?(i=s.baseLanes|t,e.memoizedState=null):i=t,Ve(Rl,Yn),Yn|=i;return fn(n,e,r,t),e.child}function Ux(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function T0(n,e,t,i,r){var s=Ln(t)?Wo:an.current;return s=Wc(e,s),Ol(e,r),t=jv(n,e,t,i,s,r),i=zv(),n!==null&&!Rn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,cs(n,e,r)):(et&&i&&Cv(e),e.flags|=1,fn(n,e,t,r),e.child)}function N1(n,e,t,i,r){if(Ln(t)){var s=!0;jp(e)}else s=!1;if(Ol(e,r),e.stateNode===null)Xf(n,e),jx(e,t,i),_0(e,t,i,r),i=!0;else if(n===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var c=a.context,u=t.contextType;typeof u=="object"&&u!==null?u=wi(u):(u=Ln(t)?Wo:an.current,u=Wc(e,u));var h=t.getDerivedStateFromProps,d=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==i||c!==u)&&T1(e,a,i,u),ws=!1;var f=e.memoizedState;a.state=f,Up(e,i,a,r),c=e.memoizedState,o!==i||f!==c||Pn.current||ws?(typeof h=="function"&&(E0(e,t,h,i),c=e.memoizedState),(o=ws||C1(e,t,o,i,f,c,u))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=c),a.props=i,a.state=c,a.context=u,i=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,yx(n,e),o=e.memoizedProps,u=e.type===e.elementType?o:Ei(e.type,o),a.props=u,d=e.pendingProps,f=a.context,c=t.contextType,typeof c=="object"&&c!==null?c=wi(c):(c=Ln(t)?Wo:an.current,c=Wc(e,c));var p=t.getDerivedStateFromProps;(h=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==d||f!==c)&&T1(e,a,i,c),ws=!1,f=e.memoizedState,a.state=f,Up(e,i,a,r);var g=e.memoizedState;o!==d||f!==g||Pn.current||ws?(typeof p=="function"&&(E0(e,t,p,i),g=e.memoizedState),(u=ws||C1(e,t,u,i,f,g,c)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,g,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,g,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=g),a.props=i,a.state=g,a.context=c,i=u):(typeof a.componentDidUpdate!="function"||o===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),i=!1)}return k0(n,e,t,i,s,r)}function k0(n,e,t,i,r,s){Ux(n,e);var a=(e.flags&128)!==0;if(!i&&!a)return r&&v1(e,t,!1),cs(n,e,s);i=e.stateNode,ik.current=e;var o=a&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&a?(e.child=Yc(e,n.child,null,s),e.child=Yc(e,null,o,s)):fn(n,e,o,s),e.memoizedState=i.state,r&&v1(e,t,!0),e.child}function Gx(n){var e=n.stateNode;e.pendingContext?y1(n,e.pendingContext,e.pendingContext!==e.context):e.context&&y1(n,e.context,!1),Iv(n,e.containerInfo)}function I1(n,e,t,i,r){return Xc(),kv(r),e.flags|=256,fn(n,e,t,i),e.child}var R0={dehydrated:null,treeContext:null,retryLane:0};function P0(n){return{baseLanes:n,cachePool:null,transitions:null}}function Vx(n,e,t){var i=e.pendingProps,r=it.current,s=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=n!==null&&n.memoizedState===null?!1:(r&2)!==0),o?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),Ve(it,r&1),n===null)return x0(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,n=i.fallback,s?(i=e.mode,s=e.child,a={mode:"hidden",children:a},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=Ug(a,i,0,null),n=Go(n,i,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=P0(t),e.memoizedState=R0,n):$v(e,a));if(r=n.memoizedState,r!==null&&(o=r.dehydrated,o!==null))return rk(n,e,a,i,o,r,t);if(s){s=i.fallback,a=e.mode,r=n.child,o=r.sibling;var c={mode:"hidden",children:i.children};return!(a&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=c,e.deletions=null):(i=ca(r,c),i.subtreeFlags=r.subtreeFlags&14680064),o!==null?s=ca(o,s):(s=Go(s,a,t,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,a=n.child.memoizedState,a=a===null?P0(t):{baseLanes:a.baseLanes|t,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=n.childLanes&~t,e.memoizedState=R0,i}return s=n.child,n=s.sibling,i=ca(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function $v(n,e){return e=Ug({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Tf(n,e,t,i){return i!==null&&kv(i),Yc(e,n.child,null,t),n=$v(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function rk(n,e,t,i,r,s,a){if(t)return e.flags&256?(e.flags&=-257,i=Lm(Error(G(422))),Tf(n,e,a,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=Ug({mode:"visible",children:i.children},r,0,null),s=Go(s,r,a,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Yc(e,n.child,null,a),e.child.memoizedState=P0(a),e.memoizedState=R0,s);if(!(e.mode&1))return Tf(n,e,a,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var o=i.dgst;return i=o,s=Error(G(419)),i=Lm(s,i,void 0),Tf(n,e,a,i)}if(o=(a&n.childLanes)!==0,Rn||o){if(i=Ot,i!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|a)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,ls(n,r),Ui(i,n,r,-1))}return Yv(),i=Lm(Error(G(421))),Tf(n,e,a,i)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=yk.bind(null,n),r._reactRetry=e,null):(n=s.treeContext,Jn=sa(r.nextSibling),Zn=e,et=!0,Bi=null,n!==null&&(di[fi++]=ts,di[fi++]=ns,di[fi++]=Xo,ts=n.id,ns=n.overflow,Xo=e),e=$v(e,i.children),e.flags|=4096,e)}function D1(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),S0(n.return,e,t)}function Mm(n,e,t,i,r){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=t,s.tailMode=r)}function Wx(n,e,t){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(fn(n,e,i.children,t),i=it.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&D1(n,t,e);else if(n.tag===19)D1(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(Ve(it,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&Gp(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),Mm(e,!1,r,t,s);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&Gp(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}Mm(e,!0,t,null,s);break;case"together":Mm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Xf(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function cs(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Ko|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(G(153));if(e.child!==null){for(n=e.child,t=ca(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=ca(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function sk(n,e,t){switch(e.tag){case 3:Gx(e),Xc();break;case 5:vx(e);break;case 1:Ln(e.type)&&jp(e);break;case 4:Iv(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Ve(Hp,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Ve(it,it.current&1),e.flags|=128,null):t&e.child.childLanes?Vx(n,e,t):(Ve(it,it.current&1),n=cs(n,e,t),n!==null?n.sibling:null);Ve(it,it.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return Wx(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Ve(it,it.current),i)break;return null;case 22:case 23:return e.lanes=0,$x(n,e,t)}return cs(n,e,t)}var Xx,L0,Yx,Kx;Xx=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};L0=function(){};Yx=function(n,e,t,i){var r=n.memoizedProps;if(r!==i){n=e.stateNode,Oa(vr.current);var s=null;switch(t){case"input":r=Zm(n,r),i=Zm(n,i),s=[];break;case"select":r=at({},r,{value:void 0}),i=at({},i,{value:void 0}),s=[];break;case"textarea":r=n0(n,r),i=n0(n,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=Op)}r0(t,i);var a;t=null;for(u in r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var o=r[u];for(a in o)o.hasOwnProperty(a)&&(t||(t={}),t[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(th.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var c=i[u];if(o=r!=null?r[u]:void 0,i.hasOwnProperty(u)&&c!==o&&(c!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(t||(t={}),t[a]="");for(a in c)c.hasOwnProperty(a)&&o[a]!==c[a]&&(t||(t={}),t[a]=c[a])}else t||(s||(s=[]),s.push(u,t)),t=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(th.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Xe("scroll",n),s||o===c||(s=[])):(s=s||[]).push(u,c))}t&&(s=s||[]).push("style",t);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};Kx=function(n,e,t,i){t!==i&&(e.flags|=4)};function fu(n,e){if(!et)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function Yt(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function ak(n,e,t){var i=e.pendingProps;switch(Tv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yt(e),null;case 1:return Ln(e.type)&&Fp(),Yt(e),null;case 3:return i=e.stateNode,Kc(),Ke(Pn),Ke(an),Ov(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(_f(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Bi!==null&&(z0(Bi),Bi=null))),L0(n,e),Yt(e),null;case 5:Dv(e);var r=Oa(fh.current);if(t=e.type,n!==null&&e.stateNode!=null)Yx(n,e,t,i,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(G(166));return Yt(e),null}if(n=Oa(vr.current),_f(e)){i=e.stateNode,t=e.type;var s=e.memoizedProps;switch(i[mr]=e,i[hh]=s,n=(e.mode&1)!==0,t){case"dialog":Xe("cancel",i),Xe("close",i);break;case"iframe":case"object":case"embed":Xe("load",i);break;case"video":case"audio":for(r=0;r<_u.length;r++)Xe(_u[r],i);break;case"source":Xe("error",i);break;case"img":case"image":case"link":Xe("error",i),Xe("load",i);break;case"details":Xe("toggle",i);break;case"input":Gw(i,s),Xe("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Xe("invalid",i);break;case"textarea":Ww(i,s),Xe("invalid",i)}r0(t,s),r=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?i.textContent!==o&&(s.suppressHydrationWarning!==!0&&Ef(i.textContent,o,n),r=["children",o]):typeof o=="number"&&i.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&Ef(i.textContent,o,n),r=["children",""+o]):th.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Xe("scroll",i)}switch(t){case"input":mf(i),Vw(i,s,!0);break;case"textarea":mf(i),Xw(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Op)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=SA(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=a.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=a.createElement(t,{is:i.is}):(n=a.createElement(t),t==="select"&&(a=n,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):n=a.createElementNS(n,t),n[mr]=e,n[hh]=i,Xx(n,e,!1,!1),e.stateNode=n;e:{switch(a=s0(t,i),t){case"dialog":Xe("cancel",n),Xe("close",n),r=i;break;case"iframe":case"object":case"embed":Xe("load",n),r=i;break;case"video":case"audio":for(r=0;r<_u.length;r++)Xe(_u[r],n);r=i;break;case"source":Xe("error",n),r=i;break;case"img":case"image":case"link":Xe("error",n),Xe("load",n),r=i;break;case"details":Xe("toggle",n),r=i;break;case"input":Gw(n,i),r=Zm(n,i),Xe("invalid",n);break;case"option":r=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},r=at({},i,{value:void 0}),Xe("invalid",n);break;case"textarea":Ww(n,i),r=n0(n,i),Xe("invalid",n);break;default:r=i}r0(t,r),o=r;for(s in o)if(o.hasOwnProperty(s)){var c=o[s];s==="style"?CA(n,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&EA(n,c)):s==="children"?typeof c=="string"?(t!=="textarea"||c!=="")&&nh(n,c):typeof c=="number"&&nh(n,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(th.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Xe("scroll",n):c!=null&&dv(n,s,c,a))}switch(t){case"input":mf(n),Vw(n,i,!1);break;case"textarea":mf(n),Xw(n);break;case"option":i.value!=null&&n.setAttribute("value",""+ha(i.value));break;case"select":n.multiple=!!i.multiple,s=i.value,s!=null?Ml(n,!!i.multiple,s,!1):i.defaultValue!=null&&Ml(n,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=Op)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Yt(e),null;case 6:if(n&&e.stateNode!=null)Kx(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(G(166));if(t=Oa(fh.current),Oa(vr.current),_f(e)){if(i=e.stateNode,t=e.memoizedProps,i[mr]=e,(s=i.nodeValue!==t)&&(n=Zn,n!==null))switch(n.tag){case 3:Ef(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Ef(i.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[mr]=e,e.stateNode=i}return Yt(e),null;case 13:if(Ke(it),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(et&&Jn!==null&&e.mode&1&&!(e.flags&128))fx(),Xc(),e.flags|=98560,s=!1;else if(s=_f(e),i!==null&&i.dehydrated!==null){if(n===null){if(!s)throw Error(G(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(G(317));s[mr]=e}else Xc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Yt(e),s=!1}else Bi!==null&&(z0(Bi),Bi=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||it.current&1?Tt===0&&(Tt=3):Yv())),e.updateQueue!==null&&(e.flags|=4),Yt(e),null);case 4:return Kc(),L0(n,e),n===null&&ch(e.stateNode.containerInfo),Yt(e),null;case 10:return Lv(e.type._context),Yt(e),null;case 17:return Ln(e.type)&&Fp(),Yt(e),null;case 19:if(Ke(it),s=e.memoizedState,s===null)return Yt(e),null;if(i=(e.flags&128)!==0,a=s.rendering,a===null)if(i)fu(s,!1);else{if(Tt!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(a=Gp(n),a!==null){for(e.flags|=128,fu(s,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)s=t,n=i,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,n=a.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Ve(it,it.current&1|2),e.child}n=n.sibling}s.tail!==null&&ft()>Qc&&(e.flags|=128,i=!0,fu(s,!1),e.lanes=4194304)}else{if(!i)if(n=Gp(a),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),fu(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!et)return Yt(e),null}else 2*ft()-s.renderingStartTime>Qc&&t!==1073741824&&(e.flags|=128,i=!0,fu(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(t=s.last,t!==null?t.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ft(),e.sibling=null,t=it.current,Ve(it,i?t&1|2:t&1),e):(Yt(e),null);case 22:case 23:return Xv(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Yn&1073741824&&(Yt(e),e.subtreeFlags&6&&(e.flags|=8192)):Yt(e),null;case 24:return null;case 25:return null}throw Error(G(156,e.tag))}function ok(n,e){switch(Tv(e),e.tag){case 1:return Ln(e.type)&&Fp(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Kc(),Ke(Pn),Ke(an),Ov(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return Dv(e),null;case 13:if(Ke(it),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(G(340));Xc()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Ke(it),null;case 4:return Kc(),null;case 10:return Lv(e.type._context),null;case 22:case 23:return Xv(),null;case 24:return null;default:return null}}var kf=!1,rn=!1,lk=typeof WeakSet=="function"?WeakSet:Set,Q=null;function kl(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){ut(n,e,i)}else t.current=null}function M0(n,e,t){try{t()}catch(i){ut(n,e,i)}}var O1=!1;function ck(n,e){if(g0=Np,n=ex(),_v(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var a=0,o=-1,c=-1,u=0,h=0,d=n,f=null;t:for(;;){for(var p;d!==t||r!==0&&d.nodeType!==3||(o=a+r),d!==s||i!==0&&d.nodeType!==3||(c=a+i),d.nodeType===3&&(a+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===n)break t;if(f===t&&++u===r&&(o=a),f===s&&++h===i&&(c=a),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}t=o===-1||c===-1?null:{start:o,end:c}}else t=null}t=t||{start:0,end:0}}else t=null;for(m0={focusedElem:n,selectionRange:t},Np=!1,Q=e;Q!==null;)if(e=Q,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Q=n;else for(;Q!==null;){e=Q;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var w=g.memoizedProps,S=g.memoizedState,v=e.stateNode,y=v.getSnapshotBeforeUpdate(e.elementType===e.type?w:Ei(e.type,w),S);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(G(163))}}catch(E){ut(e,e.return,E)}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}return g=O1,O1=!1,g}function Ku(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&n)===n){var s=r.destroy;r.destroy=void 0,s!==void 0&&M0(e,t,s)}r=r.next}while(r!==i)}}function Hg(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function N0(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function qx(n){var e=n.alternate;e!==null&&(n.alternate=null,qx(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[mr],delete e[hh],delete e[w0],delete e[VT],delete e[WT])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Qx(n){return n.tag===5||n.tag===3||n.tag===4}function F1(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Qx(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function I0(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Op));else if(i!==4&&(n=n.child,n!==null))for(I0(n,e,t),n=n.sibling;n!==null;)I0(n,e,t),n=n.sibling}function D0(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(D0(n,e,t),n=n.sibling;n!==null;)D0(n,e,t),n=n.sibling}var Ut=null,ji=!1;function gs(n,e,t){for(t=t.child;t!==null;)Jx(n,e,t),t=t.sibling}function Jx(n,e,t){if(yr&&typeof yr.onCommitFiberUnmount=="function")try{yr.onCommitFiberUnmount(Ng,t)}catch{}switch(t.tag){case 5:rn||kl(t,e);case 6:var i=Ut,r=ji;Ut=null,gs(n,e,t),Ut=i,ji=r,Ut!==null&&(ji?(n=Ut,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Ut.removeChild(t.stateNode));break;case 18:Ut!==null&&(ji?(n=Ut,t=t.stateNode,n.nodeType===8?_m(n.parentNode,t):n.nodeType===1&&_m(n,t),ah(n)):_m(Ut,t.stateNode));break;case 4:i=Ut,r=ji,Ut=t.stateNode.containerInfo,ji=!0,gs(n,e,t),Ut=i,ji=r;break;case 0:case 11:case 14:case 15:if(!rn&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&M0(t,e,a),r=r.next}while(r!==i)}gs(n,e,t);break;case 1:if(!rn&&(kl(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(o){ut(t,e,o)}gs(n,e,t);break;case 21:gs(n,e,t);break;case 22:t.mode&1?(rn=(i=rn)||t.memoizedState!==null,gs(n,e,t),rn=i):gs(n,e,t);break;default:gs(n,e,t)}}function j1(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new lk),e.forEach(function(i){var r=vk.bind(null,n,i);t.has(i)||(t.add(i),i.then(r,r))})}}function Ai(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];try{var s=n,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:Ut=o.stateNode,ji=!1;break e;case 3:Ut=o.stateNode.containerInfo,ji=!0;break e;case 4:Ut=o.stateNode.containerInfo,ji=!0;break e}o=o.return}if(Ut===null)throw Error(G(160));Jx(s,a,r),Ut=null,ji=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(u){ut(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Zx(e,n),e=e.sibling}function Zx(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Ai(e,n),Yi(n),i&4){try{Ku(3,n,n.return),Hg(3,n)}catch(w){ut(n,n.return,w)}try{Ku(5,n,n.return)}catch(w){ut(n,n.return,w)}}break;case 1:Ai(e,n),Yi(n),i&512&&t!==null&&kl(t,t.return);break;case 5:if(Ai(e,n),Yi(n),i&512&&t!==null&&kl(t,t.return),n.flags&32){var r=n.stateNode;try{nh(r,"")}catch(w){ut(n,n.return,w)}}if(i&4&&(r=n.stateNode,r!=null)){var s=n.memoizedProps,a=t!==null?t.memoizedProps:s,o=n.type,c=n.updateQueue;if(n.updateQueue=null,c!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&AA(r,s),s0(o,a);var u=s0(o,s);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];h==="style"?CA(r,d):h==="dangerouslySetInnerHTML"?EA(r,d):h==="children"?nh(r,d):dv(r,h,d,u)}switch(o){case"input":e0(r,s);break;case"textarea":xA(r,s);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?Ml(r,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?Ml(r,!!s.multiple,s.defaultValue,!0):Ml(r,!!s.multiple,s.multiple?[]:"",!1))}r[hh]=s}catch(w){ut(n,n.return,w)}}break;case 6:if(Ai(e,n),Yi(n),i&4){if(n.stateNode===null)throw Error(G(162));r=n.stateNode,s=n.memoizedProps;try{r.nodeValue=s}catch(w){ut(n,n.return,w)}}break;case 3:if(Ai(e,n),Yi(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{ah(e.containerInfo)}catch(w){ut(n,n.return,w)}break;case 4:Ai(e,n),Yi(n);break;case 13:Ai(e,n),Yi(n),r=n.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(Vv=ft())),i&4&&j1(n);break;case 22:if(h=t!==null&&t.memoizedState!==null,n.mode&1?(rn=(u=rn)||h,Ai(e,n),rn=u):Ai(e,n),Yi(n),i&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!h&&n.mode&1)for(Q=n,h=n.child;h!==null;){for(d=Q=h;Q!==null;){switch(f=Q,p=f.child,f.tag){case 0:case 11:case 14:case 15:Ku(4,f,f.return);break;case 1:kl(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){i=f,t=f.return;try{e=i,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(w){ut(i,t,w)}}break;case 5:kl(f,f.return);break;case 22:if(f.memoizedState!==null){B1(d);continue}}p!==null?(p.return=f,Q=p):B1(d)}h=h.sibling}e:for(h=null,d=n;;){if(d.tag===5){if(h===null){h=d;try{r=d.stateNode,u?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=d.stateNode,c=d.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=_A("display",a))}catch(w){ut(n,n.return,w)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(w){ut(n,n.return,w)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ai(e,n),Yi(n),i&4&&j1(n);break;case 21:break;default:Ai(e,n),Yi(n)}}function Yi(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(Qx(t)){var i=t;break e}t=t.return}throw Error(G(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(nh(r,""),i.flags&=-33);var s=F1(n);D0(n,s,r);break;case 3:case 4:var a=i.stateNode.containerInfo,o=F1(n);I0(n,o,a);break;default:throw Error(G(161))}}catch(c){ut(n,n.return,c)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function uk(n,e,t){Q=n,eS(n)}function eS(n,e,t){for(var i=(n.mode&1)!==0;Q!==null;){var r=Q,s=r.child;if(r.tag===22&&i){var a=r.memoizedState!==null||kf;if(!a){var o=r.alternate,c=o!==null&&o.memoizedState!==null||rn;o=kf;var u=rn;if(kf=a,(rn=c)&&!u)for(Q=r;Q!==null;)a=Q,c=a.child,a.tag===22&&a.memoizedState!==null?H1(r):c!==null?(c.return=a,Q=c):H1(r);for(;s!==null;)Q=s,eS(s),s=s.sibling;Q=r,kf=o,rn=u}z1(n)}else r.subtreeFlags&8772&&s!==null?(s.return=r,Q=s):z1(n)}}function z1(n){for(;Q!==null;){var e=Q;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:rn||Hg(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!rn)if(t===null)i.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:Ei(e.type,t.memoizedProps);i.componentDidUpdate(r,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&S1(e,s,i);break;case 3:var a=e.updateQueue;if(a!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}S1(e,a,t)}break;case 5:var o=e.stateNode;if(t===null&&e.flags&4){t=o;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&t.focus();break;case"img":c.src&&(t.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&ah(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(G(163))}rn||e.flags&512&&N0(e)}catch(f){ut(e,e.return,f)}}if(e===n){Q=null;break}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}}function B1(n){for(;Q!==null;){var e=Q;if(e===n){Q=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Q=t;break}Q=e.return}}function H1(n){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Hg(4,e)}catch(c){ut(e,t,c)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(c){ut(e,r,c)}}var s=e.return;try{N0(e)}catch(c){ut(e,s,c)}break;case 5:var a=e.return;try{N0(e)}catch(c){ut(e,a,c)}}}catch(c){ut(e,e.return,c)}if(e===n){Q=null;break}var o=e.sibling;if(o!==null){o.return=e.return,Q=o;break}Q=e.return}}var hk=Math.ceil,Xp=ds.ReactCurrentDispatcher,Uv=ds.ReactCurrentOwner,yi=ds.ReactCurrentBatchConfig,Pe=0,Ot=null,vt=null,Vt=0,Yn=0,Rl=ya(0),Tt=0,yh=null,Ko=0,$g=0,Gv=0,qu=null,kn=null,Vv=0,Qc=1/0,_r=null,Yp=!1,O0=null,oa=null,Rf=!1,ea=null,Kp=0,Qu=0,F0=null,Yf=-1,Kf=0;function pn(){return Pe&6?ft():Yf!==-1?Yf:Yf=ft()}function la(n){return n.mode&1?Pe&2&&Vt!==0?Vt&-Vt:YT.transition!==null?(Kf===0&&(Kf=jA()),Kf):(n=je,n!==0||(n=window.event,n=n===void 0?16:VA(n.type)),n):1}function Ui(n,e,t,i){if(50<Qu)throw Qu=0,F0=null,Error(G(185));qd(n,t,i),(!(Pe&2)||n!==Ot)&&(n===Ot&&(!(Pe&2)&&($g|=t),Tt===4&&As(n,Vt)),Mn(n,i),t===1&&Pe===0&&!(e.mode&1)&&(Qc=ft()+500,jg&&va()))}function Mn(n,e){var t=n.callbackNode;YC(n,e);var i=Mp(n,n===Ot?Vt:0);if(i===0)t!==null&&qw(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&qw(t),e===1)n.tag===0?XT($1.bind(null,n)):ux($1.bind(null,n)),UT(function(){!(Pe&6)&&va()}),t=null;else{switch(zA(i)){case 1:t=yv;break;case 4:t=OA;break;case 16:t=Lp;break;case 536870912:t=FA;break;default:t=Lp}t=lS(t,tS.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function tS(n,e){if(Yf=-1,Kf=0,Pe&6)throw Error(G(327));var t=n.callbackNode;if(Fl()&&n.callbackNode!==t)return null;var i=Mp(n,n===Ot?Vt:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=qp(n,i);else{e=i;var r=Pe;Pe|=2;var s=iS();(Ot!==n||Vt!==e)&&(_r=null,Qc=ft()+500,Uo(n,e));do try{pk();break}catch(o){nS(n,o)}while(!0);Pv(),Xp.current=s,Pe=r,vt!==null?e=0:(Ot=null,Vt=0,e=Tt)}if(e!==0){if(e===2&&(r=u0(n),r!==0&&(i=r,e=j0(n,r))),e===1)throw t=yh,Uo(n,0),As(n,i),Mn(n,ft()),t;if(e===6)As(n,i);else{if(r=n.current.alternate,!(i&30)&&!dk(r)&&(e=qp(n,i),e===2&&(s=u0(n),s!==0&&(i=s,e=j0(n,s))),e===1))throw t=yh,Uo(n,0),As(n,i),Mn(n,ft()),t;switch(n.finishedWork=r,n.finishedLanes=i,e){case 0:case 1:throw Error(G(345));case 2:Ca(n,kn,_r);break;case 3:if(As(n,i),(i&130023424)===i&&(e=Vv+500-ft(),10<e)){if(Mp(n,0)!==0)break;if(r=n.suspendedLanes,(r&i)!==i){pn(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=v0(Ca.bind(null,n,kn,_r),e);break}Ca(n,kn,_r);break;case 4:if(As(n,i),(i&4194240)===i)break;for(e=n.eventTimes,r=-1;0<i;){var a=31-$i(i);s=1<<a,a=e[a],a>r&&(r=a),i&=~s}if(i=r,i=ft()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*hk(i/1960))-i,10<i){n.timeoutHandle=v0(Ca.bind(null,n,kn,_r),i);break}Ca(n,kn,_r);break;case 5:Ca(n,kn,_r);break;default:throw Error(G(329))}}}return Mn(n,ft()),n.callbackNode===t?tS.bind(null,n):null}function j0(n,e){var t=qu;return n.current.memoizedState.isDehydrated&&(Uo(n,e).flags|=256),n=qp(n,e),n!==2&&(e=kn,kn=t,e!==null&&z0(e)),n}function z0(n){kn===null?kn=n:kn.push.apply(kn,n)}function dk(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var r=t[i],s=r.getSnapshot;r=r.value;try{if(!Gi(s(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function As(n,e){for(e&=~Gv,e&=~$g,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-$i(e),i=1<<t;n[t]=-1,e&=~i}}function $1(n){if(Pe&6)throw Error(G(327));Fl();var e=Mp(n,0);if(!(e&1))return Mn(n,ft()),null;var t=qp(n,e);if(n.tag!==0&&t===2){var i=u0(n);i!==0&&(e=i,t=j0(n,i))}if(t===1)throw t=yh,Uo(n,0),As(n,e),Mn(n,ft()),t;if(t===6)throw Error(G(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Ca(n,kn,_r),Mn(n,ft()),null}function Wv(n,e){var t=Pe;Pe|=1;try{return n(e)}finally{Pe=t,Pe===0&&(Qc=ft()+500,jg&&va())}}function qo(n){ea!==null&&ea.tag===0&&!(Pe&6)&&Fl();var e=Pe;Pe|=1;var t=yi.transition,i=je;try{if(yi.transition=null,je=1,n)return n()}finally{je=i,yi.transition=t,Pe=e,!(Pe&6)&&va()}}function Xv(){Yn=Rl.current,Ke(Rl)}function Uo(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,$T(t)),vt!==null)for(t=vt.return;t!==null;){var i=t;switch(Tv(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Fp();break;case 3:Kc(),Ke(Pn),Ke(an),Ov();break;case 5:Dv(i);break;case 4:Kc();break;case 13:Ke(it);break;case 19:Ke(it);break;case 10:Lv(i.type._context);break;case 22:case 23:Xv()}t=t.return}if(Ot=n,vt=n=ca(n.current,null),Vt=Yn=e,Tt=0,yh=null,Gv=$g=Ko=0,kn=qu=null,Da!==null){for(e=0;e<Da.length;e++)if(t=Da[e],i=t.interleaved,i!==null){t.interleaved=null;var r=i.next,s=t.pending;if(s!==null){var a=s.next;s.next=r,i.next=a}t.pending=i}Da=null}return n}function nS(n,e){do{var t=vt;try{if(Pv(),Vf.current=Wp,Vp){for(var i=st.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Vp=!1}if(Yo=0,Dt=Ct=st=null,Yu=!1,ph=0,Uv.current=null,t===null||t.return===null){Tt=1,yh=e,vt=null;break}e:{var s=n,a=t.return,o=t,c=e;if(e=Vt,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=o,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=R1(a);if(p!==null){p.flags&=-257,P1(p,a,o,s,e),p.mode&1&&k1(s,u,e),e=p,c=u;var g=e.updateQueue;if(g===null){var w=new Set;w.add(c),e.updateQueue=w}else g.add(c);break e}else{if(!(e&1)){k1(s,u,e),Yv();break e}c=Error(G(426))}}else if(et&&o.mode&1){var S=R1(a);if(S!==null){!(S.flags&65536)&&(S.flags|=256),P1(S,a,o,s,e),kv(qc(c,o));break e}}s=c=qc(c,o),Tt!==4&&(Tt=2),qu===null?qu=[s]:qu.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=zx(s,c,e);x1(s,v);break e;case 1:o=c;var y=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(oa===null||!oa.has(x)))){s.flags|=65536,e&=-e,s.lanes|=e;var E=Bx(s,o,e);x1(s,E);break e}}s=s.return}while(s!==null)}sS(t)}catch(T){e=T,vt===t&&t!==null&&(vt=t=t.return);continue}break}while(!0)}function iS(){var n=Xp.current;return Xp.current=Wp,n===null?Wp:n}function Yv(){(Tt===0||Tt===3||Tt===2)&&(Tt=4),Ot===null||!(Ko&268435455)&&!($g&268435455)||As(Ot,Vt)}function qp(n,e){var t=Pe;Pe|=2;var i=iS();(Ot!==n||Vt!==e)&&(_r=null,Uo(n,e));do try{fk();break}catch(r){nS(n,r)}while(!0);if(Pv(),Pe=t,Xp.current=i,vt!==null)throw Error(G(261));return Ot=null,Vt=0,Tt}function fk(){for(;vt!==null;)rS(vt)}function pk(){for(;vt!==null&&!zC();)rS(vt)}function rS(n){var e=oS(n.alternate,n,Yn);n.memoizedProps=n.pendingProps,e===null?sS(n):vt=e,Uv.current=null}function sS(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=ok(t,e),t!==null){t.flags&=32767,vt=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Tt=6,vt=null;return}}else if(t=ak(t,e,Yn),t!==null){vt=t;return}if(e=e.sibling,e!==null){vt=e;return}vt=e=n}while(e!==null);Tt===0&&(Tt=5)}function Ca(n,e,t){var i=je,r=yi.transition;try{yi.transition=null,je=1,gk(n,e,t,i)}finally{yi.transition=r,je=i}return null}function gk(n,e,t,i){do Fl();while(ea!==null);if(Pe&6)throw Error(G(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(G(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(KC(n,s),n===Ot&&(vt=Ot=null,Vt=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Rf||(Rf=!0,lS(Lp,function(){return Fl(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=yi.transition,yi.transition=null;var a=je;je=1;var o=Pe;Pe|=4,Uv.current=null,ck(n,t),Zx(t,n),DT(m0),Np=!!g0,m0=g0=null,n.current=t,uk(t),BC(),Pe=o,je=a,yi.transition=s}else n.current=t;if(Rf&&(Rf=!1,ea=n,Kp=r),s=n.pendingLanes,s===0&&(oa=null),UC(t.stateNode),Mn(n,ft()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],i(r.value,{componentStack:r.stack,digest:r.digest});if(Yp)throw Yp=!1,n=O0,O0=null,n;return Kp&1&&n.tag!==0&&Fl(),s=n.pendingLanes,s&1?n===F0?Qu++:(Qu=0,F0=n):Qu=0,va(),null}function Fl(){if(ea!==null){var n=zA(Kp),e=yi.transition,t=je;try{if(yi.transition=null,je=16>n?16:n,ea===null)var i=!1;else{if(n=ea,ea=null,Kp=0,Pe&6)throw Error(G(331));var r=Pe;for(Pe|=4,Q=n.current;Q!==null;){var s=Q,a=s.child;if(Q.flags&16){var o=s.deletions;if(o!==null){for(var c=0;c<o.length;c++){var u=o[c];for(Q=u;Q!==null;){var h=Q;switch(h.tag){case 0:case 11:case 15:Ku(8,h,s)}var d=h.child;if(d!==null)d.return=h,Q=d;else for(;Q!==null;){h=Q;var f=h.sibling,p=h.return;if(qx(h),h===u){Q=null;break}if(f!==null){f.return=p,Q=f;break}Q=p}}}var g=s.alternate;if(g!==null){var w=g.child;if(w!==null){g.child=null;do{var S=w.sibling;w.sibling=null,w=S}while(w!==null)}}Q=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,Q=a;else e:for(;Q!==null;){if(s=Q,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ku(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,Q=v;break e}Q=s.return}}var y=n.current;for(Q=y;Q!==null;){a=Q;var x=a.child;if(a.subtreeFlags&2064&&x!==null)x.return=a,Q=x;else e:for(a=y;Q!==null;){if(o=Q,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Hg(9,o)}}catch(T){ut(o,o.return,T)}if(o===a){Q=null;break e}var E=o.sibling;if(E!==null){E.return=o.return,Q=E;break e}Q=o.return}}if(Pe=r,va(),yr&&typeof yr.onPostCommitFiberRoot=="function")try{yr.onPostCommitFiberRoot(Ng,n)}catch{}i=!0}return i}finally{je=t,yi.transition=e}}return!1}function U1(n,e,t){e=qc(t,e),e=zx(n,e,1),n=aa(n,e,1),e=pn(),n!==null&&(qd(n,1,e),Mn(n,e))}function ut(n,e,t){if(n.tag===3)U1(n,n,t);else for(;e!==null;){if(e.tag===3){U1(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(oa===null||!oa.has(i))){n=qc(t,n),n=Bx(e,n,1),e=aa(e,n,1),n=pn(),e!==null&&(qd(e,1,n),Mn(e,n));break}}e=e.return}}function mk(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=pn(),n.pingedLanes|=n.suspendedLanes&t,Ot===n&&(Vt&t)===t&&(Tt===4||Tt===3&&(Vt&130023424)===Vt&&500>ft()-Vv?Uo(n,0):Gv|=t),Mn(n,e)}function aS(n,e){e===0&&(n.mode&1?(e=wf,wf<<=1,!(wf&130023424)&&(wf=4194304)):e=1);var t=pn();n=ls(n,e),n!==null&&(qd(n,e,t),Mn(n,t))}function yk(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),aS(n,t)}function vk(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(G(314))}i!==null&&i.delete(e),aS(n,t)}var oS;oS=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Pn.current)Rn=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Rn=!1,sk(n,e,t);Rn=!!(n.flags&131072)}else Rn=!1,et&&e.flags&1048576&&hx(e,Bp,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Xf(n,e),n=e.pendingProps;var r=Wc(e,an.current);Ol(e,t),r=jv(null,e,i,n,r,t);var s=zv();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ln(i)?(s=!0,jp(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Nv(e),r.updater=Bg,e.stateNode=r,r._reactInternals=e,_0(e,i,n,t),e=k0(null,e,i,!0,s,t)):(e.tag=0,et&&s&&Cv(e),fn(null,e,r,t),e=e.child),e;case 16:i=e.elementType;e:{switch(Xf(n,e),n=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=bk(i),n=Ei(i,n),r){case 0:e=T0(null,e,i,n,t);break e;case 1:e=N1(null,e,i,n,t);break e;case 11:e=L1(null,e,i,n,t);break e;case 14:e=M1(null,e,i,Ei(i.type,n),t);break e}throw Error(G(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Ei(i,r),T0(n,e,i,r,t);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Ei(i,r),N1(n,e,i,r,t);case 3:e:{if(Gx(e),n===null)throw Error(G(387));i=e.pendingProps,s=e.memoizedState,r=s.element,yx(n,e),Up(e,i,null,t);var a=e.memoizedState;if(i=a.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=qc(Error(G(423)),e),e=I1(n,e,i,t,r);break e}else if(i!==r){r=qc(Error(G(424)),e),e=I1(n,e,i,t,r);break e}else for(Jn=sa(e.stateNode.containerInfo.firstChild),Zn=e,et=!0,Bi=null,t=gx(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Xc(),i===r){e=cs(n,e,t);break e}fn(n,e,i,t)}e=e.child}return e;case 5:return vx(e),n===null&&x0(e),i=e.type,r=e.pendingProps,s=n!==null?n.memoizedProps:null,a=r.children,y0(i,r)?a=null:s!==null&&y0(i,s)&&(e.flags|=32),Ux(n,e),fn(n,e,a,t),e.child;case 6:return n===null&&x0(e),null;case 13:return Vx(n,e,t);case 4:return Iv(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=Yc(e,null,i,t):fn(n,e,i,t),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Ei(i,r),L1(n,e,i,r,t);case 7:return fn(n,e,e.pendingProps,t),e.child;case 8:return fn(n,e,e.pendingProps.children,t),e.child;case 12:return fn(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,a=r.value,Ve(Hp,i._currentValue),i._currentValue=a,s!==null)if(Gi(s.value,a)){if(s.children===r.children&&!Pn.current){e=cs(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var c=o.firstContext;c!==null;){if(c.context===i){if(s.tag===1){c=is(-1,t&-t),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}s.lanes|=t,c=s.alternate,c!==null&&(c.lanes|=t),S0(s.return,t,e),o.lanes|=t;break}c=c.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(G(341));a.lanes|=t,o=a.alternate,o!==null&&(o.lanes|=t),S0(a,t,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}fn(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Ol(e,t),r=wi(r),i=i(r),e.flags|=1,fn(n,e,i,t),e.child;case 14:return i=e.type,r=Ei(i,e.pendingProps),r=Ei(i.type,r),M1(n,e,i,r,t);case 15:return Hx(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Ei(i,r),Xf(n,e),e.tag=1,Ln(i)?(n=!0,jp(e)):n=!1,Ol(e,t),jx(e,i,r),_0(e,i,r,t),k0(null,e,i,!0,n,t);case 19:return Wx(n,e,t);case 22:return $x(n,e,t)}throw Error(G(156,e.tag))};function lS(n,e){return DA(n,e)}function wk(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mi(n,e,t,i){return new wk(n,e,t,i)}function Kv(n){return n=n.prototype,!(!n||!n.isReactComponent)}function bk(n){if(typeof n=="function")return Kv(n)?1:0;if(n!=null){if(n=n.$$typeof,n===pv)return 11;if(n===gv)return 14}return 2}function ca(n,e){var t=n.alternate;return t===null?(t=mi(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function qf(n,e,t,i,r,s){var a=2;if(i=n,typeof n=="function")Kv(n)&&(a=1);else if(typeof n=="string")a=5;else e:switch(n){case wl:return Go(t.children,r,s,e);case fv:a=8,r|=8;break;case Km:return n=mi(12,t,e,r|2),n.elementType=Km,n.lanes=s,n;case qm:return n=mi(13,t,e,r),n.elementType=qm,n.lanes=s,n;case Qm:return n=mi(19,t,e,r),n.elementType=Qm,n.lanes=s,n;case vA:return Ug(t,r,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case mA:a=10;break e;case yA:a=9;break e;case pv:a=11;break e;case gv:a=14;break e;case vs:a=16,i=null;break e}throw Error(G(130,n==null?n:typeof n,""))}return e=mi(a,t,e,r),e.elementType=n,e.type=i,e.lanes=s,e}function Go(n,e,t,i){return n=mi(7,n,i,e),n.lanes=t,n}function Ug(n,e,t,i){return n=mi(22,n,i,e),n.elementType=vA,n.lanes=t,n.stateNode={isHidden:!1},n}function Nm(n,e,t){return n=mi(6,n,null,e),n.lanes=t,n}function Im(n,e,t){return e=mi(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function Ak(n,e,t,i,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pm(0),this.expirationTimes=pm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pm(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function qv(n,e,t,i,r,s,a,o,c){return n=new Ak(n,e,t,o,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=mi(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nv(s),n}function xk(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:vl,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function cS(n){if(!n)return da;n=n._reactInternals;e:{if(il(n)!==n||n.tag!==1)throw Error(G(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ln(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(G(171))}if(n.tag===1){var t=n.type;if(Ln(t))return cx(n,t,e)}return e}function uS(n,e,t,i,r,s,a,o,c){return n=qv(t,i,!0,n,r,s,a,o,c),n.context=cS(null),t=n.current,i=pn(),r=la(t),s=is(i,r),s.callback=e??null,aa(t,s,r),n.current.lanes=r,qd(n,r,i),Mn(n,i),n}function Gg(n,e,t,i){var r=e.current,s=pn(),a=la(r);return t=cS(t),e.context===null?e.context=t:e.pendingContext=t,e=is(s,a),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=aa(r,e,a),n!==null&&(Ui(n,r,a,s),Gf(n,r,a)),a}function Qp(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function G1(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function Qv(n,e){G1(n,e),(n=n.alternate)&&G1(n,e)}function Sk(){return null}var hS=typeof reportError=="function"?reportError:function(n){console.error(n)};function Jv(n){this._internalRoot=n}Vg.prototype.render=Jv.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(G(409));Gg(n,e,null,null)};Vg.prototype.unmount=Jv.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;qo(function(){Gg(null,n,null,null)}),e[os]=null}};function Vg(n){this._internalRoot=n}Vg.prototype.unstable_scheduleHydration=function(n){if(n){var e=$A();n={blockedOn:null,target:n,priority:e};for(var t=0;t<bs.length&&e!==0&&e<bs[t].priority;t++);bs.splice(t,0,n),t===0&&GA(n)}};function Zv(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Wg(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function V1(){}function Ek(n,e,t,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var u=Qp(a);s.call(u)}}var a=uS(e,i,n,0,null,!1,!1,"",V1);return n._reactRootContainer=a,n[os]=a.current,ch(n.nodeType===8?n.parentNode:n),qo(),a}for(;r=n.lastChild;)n.removeChild(r);if(typeof i=="function"){var o=i;i=function(){var u=Qp(c);o.call(u)}}var c=qv(n,0,!1,null,null,!1,!1,"",V1);return n._reactRootContainer=c,n[os]=c.current,ch(n.nodeType===8?n.parentNode:n),qo(function(){Gg(e,c,t,i)}),c}function Xg(n,e,t,i,r){var s=t._reactRootContainer;if(s){var a=s;if(typeof r=="function"){var o=r;r=function(){var c=Qp(a);o.call(c)}}Gg(e,a,n,r)}else a=Ek(t,e,n,r,i);return Qp(a)}BA=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Eu(e.pendingLanes);t!==0&&(vv(e,t|1),Mn(e,ft()),!(Pe&6)&&(Qc=ft()+500,va()))}break;case 13:qo(function(){var i=ls(n,1);if(i!==null){var r=pn();Ui(i,n,1,r)}}),Qv(n,1)}};wv=function(n){if(n.tag===13){var e=ls(n,134217728);if(e!==null){var t=pn();Ui(e,n,134217728,t)}Qv(n,134217728)}};HA=function(n){if(n.tag===13){var e=la(n),t=ls(n,e);if(t!==null){var i=pn();Ui(t,n,e,i)}Qv(n,e)}};$A=function(){return je};UA=function(n,e){var t=je;try{return je=n,e()}finally{je=t}};o0=function(n,e,t){switch(e){case"input":if(e0(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var r=Fg(i);if(!r)throw Error(G(90));bA(i),e0(i,r)}}}break;case"textarea":xA(n,t);break;case"select":e=t.value,e!=null&&Ml(n,!!t.multiple,e,!1)}};RA=Wv;PA=qo;var _k={usingClientEntryPoint:!1,Events:[Jd,Sl,Fg,TA,kA,Wv]},pu={findFiberByHostInstance:Ia,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ck={bundleType:pu.bundleType,version:pu.version,rendererPackageName:pu.rendererPackageName,rendererConfig:pu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ds.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=NA(n),n===null?null:n.stateNode},findFiberByHostInstance:pu.findFiberByHostInstance||Sk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pf.isDisabled&&Pf.supportsFiber)try{Ng=Pf.inject(Ck),yr=Pf}catch{}}ni.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_k;ni.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zv(e))throw Error(G(200));return xk(n,e,null,t)};ni.createRoot=function(n,e){if(!Zv(n))throw Error(G(299));var t=!1,i="",r=hS;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=qv(n,1,!1,null,null,t,!1,i,r),n[os]=e.current,ch(n.nodeType===8?n.parentNode:n),new Jv(e)};ni.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(G(188)):(n=Object.keys(n).join(","),Error(G(268,n)));return n=NA(e),n=n===null?null:n.stateNode,n};ni.flushSync=function(n){return qo(n)};ni.hydrate=function(n,e,t){if(!Wg(e))throw Error(G(200));return Xg(null,n,e,!0,t)};ni.hydrateRoot=function(n,e,t){if(!Zv(n))throw Error(G(405));var i=t!=null&&t.hydratedSources||null,r=!1,s="",a=hS;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),e=uS(e,null,n,1,t??null,r,!1,s,a),n[os]=e.current,ch(n),i)for(n=0;n<i.length;n++)t=i[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new Vg(e)};ni.render=function(n,e,t){if(!Wg(e))throw Error(G(200));return Xg(null,n,e,!1,t)};ni.unmountComponentAtNode=function(n){if(!Wg(n))throw Error(G(40));return n._reactRootContainer?(qo(function(){Xg(null,null,n,!1,function(){n._reactRootContainer=null,n[os]=null})}),!0):!1};ni.unstable_batchedUpdates=Wv;ni.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!Wg(t))throw Error(G(200));if(n==null||n._reactInternals===void 0)throw Error(G(38));return Xg(n,e,t,!1,i)};ni.version="18.3.1-next-f1338f8080-20240426";function dS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(dS)}catch(n){console.error(n)}}dS(),dA.exports=ni;var ew=dA.exports;const Tk=Zb(ew),kk=Jb({__proto__:null,default:Tk},[ew]);var fS,W1=ew;fS=W1.createRoot,W1.hydrateRoot;/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Je(){return Je=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Je.apply(this,arguments)}var yt;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(yt||(yt={}));const X1="popstate";function Rk(n){n===void 0&&(n={});function e(i,r){let{pathname:s,search:a,hash:o}=i.location;return vh("",{pathname:s,search:a,hash:o},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(i,r){return typeof r=="string"?r:ef(r)}return Lk(e,t,null,n)}function Re(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Jc(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Pk(){return Math.random().toString(36).substr(2,8)}function Y1(n,e){return{usr:n.state,key:n.key,idx:e}}function vh(n,e,t,i){return t===void 0&&(t=null),Je({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?wa(e):e,{state:t,key:e&&e.key||i||Pk()})}function ef(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function wa(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function Lk(n,e,t,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,a=r.history,o=yt.Pop,c=null,u=h();u==null&&(u=0,a.replaceState(Je({},a.state,{idx:u}),""));function h(){return(a.state||{idx:null}).idx}function d(){o=yt.Pop;let S=h(),v=S==null?null:S-u;u=S,c&&c({action:o,location:w.location,delta:v})}function f(S,v){o=yt.Push;let y=vh(w.location,S,v);u=h()+1;let x=Y1(y,u),E=w.createHref(y);try{a.pushState(x,"",E)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;r.location.assign(E)}s&&c&&c({action:o,location:w.location,delta:1})}function p(S,v){o=yt.Replace;let y=vh(w.location,S,v);u=h();let x=Y1(y,u),E=w.createHref(y);a.replaceState(x,"",E),s&&c&&c({action:o,location:w.location,delta:0})}function g(S){let v=r.location.origin!=="null"?r.location.origin:r.location.href,y=typeof S=="string"?S:ef(S);return y=y.replace(/ $/,"%20"),Re(v,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,v)}let w={get action(){return o},get location(){return n(r,a)},listen(S){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(X1,d),c=S,()=>{r.removeEventListener(X1,d),c=null}},createHref(S){return e(r,S)},createURL:g,encodeLocation(S){let v=g(S);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:p,go(S){return a.go(S)}};return w}var ze;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(ze||(ze={}));const Mk=new Set(["lazy","caseSensitive","path","id","index","children"]);function Nk(n){return n.index===!0}function Jp(n,e,t,i){return t===void 0&&(t=[]),i===void 0&&(i={}),n.map((r,s)=>{let a=[...t,String(s)],o=typeof r.id=="string"?r.id:a.join("-");if(Re(r.index!==!0||!r.children,"Cannot specify children on an index route"),Re(!i[o],'Found a route id collision on id "'+o+`".  Route id's must be globally unique within Data Router usages`),Nk(r)){let c=Je({},r,e(r),{id:o});return i[o]=c,c}else{let c=Je({},r,e(r),{id:o,children:void 0});return i[o]=c,r.children&&(c.children=Jp(r.children,e,a,i)),c}})}function Pa(n,e,t){return t===void 0&&(t="/"),Qf(n,e,t,!1)}function Qf(n,e,t,i){let r=typeof e=="string"?wa(e):e,s=tf(r.pathname||"/",t);if(s==null)return null;let a=pS(n);Dk(a);let o=null;for(let c=0;o==null&&c<a.length;++c){let u=Wk(s);o=Gk(a[c],u,i)}return o}function Ik(n,e){let{route:t,pathname:i,params:r}=n;return{id:t.id,pathname:i,params:r,data:e[t.id],handle:t.handle}}function pS(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let r=(s,a,o)=>{let c={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};c.relativePath.startsWith("/")&&(Re(c.relativePath.startsWith(i),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(i.length));let u=Vo([i,c.relativePath]),h=t.concat(c);s.children&&s.children.length>0&&(Re(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),pS(s.children,e,h,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:$k(u,s.index),routesMeta:h})};return n.forEach((s,a)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))r(s,a);else for(let c of gS(s.path))r(s,a,c)}),e}function gS(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,r=t.endsWith("?"),s=t.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let a=gS(i.join("/")),o=[];return o.push(...a.map(c=>c===""?s:[s,c].join("/"))),r&&o.push(...a),o.map(c=>n.startsWith("/")&&c===""?"/":c)}function Dk(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:Uk(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const Ok=/^:[\w-]+$/,Fk=3,jk=2,zk=1,Bk=10,Hk=-2,K1=n=>n==="*";function $k(n,e){let t=n.split("/"),i=t.length;return t.some(K1)&&(i+=Hk),e&&(i+=jk),t.filter(r=>!K1(r)).reduce((r,s)=>r+(Ok.test(s)?Fk:s===""?zk:Bk),i)}function Uk(n,e){return n.length===e.length&&n.slice(0,-1).every((i,r)=>i===e[r])?n[n.length-1]-e[e.length-1]:0}function Gk(n,e,t){t===void 0&&(t=!1);let{routesMeta:i}=n,r={},s="/",a=[];for(let o=0;o<i.length;++o){let c=i[o],u=o===i.length-1,h=s==="/"?e:e.slice(s.length)||"/",d=q1({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},h),f=c.route;if(!d&&u&&t&&!i[i.length-1].route.index&&(d=q1({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!d)return null;Object.assign(r,d.params),a.push({params:r,pathname:Vo([s,d.pathname]),pathnameBase:Qk(Vo([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=Vo([s,d.pathnameBase]))}return a}function q1(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=Vk(n.path,n.caseSensitive,n.end),r=e.match(t);if(!r)return null;let s=r[0],a=s.replace(/(.)\/+$/,"$1"),o=r.slice(1);return{params:i.reduce((u,h,d)=>{let{paramName:f,isOptional:p}=h;if(f==="*"){let w=o[d]||"";a=s.slice(0,s.length-w.length).replace(/(.)\/+$/,"$1")}const g=o[d];return p&&!g?u[f]=void 0:u[f]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:a,pattern:n}}function Vk(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Jc(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,c)=>(i.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function Wk(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Jc(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function tf(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function Xk(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:r=""}=typeof n=="string"?wa(n):n;return{pathname:t?t.startsWith("/")?t:Yk(t,e):e,search:Jk(i),hash:Zk(r)}}function Yk(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function Dm(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function mS(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Kk(n,e){let t=mS(n);return e?t.map((i,r)=>r===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function qk(n,e,t,i){i===void 0&&(i=!1);let r;typeof n=="string"?r=wa(n):(r=Je({},n),Re(!r.pathname||!r.pathname.includes("?"),Dm("?","pathname","search",r)),Re(!r.pathname||!r.pathname.includes("#"),Dm("#","pathname","hash",r)),Re(!r.search||!r.search.includes("#"),Dm("#","search","hash",r)));let s=n===""||r.pathname==="",a=s?"/":r.pathname,o;if(a==null)o=t;else{let d=e.length-1;if(!i&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),d-=1;r.pathname=f.join("/")}o=d>=0?e[d]:"/"}let c=Xk(r,o),u=a&&a!=="/"&&a.endsWith("/"),h=(s||a===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(u||h)&&(c.pathname+="/"),c}const Vo=n=>n.join("/").replace(/\/\/+/g,"/"),Qk=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Jk=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,Zk=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;class Zp{constructor(e,t,i,r){r===void 0&&(r=!1),this.status=e,this.statusText=t||"",this.internal=r,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}}function Yg(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const yS=["post","put","patch","delete"],eR=new Set(yS),tR=["get",...yS],nR=new Set(tR),iR=new Set([301,302,303,307,308]),rR=new Set([307,308]),Om={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},sR={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},gu={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},tw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,aR=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),vS="remix-router-transitions";function oR(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",i=!t;Re(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let r;if(n.mapRouteProperties)r=n.mapRouteProperties;else if(n.detectErrorBoundary){let k=n.detectErrorBoundary;r=N=>({hasErrorBoundary:k(N)})}else r=aR;let s={},a=Jp(n.routes,r,void 0,s),o,c=n.basename||"/",u=n.dataStrategy||hR,h=n.patchRoutesOnNavigation,d=Je({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},n.future),f=null,p=new Set,g=null,w=null,S=null,v=n.hydrationData!=null,y=Pa(a,n.history.location,c),x=null;if(y==null&&!h){let k=Cn(404,{pathname:n.history.location.pathname}),{matches:N,route:I}=ob(a);y=N,x={[I.id]:k}}y&&!n.hydrationData&&uf(y,a,n.history.location.pathname).active&&(y=null);let E;if(y)if(y.some(k=>k.route.lazy))E=!1;else if(!y.some(k=>k.route.loader))E=!0;else if(d.v7_partialHydration){let k=n.hydrationData?n.hydrationData.loaderData:null,N=n.hydrationData?n.hydrationData.errors:null;if(N){let I=y.findIndex(B=>N[B.route.id]!==void 0);E=y.slice(0,I+1).every(B=>!H0(B.route,k,N))}else E=y.every(I=>!H0(I.route,k,N))}else E=n.hydrationData!=null;else if(E=!1,y=[],d.v7_partialHydration){let k=uf(null,a,n.history.location.pathname);k.active&&k.matches&&(y=k.matches)}let T,_={historyAction:n.history.action,location:n.history.location,matches:y,initialized:E,navigation:Om,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||x,fetchers:new Map,blockers:new Map},R=yt.Pop,M=!1,j,z=!1,V=new Map,ue=null,pe=!1,oe=!1,Ce=[],W=new Set,X=new Map,F=0,P=-1,L=new Map,D=new Set,U=new Map,O=new Map,$=new Set,he=new Map,ie=new Map,te;function Te(){if(f=n.history.listen(k=>{let{action:N,location:I,delta:B}=k;if(te){te(),te=void 0;return}Jc(ie.size===0||B!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let J=Nw({currentLocation:_.location,nextLocation:I,historyAction:N});if(J&&B!=null){let le=new Promise(me=>{te=me});n.history.go(B*-1),cf(J,{state:"blocked",location:I,proceed(){cf(J,{state:"proceeding",proceed:void 0,reset:void 0,location:I}),le.then(()=>n.history.go(B))},reset(){let me=new Map(_.blockers);me.set(J,gu),We({blockers:me})}});return}return Aa(N,I)}),t){_R(e,V);let k=()=>CR(e,V);e.addEventListener("pagehide",k),ue=()=>e.removeEventListener("pagehide",k)}return _.initialized||Aa(yt.Pop,_.location,{initialHydration:!0}),T}function Nn(){f&&f(),ue&&ue(),p.clear(),j&&j.abort(),_.fetchers.forEach((k,N)=>lf(N)),_.blockers.forEach((k,N)=>Mw(N))}function In(k){return p.add(k),()=>p.delete(k)}function We(k,N){N===void 0&&(N={}),_=Je({},_,k);let I=[],B=[];d.v7_fetcherPersist&&_.fetchers.forEach((J,le)=>{J.state==="idle"&&($.has(le)?B.push(le):I.push(le))}),[...p].forEach(J=>J(_,{deletedFetchers:B,viewTransitionOpts:N.viewTransitionOpts,flushSync:N.flushSync===!0})),d.v7_fetcherPersist&&(I.forEach(J=>_.fetchers.delete(J)),B.forEach(J=>lf(J)))}function sl(k,N,I){var B,J;let{flushSync:le}=I===void 0?{}:I,me=_.actionData!=null&&_.navigation.formMethod!=null&&zi(_.navigation.formMethod)&&_.navigation.state==="loading"&&((B=k.state)==null?void 0:B._isRedirect)!==!0,ne;N.actionData?Object.keys(N.actionData).length>0?ne=N.actionData:ne=null:me?ne=_.actionData:ne=null;let re=N.loaderData?sb(_.loaderData,N.loaderData,N.matches||[],N.errors):_.loaderData,Z=_.blockers;Z.size>0&&(Z=new Map(Z),Z.forEach((ke,Ft)=>Z.set(Ft,gu)));let ce=M===!0||_.navigation.formMethod!=null&&zi(_.navigation.formMethod)&&((J=k.state)==null?void 0:J._isRedirect)!==!0;o&&(a=o,o=void 0),pe||R===yt.Pop||(R===yt.Push?n.history.push(k,k.state):R===yt.Replace&&n.history.replace(k,k.state));let Ee;if(R===yt.Pop){let ke=V.get(_.location.pathname);ke&&ke.has(k.pathname)?Ee={currentLocation:_.location,nextLocation:k}:V.has(k.pathname)&&(Ee={currentLocation:k,nextLocation:_.location})}else if(z){let ke=V.get(_.location.pathname);ke?ke.add(k.pathname):(ke=new Set([k.pathname]),V.set(_.location.pathname,ke)),Ee={currentLocation:_.location,nextLocation:k}}We(Je({},N,{actionData:ne,loaderData:re,historyAction:R,location:k,initialized:!0,navigation:Om,revalidation:"idle",restoreScrollPosition:Dw(k,N.matches||_.matches),preventScrollReset:ce,blockers:Z}),{viewTransitionOpts:Ee,flushSync:le===!0}),R=yt.Pop,M=!1,z=!1,pe=!1,oe=!1,Ce=[]}async function _w(k,N){if(typeof k=="number"){n.history.go(k);return}let I=B0(_.location,_.matches,c,d.v7_prependBasename,k,d.v7_relativeSplatPath,N==null?void 0:N.fromRouteId,N==null?void 0:N.relative),{path:B,submission:J,error:le}=Q1(d.v7_normalizeFormMethod,!1,I,N),me=_.location,ne=vh(_.location,B,N&&N.state);ne=Je({},ne,n.history.encodeLocation(ne));let re=N&&N.replace!=null?N.replace:void 0,Z=yt.Push;re===!0?Z=yt.Replace:re===!1||J!=null&&zi(J.formMethod)&&J.formAction===_.location.pathname+_.location.search&&(Z=yt.Replace);let ce=N&&"preventScrollReset"in N?N.preventScrollReset===!0:void 0,Ee=(N&&N.flushSync)===!0,ke=Nw({currentLocation:me,nextLocation:ne,historyAction:Z});if(ke){cf(ke,{state:"blocked",location:ne,proceed(){cf(ke,{state:"proceeding",proceed:void 0,reset:void 0,location:ne}),_w(k,N)},reset(){let Ft=new Map(_.blockers);Ft.set(ke,gu),We({blockers:Ft})}});return}return await Aa(Z,ne,{submission:J,pendingError:le,preventScrollReset:ce,replace:N&&N.replace,enableViewTransition:N&&N.viewTransition,flushSync:Ee})}function z_(){if(rm(),We({revalidation:"loading"}),_.navigation.state!=="submitting"){if(_.navigation.state==="idle"){Aa(_.historyAction,_.location,{startUninterruptedRevalidation:!0});return}Aa(R||_.historyAction,_.navigation.location,{overrideNavigation:_.navigation,enableViewTransition:z===!0})}}async function Aa(k,N,I){j&&j.abort(),j=null,R=k,pe=(I&&I.startUninterruptedRevalidation)===!0,K_(_.location,_.matches),M=(I&&I.preventScrollReset)===!0,z=(I&&I.enableViewTransition)===!0;let B=o||a,J=I&&I.overrideNavigation,le=Pa(B,N,c),me=(I&&I.flushSync)===!0,ne=uf(le,B,N.pathname);if(ne.active&&ne.matches&&(le=ne.matches),!le){let{error:Ue,notFoundMatches:Ie,route:ot}=sm(N.pathname);sl(N,{matches:Ie,loaderData:{},errors:{[ot.id]:Ue}},{flushSync:me});return}if(_.initialized&&!oe&&yR(_.location,N)&&!(I&&I.submission&&zi(I.submission.formMethod))){sl(N,{matches:le},{flushSync:me});return}j=new AbortController;let re=ul(n.history,N,j.signal,I&&I.submission),Z;if(I&&I.pendingError)Z=[La(le).route.id,{type:ze.error,error:I.pendingError}];else if(I&&I.submission&&zi(I.submission.formMethod)){let Ue=await B_(re,N,I.submission,le,ne.active,{replace:I.replace,flushSync:me});if(Ue.shortCircuited)return;if(Ue.pendingActionResult){let[Ie,ot]=Ue.pendingActionResult;if(Kn(ot)&&Yg(ot.error)&&ot.error.status===404){j=null,sl(N,{matches:Ue.matches,loaderData:{},errors:{[Ie]:ot.error}});return}}le=Ue.matches||le,Z=Ue.pendingActionResult,J=Fm(N,I.submission),me=!1,ne.active=!1,re=ul(n.history,re.url,re.signal)}let{shortCircuited:ce,matches:Ee,loaderData:ke,errors:Ft}=await H_(re,N,le,ne.active,J,I&&I.submission,I&&I.fetcherSubmission,I&&I.replace,I&&I.initialHydration===!0,me,Z);ce||(j=null,sl(N,Je({matches:Ee||le},ab(Z),{loaderData:ke,errors:Ft})))}async function B_(k,N,I,B,J,le){le===void 0&&(le={}),rm();let me=SR(N,I);if(We({navigation:me},{flushSync:le.flushSync===!0}),J){let Z=await hf(B,N.pathname,k.signal);if(Z.type==="aborted")return{shortCircuited:!0};if(Z.type==="error"){let ce=La(Z.partialMatches).route.id;return{matches:Z.partialMatches,pendingActionResult:[ce,{type:ze.error,error:Z.error}]}}else if(Z.matches)B=Z.matches;else{let{notFoundMatches:ce,error:Ee,route:ke}=sm(N.pathname);return{matches:ce,pendingActionResult:[ke.id,{type:ze.error,error:Ee}]}}}let ne,re=Cu(B,N);if(!re.route.action&&!re.route.lazy)ne={type:ze.error,error:Cn(405,{method:k.method,pathname:N.pathname,routeId:re.route.id})};else if(ne=(await iu("action",_,k,[re],B,null))[re.route.id],k.signal.aborted)return{shortCircuited:!0};if(Fa(ne)){let Z;return le&&le.replace!=null?Z=le.replace:Z=nb(ne.response.headers.get("Location"),new URL(k.url),c)===_.location.pathname+_.location.search,await xa(k,ne,!0,{submission:I,replace:Z}),{shortCircuited:!0}}if(ta(ne))throw Cn(400,{type:"defer-action"});if(Kn(ne)){let Z=La(B,re.route.id);return(le&&le.replace)!==!0&&(R=yt.Push),{matches:B,pendingActionResult:[Z.route.id,ne]}}return{matches:B,pendingActionResult:[re.route.id,ne]}}async function H_(k,N,I,B,J,le,me,ne,re,Z,ce){let Ee=J||Fm(N,le),ke=le||me||cb(Ee),Ft=!pe&&(!d.v7_partialHydration||!re);if(B){if(Ft){let lt=Cw(ce);We(Je({navigation:Ee},lt!==void 0?{actionData:lt}:{}),{flushSync:Z})}let Me=await hf(I,N.pathname,k.signal);if(Me.type==="aborted")return{shortCircuited:!0};if(Me.type==="error"){let lt=La(Me.partialMatches).route.id;return{matches:Me.partialMatches,loaderData:{},errors:{[lt]:Me.error}}}else if(Me.matches)I=Me.matches;else{let{error:lt,notFoundMatches:ol,route:au}=sm(N.pathname);return{matches:ol,loaderData:{},errors:{[au.id]:lt}}}}let Ue=o||a,[Ie,ot]=Z1(n.history,_,I,ke,N,d.v7_partialHydration&&re===!0,d.v7_skipActionErrorRevalidation,oe,Ce,W,$,U,D,Ue,c,ce);if(am(Me=>!(I&&I.some(lt=>lt.route.id===Me))||Ie&&Ie.some(lt=>lt.route.id===Me)),P=++F,Ie.length===0&&ot.length===0){let Me=Pw();return sl(N,Je({matches:I,loaderData:{},errors:ce&&Kn(ce[1])?{[ce[0]]:ce[1].error}:null},ab(ce),Me?{fetchers:new Map(_.fetchers)}:{}),{flushSync:Z}),{shortCircuited:!0}}if(Ft){let Me={};if(!B){Me.navigation=Ee;let lt=Cw(ce);lt!==void 0&&(Me.actionData=lt)}ot.length>0&&(Me.fetchers=$_(ot)),We(Me,{flushSync:Z})}ot.forEach(Me=>{ps(Me.key),Me.controller&&X.set(Me.key,Me.controller)});let al=()=>ot.forEach(Me=>ps(Me.key));j&&j.signal.addEventListener("abort",al);let{loaderResults:ru,fetcherResults:Ar}=await Tw(_,I,Ie,ot,k);if(k.signal.aborted)return{shortCircuited:!0};j&&j.signal.removeEventListener("abort",al),ot.forEach(Me=>X.delete(Me.key));let Xi=Lf(ru);if(Xi)return await xa(k,Xi.result,!0,{replace:ne}),{shortCircuited:!0};if(Xi=Lf(Ar),Xi)return D.add(Xi.key),await xa(k,Xi.result,!0,{replace:ne}),{shortCircuited:!0};let{loaderData:om,errors:su}=rb(_,I,ru,ce,ot,Ar,he);he.forEach((Me,lt)=>{Me.subscribe(ol=>{(ol||Me.done)&&he.delete(lt)})}),d.v7_partialHydration&&re&&_.errors&&(su=Je({},_.errors,su));let Sa=Pw(),df=Lw(P),ff=Sa||df||ot.length>0;return Je({matches:I,loaderData:om,errors:su},ff?{fetchers:new Map(_.fetchers)}:{})}function Cw(k){if(k&&!Kn(k[1]))return{[k[0]]:k[1].data};if(_.actionData)return Object.keys(_.actionData).length===0?null:_.actionData}function $_(k){return k.forEach(N=>{let I=_.fetchers.get(N.key),B=mu(void 0,I?I.data:void 0);_.fetchers.set(N.key,B)}),new Map(_.fetchers)}function U_(k,N,I,B){if(i)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");ps(k);let J=(B&&B.flushSync)===!0,le=o||a,me=B0(_.location,_.matches,c,d.v7_prependBasename,I,d.v7_relativeSplatPath,N,B==null?void 0:B.relative),ne=Pa(le,me,c),re=uf(ne,le,me);if(re.active&&re.matches&&(ne=re.matches),!ne){br(k,N,Cn(404,{pathname:me}),{flushSync:J});return}let{path:Z,submission:ce,error:Ee}=Q1(d.v7_normalizeFormMethod,!0,me,B);if(Ee){br(k,N,Ee,{flushSync:J});return}let ke=Cu(ne,Z),Ft=(B&&B.preventScrollReset)===!0;if(ce&&zi(ce.formMethod)){G_(k,N,Z,ke,ne,re.active,J,Ft,ce);return}U.set(k,{routeId:N,path:Z}),V_(k,N,Z,ke,ne,re.active,J,Ft,ce)}async function G_(k,N,I,B,J,le,me,ne,re){rm(),U.delete(k);function Z(gt){if(!gt.route.action&&!gt.route.lazy){let ll=Cn(405,{method:re.formMethod,pathname:I,routeId:N});return br(k,N,ll,{flushSync:me}),!0}return!1}if(!le&&Z(B))return;let ce=_.fetchers.get(k);fs(k,ER(re,ce),{flushSync:me});let Ee=new AbortController,ke=ul(n.history,I,Ee.signal,re);if(le){let gt=await hf(J,I,ke.signal);if(gt.type==="aborted")return;if(gt.type==="error"){br(k,N,gt.error,{flushSync:me});return}else if(gt.matches){if(J=gt.matches,B=Cu(J,I),Z(B))return}else{br(k,N,Cn(404,{pathname:I}),{flushSync:me});return}}X.set(k,Ee);let Ft=F,Ie=(await iu("action",_,ke,[B],J,k))[B.route.id];if(ke.signal.aborted){X.get(k)===Ee&&X.delete(k);return}if(d.v7_fetcherPersist&&$.has(k)){if(Fa(Ie)||Kn(Ie)){fs(k,ms(void 0));return}}else{if(Fa(Ie))if(X.delete(k),P>Ft){fs(k,ms(void 0));return}else return D.add(k),fs(k,mu(re)),xa(ke,Ie,!1,{fetcherSubmission:re,preventScrollReset:ne});if(Kn(Ie)){br(k,N,Ie.error);return}}if(ta(Ie))throw Cn(400,{type:"defer-action"});let ot=_.navigation.location||_.location,al=ul(n.history,ot,Ee.signal),ru=o||a,Ar=_.navigation.state!=="idle"?Pa(ru,_.navigation.location,c):_.matches;Re(Ar,"Didn't find any matches after fetcher action");let Xi=++F;L.set(k,Xi);let om=mu(re,Ie.data);_.fetchers.set(k,om);let[su,Sa]=Z1(n.history,_,Ar,re,ot,!1,d.v7_skipActionErrorRevalidation,oe,Ce,W,$,U,D,ru,c,[B.route.id,Ie]);Sa.filter(gt=>gt.key!==k).forEach(gt=>{let ll=gt.key,Ow=_.fetchers.get(ll),J_=mu(void 0,Ow?Ow.data:void 0);_.fetchers.set(ll,J_),ps(ll),gt.controller&&X.set(ll,gt.controller)}),We({fetchers:new Map(_.fetchers)});let df=()=>Sa.forEach(gt=>ps(gt.key));Ee.signal.addEventListener("abort",df);let{loaderResults:ff,fetcherResults:Me}=await Tw(_,Ar,su,Sa,al);if(Ee.signal.aborted)return;Ee.signal.removeEventListener("abort",df),L.delete(k),X.delete(k),Sa.forEach(gt=>X.delete(gt.key));let lt=Lf(ff);if(lt)return xa(al,lt.result,!1,{preventScrollReset:ne});if(lt=Lf(Me),lt)return D.add(lt.key),xa(al,lt.result,!1,{preventScrollReset:ne});let{loaderData:ol,errors:au}=rb(_,Ar,ff,void 0,Sa,Me,he);if(_.fetchers.has(k)){let gt=ms(Ie.data);_.fetchers.set(k,gt)}Lw(Xi),_.navigation.state==="loading"&&Xi>P?(Re(R,"Expected pending action"),j&&j.abort(),sl(_.navigation.location,{matches:Ar,loaderData:ol,errors:au,fetchers:new Map(_.fetchers)})):(We({errors:au,loaderData:sb(_.loaderData,ol,Ar,au),fetchers:new Map(_.fetchers)}),oe=!1)}async function V_(k,N,I,B,J,le,me,ne,re){let Z=_.fetchers.get(k);fs(k,mu(re,Z?Z.data:void 0),{flushSync:me});let ce=new AbortController,Ee=ul(n.history,I,ce.signal);if(le){let Ie=await hf(J,I,Ee.signal);if(Ie.type==="aborted")return;if(Ie.type==="error"){br(k,N,Ie.error,{flushSync:me});return}else if(Ie.matches)J=Ie.matches,B=Cu(J,I);else{br(k,N,Cn(404,{pathname:I}),{flushSync:me});return}}X.set(k,ce);let ke=F,Ue=(await iu("loader",_,Ee,[B],J,k))[B.route.id];if(ta(Ue)&&(Ue=await nw(Ue,Ee.signal,!0)||Ue),X.get(k)===ce&&X.delete(k),!Ee.signal.aborted){if($.has(k)){fs(k,ms(void 0));return}if(Fa(Ue))if(P>ke){fs(k,ms(void 0));return}else{D.add(k),await xa(Ee,Ue,!1,{preventScrollReset:ne});return}if(Kn(Ue)){br(k,N,Ue.error);return}Re(!ta(Ue),"Unhandled fetcher deferred data"),fs(k,ms(Ue.data))}}async function xa(k,N,I,B){let{submission:J,fetcherSubmission:le,preventScrollReset:me,replace:ne}=B===void 0?{}:B;N.response.headers.has("X-Remix-Revalidate")&&(oe=!0);let re=N.response.headers.get("Location");Re(re,"Expected a Location header on the redirect Response"),re=nb(re,new URL(k.url),c);let Z=vh(_.location,re,{_isRedirect:!0});if(t){let Ie=!1;if(N.response.headers.has("X-Remix-Reload-Document"))Ie=!0;else if(tw.test(re)){const ot=n.history.createURL(re);Ie=ot.origin!==e.location.origin||tf(ot.pathname,c)==null}if(Ie){ne?e.location.replace(re):e.location.assign(re);return}}j=null;let ce=ne===!0||N.response.headers.has("X-Remix-Replace")?yt.Replace:yt.Push,{formMethod:Ee,formAction:ke,formEncType:Ft}=_.navigation;!J&&!le&&Ee&&ke&&Ft&&(J=cb(_.navigation));let Ue=J||le;if(rR.has(N.response.status)&&Ue&&zi(Ue.formMethod))await Aa(ce,Z,{submission:Je({},Ue,{formAction:re}),preventScrollReset:me||M,enableViewTransition:I?z:void 0});else{let Ie=Fm(Z,J);await Aa(ce,Z,{overrideNavigation:Ie,fetcherSubmission:le,preventScrollReset:me||M,enableViewTransition:I?z:void 0})}}async function iu(k,N,I,B,J,le){let me,ne={};try{me=await dR(u,k,N,I,B,J,le,s,r)}catch(re){return B.forEach(Z=>{ne[Z.route.id]={type:ze.error,error:re}}),ne}for(let[re,Z]of Object.entries(me))if(vR(Z)){let ce=Z.result;ne[re]={type:ze.redirect,response:gR(ce,I,re,J,c,d.v7_relativeSplatPath)}}else ne[re]=await pR(Z);return ne}async function Tw(k,N,I,B,J){let le=k.matches,me=iu("loader",k,J,I,N,null),ne=Promise.all(B.map(async ce=>{if(ce.matches&&ce.match&&ce.controller){let ke=(await iu("loader",k,ul(n.history,ce.path,ce.controller.signal),[ce.match],ce.matches,ce.key))[ce.match.route.id];return{[ce.key]:ke}}else return Promise.resolve({[ce.key]:{type:ze.error,error:Cn(404,{pathname:ce.path})}})})),re=await me,Z=(await ne).reduce((ce,Ee)=>Object.assign(ce,Ee),{});return await Promise.all([AR(N,re,J.signal,le,k.loaderData),xR(N,Z,B)]),{loaderResults:re,fetcherResults:Z}}function rm(){oe=!0,Ce.push(...am()),U.forEach((k,N)=>{X.has(N)&&W.add(N),ps(N)})}function fs(k,N,I){I===void 0&&(I={}),_.fetchers.set(k,N),We({fetchers:new Map(_.fetchers)},{flushSync:(I&&I.flushSync)===!0})}function br(k,N,I,B){B===void 0&&(B={});let J=La(_.matches,N);lf(k),We({errors:{[J.route.id]:I},fetchers:new Map(_.fetchers)},{flushSync:(B&&B.flushSync)===!0})}function kw(k){return d.v7_fetcherPersist&&(O.set(k,(O.get(k)||0)+1),$.has(k)&&$.delete(k)),_.fetchers.get(k)||sR}function lf(k){let N=_.fetchers.get(k);X.has(k)&&!(N&&N.state==="loading"&&L.has(k))&&ps(k),U.delete(k),L.delete(k),D.delete(k),$.delete(k),W.delete(k),_.fetchers.delete(k)}function W_(k){if(d.v7_fetcherPersist){let N=(O.get(k)||0)-1;N<=0?(O.delete(k),$.add(k)):O.set(k,N)}else lf(k);We({fetchers:new Map(_.fetchers)})}function ps(k){let N=X.get(k);N&&(N.abort(),X.delete(k))}function Rw(k){for(let N of k){let I=kw(N),B=ms(I.data);_.fetchers.set(N,B)}}function Pw(){let k=[],N=!1;for(let I of D){let B=_.fetchers.get(I);Re(B,"Expected fetcher: "+I),B.state==="loading"&&(D.delete(I),k.push(I),N=!0)}return Rw(k),N}function Lw(k){let N=[];for(let[I,B]of L)if(B<k){let J=_.fetchers.get(I);Re(J,"Expected fetcher: "+I),J.state==="loading"&&(ps(I),L.delete(I),N.push(I))}return Rw(N),N.length>0}function X_(k,N){let I=_.blockers.get(k)||gu;return ie.get(k)!==N&&ie.set(k,N),I}function Mw(k){_.blockers.delete(k),ie.delete(k)}function cf(k,N){let I=_.blockers.get(k)||gu;Re(I.state==="unblocked"&&N.state==="blocked"||I.state==="blocked"&&N.state==="blocked"||I.state==="blocked"&&N.state==="proceeding"||I.state==="blocked"&&N.state==="unblocked"||I.state==="proceeding"&&N.state==="unblocked","Invalid blocker state transition: "+I.state+" -> "+N.state);let B=new Map(_.blockers);B.set(k,N),We({blockers:B})}function Nw(k){let{currentLocation:N,nextLocation:I,historyAction:B}=k;if(ie.size===0)return;ie.size>1&&Jc(!1,"A router only supports one blocker at a time");let J=Array.from(ie.entries()),[le,me]=J[J.length-1],ne=_.blockers.get(le);if(!(ne&&ne.state==="proceeding")&&me({currentLocation:N,nextLocation:I,historyAction:B}))return le}function sm(k){let N=Cn(404,{pathname:k}),I=o||a,{matches:B,route:J}=ob(I);return am(),{notFoundMatches:B,route:J,error:N}}function am(k){let N=[];return he.forEach((I,B)=>{(!k||k(B))&&(I.cancel(),N.push(B),he.delete(B))}),N}function Y_(k,N,I){if(g=k,S=N,w=I||null,!v&&_.navigation===Om){v=!0;let B=Dw(_.location,_.matches);B!=null&&We({restoreScrollPosition:B})}return()=>{g=null,S=null,w=null}}function Iw(k,N){return w&&w(k,N.map(B=>Ik(B,_.loaderData)))||k.key}function K_(k,N){if(g&&S){let I=Iw(k,N);g[I]=S()}}function Dw(k,N){if(g){let I=Iw(k,N),B=g[I];if(typeof B=="number")return B}return null}function uf(k,N,I){if(h)if(k){if(Object.keys(k[0].params).length>0)return{active:!0,matches:Qf(N,I,c,!0)}}else return{active:!0,matches:Qf(N,I,c,!0)||[]};return{active:!1,matches:null}}async function hf(k,N,I){if(!h)return{type:"success",matches:k};let B=k;for(;;){let J=o==null,le=o||a,me=s;try{await h({path:N,matches:B,patch:(Z,ce)=>{I.aborted||tb(Z,ce,le,me,r)}})}catch(Z){return{type:"error",error:Z,partialMatches:B}}finally{J&&!I.aborted&&(a=[...a])}if(I.aborted)return{type:"aborted"};let ne=Pa(le,N,c);if(ne)return{type:"success",matches:ne};let re=Qf(le,N,c,!0);if(!re||B.length===re.length&&B.every((Z,ce)=>Z.route.id===re[ce].route.id))return{type:"success",matches:null};B=re}}function q_(k){s={},o=Jp(k,r,void 0,s)}function Q_(k,N){let I=o==null;tb(k,N,o||a,s,r),I&&(a=[...a],We({}))}return T={get basename(){return c},get future(){return d},get state(){return _},get routes(){return a},get window(){return e},initialize:Te,subscribe:In,enableScrollRestoration:Y_,navigate:_w,fetch:U_,revalidate:z_,createHref:k=>n.history.createHref(k),encodeLocation:k=>n.history.encodeLocation(k),getFetcher:kw,deleteFetcher:W_,dispose:Nn,getBlocker:X_,deleteBlocker:Mw,patchRoutes:Q_,_internalFetchControllers:X,_internalActiveDeferreds:he,_internalSetRoutes:q_},T}function lR(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function B0(n,e,t,i,r,s,a,o){let c,u;if(a){c=[];for(let d of e)if(c.push(d),d.route.id===a){u=d;break}}else c=e,u=e[e.length-1];let h=qk(r||".",Kk(c,s),tf(n.pathname,t)||n.pathname,o==="path");if(r==null&&(h.search=n.search,h.hash=n.hash),(r==null||r===""||r===".")&&u){let d=iw(h.search);if(u.route.index&&!d)h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index";else if(!u.route.index&&d){let f=new URLSearchParams(h.search),p=f.getAll("index");f.delete("index"),p.filter(w=>w).forEach(w=>f.append("index",w));let g=f.toString();h.search=g?"?"+g:""}}return i&&t!=="/"&&(h.pathname=h.pathname==="/"?t:Vo([t,h.pathname])),ef(h)}function Q1(n,e,t,i){if(!i||!lR(i))return{path:t};if(i.formMethod&&!bR(i.formMethod))return{path:t,error:Cn(405,{method:i.formMethod})};let r=()=>({path:t,error:Cn(400,{type:"invalid-body"})}),s=i.formMethod||"get",a=n?s.toUpperCase():s.toLowerCase(),o=AS(t);if(i.body!==void 0){if(i.formEncType==="text/plain"){if(!zi(a))return r();let f=typeof i.body=="string"?i.body:i.body instanceof FormData||i.body instanceof URLSearchParams?Array.from(i.body.entries()).reduce((p,g)=>{let[w,S]=g;return""+p+w+"="+S+`
`},""):String(i.body);return{path:t,submission:{formMethod:a,formAction:o,formEncType:i.formEncType,formData:void 0,json:void 0,text:f}}}else if(i.formEncType==="application/json"){if(!zi(a))return r();try{let f=typeof i.body=="string"?JSON.parse(i.body):i.body;return{path:t,submission:{formMethod:a,formAction:o,formEncType:i.formEncType,formData:void 0,json:f,text:void 0}}}catch{return r()}}}Re(typeof FormData=="function","FormData is not available in this environment");let c,u;if(i.formData)c=$0(i.formData),u=i.formData;else if(i.body instanceof FormData)c=$0(i.body),u=i.body;else if(i.body instanceof URLSearchParams)c=i.body,u=ib(c);else if(i.body==null)c=new URLSearchParams,u=new FormData;else try{c=new URLSearchParams(i.body),u=ib(c)}catch{return r()}let h={formMethod:a,formAction:o,formEncType:i&&i.formEncType||"application/x-www-form-urlencoded",formData:u,json:void 0,text:void 0};if(zi(h.formMethod))return{path:t,submission:h};let d=wa(t);return e&&d.search&&iw(d.search)&&c.append("index",""),d.search="?"+c,{path:ef(d),submission:h}}function J1(n,e,t){t===void 0&&(t=!1);let i=n.findIndex(r=>r.route.id===e);return i>=0?n.slice(0,t?i+1:i):n}function Z1(n,e,t,i,r,s,a,o,c,u,h,d,f,p,g,w){let S=w?Kn(w[1])?w[1].error:w[1].data:void 0,v=n.createURL(e.location),y=n.createURL(r),x=t;s&&e.errors?x=J1(t,Object.keys(e.errors)[0],!0):w&&Kn(w[1])&&(x=J1(t,w[0]));let E=w?w[1].statusCode:void 0,T=a&&E&&E>=400,_=x.filter((M,j)=>{let{route:z}=M;if(z.lazy)return!0;if(z.loader==null)return!1;if(s)return H0(z,e.loaderData,e.errors);if(cR(e.loaderData,e.matches[j],M)||c.some(pe=>pe===M.route.id))return!0;let V=e.matches[j],ue=M;return eb(M,Je({currentUrl:v,currentParams:V.params,nextUrl:y,nextParams:ue.params},i,{actionResult:S,actionStatus:E,defaultShouldRevalidate:T?!1:o||v.pathname+v.search===y.pathname+y.search||v.search!==y.search||wS(V,ue)}))}),R=[];return d.forEach((M,j)=>{if(s||!t.some(oe=>oe.route.id===M.routeId)||h.has(j))return;let z=Pa(p,M.path,g);if(!z){R.push({key:j,routeId:M.routeId,path:M.path,matches:null,match:null,controller:null});return}let V=e.fetchers.get(j),ue=Cu(z,M.path),pe=!1;f.has(j)?pe=!1:u.has(j)?(u.delete(j),pe=!0):V&&V.state!=="idle"&&V.data===void 0?pe=o:pe=eb(ue,Je({currentUrl:v,currentParams:e.matches[e.matches.length-1].params,nextUrl:y,nextParams:t[t.length-1].params},i,{actionResult:S,actionStatus:E,defaultShouldRevalidate:T?!1:o})),pe&&R.push({key:j,routeId:M.routeId,path:M.path,matches:z,match:ue,controller:new AbortController})}),[_,R]}function H0(n,e,t){if(n.lazy)return!0;if(!n.loader)return!1;let i=e!=null&&e[n.id]!==void 0,r=t!=null&&t[n.id]!==void 0;return!i&&r?!1:typeof n.loader=="function"&&n.loader.hydrate===!0?!0:!i&&!r}function cR(n,e,t){let i=!e||t.route.id!==e.route.id,r=n[t.route.id]===void 0;return i||r}function wS(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function eb(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function tb(n,e,t,i,r){var s;let a;if(n){let u=i[n];Re(u,"No route found to patch children into: routeId = "+n),u.children||(u.children=[]),a=u.children}else a=t;let o=e.filter(u=>!a.some(h=>bS(u,h))),c=Jp(o,r,[n||"_","patch",String(((s=a)==null?void 0:s.length)||"0")],i);a.push(...c)}function bS(n,e){return"id"in n&&"id"in e&&n.id===e.id?!0:n.index===e.index&&n.path===e.path&&n.caseSensitive===e.caseSensitive?(!n.children||n.children.length===0)&&(!e.children||e.children.length===0)?!0:n.children.every((t,i)=>{var r;return(r=e.children)==null?void 0:r.some(s=>bS(t,s))}):!1}async function uR(n,e,t){if(!n.lazy)return;let i=await n.lazy();if(!n.lazy)return;let r=t[n.id];Re(r,"No route found in manifest");let s={};for(let a in i){let c=r[a]!==void 0&&a!=="hasErrorBoundary";Jc(!c,'Route "'+r.id+'" has a static property "'+a+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+a+'" will be ignored.')),!c&&!Mk.has(a)&&(s[a]=i[a])}Object.assign(r,s),Object.assign(r,Je({},e(r),{lazy:void 0}))}async function hR(n){let{matches:e}=n,t=e.filter(r=>r.shouldLoad);return(await Promise.all(t.map(r=>r.resolve()))).reduce((r,s,a)=>Object.assign(r,{[t[a].route.id]:s}),{})}async function dR(n,e,t,i,r,s,a,o,c,u){let h=s.map(p=>p.route.lazy?uR(p.route,c,o):void 0),d=s.map((p,g)=>{let w=h[g],S=r.some(y=>y.route.id===p.route.id);return Je({},p,{shouldLoad:S,resolve:async y=>(y&&i.method==="GET"&&(p.route.lazy||p.route.loader)&&(S=!0),S?fR(e,i,p,w,y,u):Promise.resolve({type:ze.data,result:void 0}))})}),f=await n({matches:d,request:i,params:s[0].params,fetcherKey:a,context:u});try{await Promise.all(h)}catch{}return f}async function fR(n,e,t,i,r,s){let a,o,c=u=>{let h,d=new Promise((g,w)=>h=w);o=()=>h(),e.signal.addEventListener("abort",o);let f=g=>typeof u!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+n+'" [routeId: '+t.route.id+"]"))):u({request:e,params:t.params,context:s},...g!==void 0?[g]:[]),p=(async()=>{try{return{type:"data",result:await(r?r(w=>f(w)):f())}}catch(g){return{type:"error",result:g}}})();return Promise.race([p,d])};try{let u=t.route[n];if(i)if(u){let h,[d]=await Promise.all([c(u).catch(f=>{h=f}),i]);if(h!==void 0)throw h;a=d}else if(await i,u=t.route[n],u)a=await c(u);else if(n==="action"){let h=new URL(e.url),d=h.pathname+h.search;throw Cn(405,{method:e.method,pathname:d,routeId:t.route.id})}else return{type:ze.data,result:void 0};else if(u)a=await c(u);else{let h=new URL(e.url),d=h.pathname+h.search;throw Cn(404,{pathname:d})}Re(a.result!==void 0,"You defined "+(n==="action"?"an action":"a loader")+" for route "+('"'+t.route.id+"\" but didn't return anything from your `"+n+"` ")+"function. Please return a value or `null`.")}catch(u){return{type:ze.error,result:u}}finally{o&&e.signal.removeEventListener("abort",o)}return a}async function pR(n){let{result:e,type:t}=n;if(xS(e)){let u;try{let h=e.headers.get("Content-Type");h&&/\bapplication\/json\b/.test(h)?e.body==null?u=null:u=await e.json():u=await e.text()}catch(h){return{type:ze.error,error:h}}return t===ze.error?{type:ze.error,error:new Zp(e.status,e.statusText,u),statusCode:e.status,headers:e.headers}:{type:ze.data,data:u,statusCode:e.status,headers:e.headers}}if(t===ze.error){if(lb(e)){var i;if(e.data instanceof Error){var r;return{type:ze.error,error:e.data,statusCode:(r=e.init)==null?void 0:r.status}}e=new Zp(((i=e.init)==null?void 0:i.status)||500,void 0,e.data)}return{type:ze.error,error:e,statusCode:Yg(e)?e.status:void 0}}if(wR(e)){var s,a;return{type:ze.deferred,deferredData:e,statusCode:(s=e.init)==null?void 0:s.status,headers:((a=e.init)==null?void 0:a.headers)&&new Headers(e.init.headers)}}if(lb(e)){var o,c;return{type:ze.data,data:e.data,statusCode:(o=e.init)==null?void 0:o.status,headers:(c=e.init)!=null&&c.headers?new Headers(e.init.headers):void 0}}return{type:ze.data,data:e}}function gR(n,e,t,i,r,s){let a=n.headers.get("Location");if(Re(a,"Redirects returned/thrown from loaders/actions must have a Location header"),!tw.test(a)){let o=i.slice(0,i.findIndex(c=>c.route.id===t)+1);a=B0(new URL(e.url),o,r,!0,a,s),n.headers.set("Location",a)}return n}function nb(n,e,t){if(tw.test(n)){let i=n,r=i.startsWith("//")?new URL(e.protocol+i):new URL(i),s=tf(r.pathname,t)!=null;if(r.origin===e.origin&&s)return r.pathname+r.search+r.hash}return n}function ul(n,e,t,i){let r=n.createURL(AS(e)).toString(),s={signal:t};if(i&&zi(i.formMethod)){let{formMethod:a,formEncType:o}=i;s.method=a.toUpperCase(),o==="application/json"?(s.headers=new Headers({"Content-Type":o}),s.body=JSON.stringify(i.json)):o==="text/plain"?s.body=i.text:o==="application/x-www-form-urlencoded"&&i.formData?s.body=$0(i.formData):s.body=i.formData}return new Request(r,s)}function $0(n){let e=new URLSearchParams;for(let[t,i]of n.entries())e.append(t,typeof i=="string"?i:i.name);return e}function ib(n){let e=new FormData;for(let[t,i]of n.entries())e.append(t,i);return e}function mR(n,e,t,i,r){let s={},a=null,o,c=!1,u={},h=t&&Kn(t[1])?t[1].error:void 0;return n.forEach(d=>{if(!(d.route.id in e))return;let f=d.route.id,p=e[f];if(Re(!Fa(p),"Cannot handle redirect results in processLoaderData"),Kn(p)){let g=p.error;h!==void 0&&(g=h,h=void 0),a=a||{};{let w=La(n,f);a[w.route.id]==null&&(a[w.route.id]=g)}s[f]=void 0,c||(c=!0,o=Yg(p.error)?p.error.status:500),p.headers&&(u[f]=p.headers)}else ta(p)?(i.set(f,p.deferredData),s[f]=p.deferredData.data,p.statusCode!=null&&p.statusCode!==200&&!c&&(o=p.statusCode),p.headers&&(u[f]=p.headers)):(s[f]=p.data,p.statusCode&&p.statusCode!==200&&!c&&(o=p.statusCode),p.headers&&(u[f]=p.headers))}),h!==void 0&&t&&(a={[t[0]]:h},s[t[0]]=void 0),{loaderData:s,errors:a,statusCode:o||200,loaderHeaders:u}}function rb(n,e,t,i,r,s,a){let{loaderData:o,errors:c}=mR(e,t,i,a);return r.forEach(u=>{let{key:h,match:d,controller:f}=u,p=s[h];if(Re(p,"Did not find corresponding fetcher result"),!(f&&f.signal.aborted))if(Kn(p)){let g=La(n.matches,d==null?void 0:d.route.id);c&&c[g.route.id]||(c=Je({},c,{[g.route.id]:p.error})),n.fetchers.delete(h)}else if(Fa(p))Re(!1,"Unhandled fetcher revalidation redirect");else if(ta(p))Re(!1,"Unhandled fetcher deferred data");else{let g=ms(p.data);n.fetchers.set(h,g)}}),{loaderData:o,errors:c}}function sb(n,e,t,i){let r=Je({},e);for(let s of t){let a=s.route.id;if(e.hasOwnProperty(a)?e[a]!==void 0&&(r[a]=e[a]):n[a]!==void 0&&s.route.loader&&(r[a]=n[a]),i&&i.hasOwnProperty(a))break}return r}function ab(n){return n?Kn(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function La(n,e){return(e?n.slice(0,n.findIndex(i=>i.route.id===e)+1):[...n]).reverse().find(i=>i.route.hasErrorBoundary===!0)||n[0]}function ob(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Cn(n,e){let{pathname:t,routeId:i,method:r,type:s,message:a}=e===void 0?{}:e,o="Unknown Server Error",c="Unknown @remix-run/router error";return n===400?(o="Bad Request",r&&t&&i?c="You made a "+r+' request to "'+t+'" but '+('did not provide a `loader` for route "'+i+'", ')+"so there is no way to handle the request.":s==="defer-action"?c="defer() is not supported in actions":s==="invalid-body"&&(c="Unable to encode submission body")):n===403?(o="Forbidden",c='Route "'+i+'" does not match URL "'+t+'"'):n===404?(o="Not Found",c='No route matches URL "'+t+'"'):n===405&&(o="Method Not Allowed",r&&t&&i?c="You made a "+r.toUpperCase()+' request to "'+t+'" but '+('did not provide an `action` for route "'+i+'", ')+"so there is no way to handle the request.":r&&(c='Invalid request method "'+r.toUpperCase()+'"')),new Zp(n||500,o,new Error(c),!0)}function Lf(n){let e=Object.entries(n);for(let t=e.length-1;t>=0;t--){let[i,r]=e[t];if(Fa(r))return{key:i,result:r}}}function AS(n){let e=typeof n=="string"?wa(n):n;return ef(Je({},e,{hash:""}))}function yR(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function vR(n){return xS(n.result)&&iR.has(n.result.status)}function ta(n){return n.type===ze.deferred}function Kn(n){return n.type===ze.error}function Fa(n){return(n&&n.type)===ze.redirect}function lb(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function wR(n){let e=n;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function xS(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function bR(n){return nR.has(n.toLowerCase())}function zi(n){return eR.has(n.toLowerCase())}async function AR(n,e,t,i,r){let s=Object.entries(e);for(let a=0;a<s.length;a++){let[o,c]=s[a],u=n.find(f=>(f==null?void 0:f.route.id)===o);if(!u)continue;let h=i.find(f=>f.route.id===u.route.id),d=h!=null&&!wS(h,u)&&(r&&r[u.route.id])!==void 0;ta(c)&&d&&await nw(c,t,!1).then(f=>{f&&(e[o]=f)})}}async function xR(n,e,t){for(let i=0;i<t.length;i++){let{key:r,routeId:s,controller:a}=t[i],o=e[r];n.find(u=>(u==null?void 0:u.route.id)===s)&&ta(o)&&(Re(a,"Expected an AbortController for revalidating fetcher deferred result"),await nw(o,a.signal,!0).then(u=>{u&&(e[r]=u)}))}}async function nw(n,e,t){if(t===void 0&&(t=!1),!await n.deferredData.resolveData(e)){if(t)try{return{type:ze.data,data:n.deferredData.unwrappedData}}catch(r){return{type:ze.error,error:r}}return{type:ze.data,data:n.deferredData.data}}}function iw(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function Cu(n,e){let t=typeof e=="string"?wa(e).search:e.search;if(n[n.length-1].route.index&&iw(t||""))return n[n.length-1];let i=mS(n);return i[i.length-1]}function cb(n){let{formMethod:e,formAction:t,formEncType:i,text:r,formData:s,json:a}=n;if(!(!e||!t||!i)){if(r!=null)return{formMethod:e,formAction:t,formEncType:i,formData:void 0,json:void 0,text:r};if(s!=null)return{formMethod:e,formAction:t,formEncType:i,formData:s,json:void 0,text:void 0};if(a!==void 0)return{formMethod:e,formAction:t,formEncType:i,formData:void 0,json:a,text:void 0}}}function Fm(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function SR(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function mu(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function ER(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function ms(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function _R(n,e){try{let t=n.sessionStorage.getItem(vS);if(t){let i=JSON.parse(t);for(let[r,s]of Object.entries(i||{}))s&&Array.isArray(s)&&e.set(r,new Set(s||[]))}}catch{}}function CR(n,e){if(e.size>0){let t={};for(let[i,r]of e)t[i]=[...r];try{n.sessionStorage.setItem(vS,JSON.stringify(t))}catch(i){Jc(!1,"Failed to save applied view transitions in sessionStorage ("+i+").")}}}/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function U0(){return U0=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},U0.apply(this,arguments)}const SS=H.createContext(null),ES=H.createContext(null),_S=H.createContext(null),rw=H.createContext(null),Kg=H.createContext({outlet:null,matches:[],isDataRoute:!1}),CS=H.createContext(null);function sw(){return H.useContext(rw)!=null}function TR(){return sw()||Re(!1),H.useContext(rw).location}function kR(n,e,t,i){sw()||Re(!1);let{navigator:r}=H.useContext(_S),{matches:s}=H.useContext(Kg),a=s[s.length-1],o=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=TR(),h;h=u;let d=h.pathname||"/",f=d;if(c!=="/"){let w=c.replace(/^\//,"").split("/");f="/"+d.replace(/^\//,"").split("/").slice(w.length).join("/")}let p=Pa(n,{pathname:f});return NR(p&&p.map(w=>Object.assign({},w,{params:Object.assign({},o,w.params),pathname:Vo([c,r.encodeLocation?r.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:Vo([c,r.encodeLocation?r.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),s,t,i)}function RR(){let n=FR(),e=Yg(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return H.createElement(H.Fragment,null,H.createElement("h2",null,"Unexpected Application Error!"),H.createElement("h3",{style:{fontStyle:"italic"}},e),t?H.createElement("pre",{style:r},t):null,null)}const PR=H.createElement(RR,null);class LR extends H.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?H.createElement(Kg.Provider,{value:this.props.routeContext},H.createElement(CS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function MR(n){let{routeContext:e,match:t,children:i}=n,r=H.useContext(SS);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),H.createElement(Kg.Provider,{value:e},i)}function NR(n,e,t,i){var r;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),n==null){var s;if(!t)return null;if(t.errors)n=t.matches;else if((s=i)!=null&&s.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,o=(r=t)==null?void 0:r.errors;if(o!=null){let h=a.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);h>=0||Re(!1),a=a.slice(0,Math.min(a.length,h+1))}let c=!1,u=-1;if(t&&i&&i.v7_partialHydration)for(let h=0;h<a.length;h++){let d=a[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=h),d.route.id){let{loaderData:f,errors:p}=t,g=d.route.loader&&f[d.route.id]===void 0&&(!p||p[d.route.id]===void 0);if(d.route.lazy||g){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((h,d,f)=>{let p,g=!1,w=null,S=null;t&&(p=o&&d.route.id?o[d.route.id]:void 0,w=d.route.errorElement||PR,c&&(u<0&&f===0?(jR("route-fallback"),g=!0,S=null):u===f&&(g=!0,S=d.route.hydrateFallbackElement||null)));let v=e.concat(a.slice(0,f+1)),y=()=>{let x;return p?x=w:g?x=S:d.route.Component?x=H.createElement(d.route.Component,null):d.route.element?x=d.route.element:x=h,H.createElement(MR,{match:d,routeContext:{outlet:h,matches:v,isDataRoute:t!=null},children:x})};return t&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?H.createElement(LR,{location:t.location,revalidation:t.revalidation,component:w,error:p,children:y(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):y()},null)}var G0=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(G0||{});function IR(n){let e=H.useContext(ES);return e||Re(!1),e}function DR(n){let e=H.useContext(Kg);return e||Re(!1),e}function OR(n){let e=DR(),t=e.matches[e.matches.length-1];return t.route.id||Re(!1),t.route.id}function FR(){var n;let e=H.useContext(CS),t=IR(G0.UseRouteError),i=OR(G0.UseRouteError);return e!==void 0?e:(n=t.errors)==null?void 0:n[i]}const ub={};function jR(n,e,t){ub[n]||(ub[n]=!0)}function zR(n){let{basename:e="/",children:t=null,location:i,navigationType:r=yt.Pop,navigator:s,static:a=!1,future:o}=n;sw()&&Re(!1);let c=e.replace(/^\/*/,"/"),u=H.useMemo(()=>({basename:c,navigator:s,static:a,future:U0({v7_relativeSplatPath:!1},o)}),[c,o,s,a]);typeof i=="string"&&(i=wa(i));let{pathname:h="/",search:d="",hash:f="",state:p=null,key:g="default"}=i,w=H.useMemo(()=>{let S=tf(h,c);return S==null?null:{location:{pathname:S,search:d,hash:f,state:p,key:g},navigationType:r}},[c,h,d,f,p,g,r]);return w==null?null:H.createElement(_S.Provider,{value:u},H.createElement(rw.Provider,{children:t,value:w}))}new Promise(()=>{});function BR(n){let e={hasErrorBoundary:n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&Object.assign(e,{element:H.createElement(n.Component),Component:void 0}),n.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:H.createElement(n.HydrateFallback),HydrateFallback:void 0}),n.ErrorBoundary&&Object.assign(e,{errorElement:H.createElement(n.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function eg(){return eg=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},eg.apply(this,arguments)}const HR="6";try{window.__reactRouterVersion=HR}catch{}function $R(n,e){return oR({basename:void 0,future:eg({},void 0,{v7_prependBasename:!0}),history:Rk({window:void 0}),hydrationData:UR(),routes:n,mapRouteProperties:BR,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function UR(){var n;let e=(n=window)==null?void 0:n.__staticRouterHydrationData;return e&&e.errors&&(e=eg({},e,{errors:GR(e.errors)})),e}function GR(n){if(!n)return null;let e=Object.entries(n),t={};for(let[i,r]of e)if(r&&r.__type==="RouteErrorResponse")t[i]=new Zp(r.status,r.statusText,r.data,r.internal===!0);else if(r&&r.__type==="Error"){if(r.__subType){let s=window[r.__subType];if(typeof s=="function")try{let a=new s(r.message);a.stack="",t[i]=a}catch{}}if(t[i]==null){let s=new Error(r.message);s.stack="",t[i]=s}}else t[i]=r;return t}const VR=H.createContext({isTransitioning:!1}),WR=H.createContext(new Map),XR="startTransition",hb=mC[XR],YR="flushSync",db=kk[YR];function KR(n){hb?hb(n):n()}function yu(n){db?db(n):n()}class qR{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=i=>{this.status==="pending"&&(this.status="resolved",e(i))},this.reject=i=>{this.status==="pending"&&(this.status="rejected",t(i))}})}}function QR(n){let{fallbackElement:e,router:t,future:i}=n,[r,s]=H.useState(t.state),[a,o]=H.useState(),[c,u]=H.useState({isTransitioning:!1}),[h,d]=H.useState(),[f,p]=H.useState(),[g,w]=H.useState(),S=H.useRef(new Map),{v7_startTransition:v}=i||{},y=H.useCallback(M=>{v?KR(M):M()},[v]),x=H.useCallback((M,j)=>{let{deletedFetchers:z,flushSync:V,viewTransitionOpts:ue}=j;z.forEach(oe=>S.current.delete(oe)),M.fetchers.forEach((oe,Ce)=>{oe.data!==void 0&&S.current.set(Ce,oe.data)});let pe=t.window==null||t.window.document==null||typeof t.window.document.startViewTransition!="function";if(!ue||pe){V?yu(()=>s(M)):y(()=>s(M));return}if(V){yu(()=>{f&&(h&&h.resolve(),f.skipTransition()),u({isTransitioning:!0,flushSync:!0,currentLocation:ue.currentLocation,nextLocation:ue.nextLocation})});let oe=t.window.document.startViewTransition(()=>{yu(()=>s(M))});oe.finished.finally(()=>{yu(()=>{d(void 0),p(void 0),o(void 0),u({isTransitioning:!1})})}),yu(()=>p(oe));return}f?(h&&h.resolve(),f.skipTransition(),w({state:M,currentLocation:ue.currentLocation,nextLocation:ue.nextLocation})):(o(M),u({isTransitioning:!0,flushSync:!1,currentLocation:ue.currentLocation,nextLocation:ue.nextLocation}))},[t.window,f,h,S,y]);H.useLayoutEffect(()=>t.subscribe(x),[t,x]),H.useEffect(()=>{c.isTransitioning&&!c.flushSync&&d(new qR)},[c]),H.useEffect(()=>{if(h&&a&&t.window){let M=a,j=h.promise,z=t.window.document.startViewTransition(async()=>{y(()=>s(M)),await j});z.finished.finally(()=>{d(void 0),p(void 0),o(void 0),u({isTransitioning:!1})}),p(z)}},[y,a,h,t.window]),H.useEffect(()=>{h&&a&&r.location.key===a.location.key&&h.resolve()},[h,f,r.location,a]),H.useEffect(()=>{!c.isTransitioning&&g&&(o(g.state),u({isTransitioning:!0,flushSync:!1,currentLocation:g.currentLocation,nextLocation:g.nextLocation}),w(void 0))},[c.isTransitioning,g]),H.useEffect(()=>{},[]);let E=H.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:M=>t.navigate(M),push:(M,j,z)=>t.navigate(M,{state:j,preventScrollReset:z==null?void 0:z.preventScrollReset}),replace:(M,j,z)=>t.navigate(M,{replace:!0,state:j,preventScrollReset:z==null?void 0:z.preventScrollReset})}),[t]),T=t.basename||"/",_=H.useMemo(()=>({router:t,navigator:E,static:!1,basename:T}),[t,E,T]),R=H.useMemo(()=>({v7_relativeSplatPath:t.future.v7_relativeSplatPath}),[t.future.v7_relativeSplatPath]);return H.createElement(H.Fragment,null,H.createElement(SS.Provider,{value:_},H.createElement(ES.Provider,{value:r},H.createElement(WR.Provider,{value:S.current},H.createElement(VR.Provider,{value:c},H.createElement(zR,{basename:T,location:r.location,navigationType:r.historyAction,navigator:E,future:R},r.initialized||t.future.v7_partialHydration?H.createElement(JR,{routes:t.routes,future:t.future,state:r}):e))))),null)}const JR=H.memo(ZR);function ZR(n){let{routes:e,future:t,state:i}=n;return kR(e,void 0,i,t)}var fb;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(fb||(fb={}));var pb;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(pb||(pb={}));/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var eP={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tP=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),At=(n,e)=>{const t=H.forwardRef(({color:i="currentColor",size:r=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:o="",children:c,...u},h)=>H.createElement("svg",{ref:h,...eP,width:r,height:r,stroke:i,strokeWidth:a?Number(s)*24/Number(r):s,className:["lucide",`lucide-${tP(n)}`,o].join(" "),...u},[...e.map(([d,f])=>H.createElement(d,f)),...Array.isArray(c)?c:[c]]));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nP=At("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tg=At("BrainCog",[["path",{d:"M12 5a3 3 0 1 0-5.997.142 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588 4 4 0 0 0 7.636 2.106 3.2 3.2 0 0 0 .164-.546c.028-.13.306-.13.335 0a3.2 3.2 0 0 0 .163.546 4 4 0 0 0 7.636-2.106 4 4 0 0 0 .556-6.588 4 4 0 0 0-2.526-5.77A3 3 0 1 0 12 5",key:"1kgmhc"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"m15.7 10.4-.9.4",key:"ayzo6p"}],["path",{d:"m9.2 13.2-.9.4",key:"1uzb3g"}],["path",{d:"m13.6 15.7-.4-.9",key:"11ifqf"}],["path",{d:"m10.8 9.2-.4-.9",key:"1pmk2v"}],["path",{d:"m15.7 13.5-.9-.4",key:"7ng02m"}],["path",{d:"m9.2 10.9-.9-.4",key:"1x66zd"}],["path",{d:"m10.5 15.7.4-.9",key:"3js94g"}],["path",{d:"m13.1 9.2.4-.9",key:"18n7mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TS=At("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kS=At("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gb=At("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RS=At("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iP=At("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PS=At("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mb=At("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rP=At("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sP=At("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aP=At("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oP=At("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LS=At("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lP=At("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yb=At("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ng=At("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vb=At("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MS=At("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NS=At("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),cP=({onJoinClick:n})=>{const[e,t]=uA.useState(!1);return C.jsxs("nav",{className:"fixed w-full z-50 bg-gray-900/95 backdrop-blur-sm border-b border-gray-800",children:[C.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:C.jsxs("div",{className:"flex items-center justify-between h-16",children:[C.jsx("div",{className:"flex items-center",children:C.jsx("span",{className:"text-xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:"PREP.AI"})}),C.jsx("div",{className:"hidden md:block",children:C.jsxs("div",{className:"flex items-center space-x-4",children:[C.jsx(Mf,{href:"#features",children:"Features"}),C.jsx(Mf,{href:"#demo",children:"Demo"}),C.jsx(Mf,{href:"#pricing",children:"Pricing"}),C.jsx(Mf,{href:"/ai-tool",children:C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx(vb,{className:"h-4 w-4"}),"Tool"]})}),C.jsxs("button",{onClick:n,className:"flex items-center gap-2 bg-green-500 px-4 py-2 rounded-lg hover:bg-green-600 transition-all",children:[C.jsx(ng,{className:"h-4 w-4"}),C.jsx("span",{children:"Join Group"})]})]})}),C.jsx("div",{className:"md:hidden",children:C.jsx("button",{onClick:()=>t(!e),className:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none",children:e?C.jsx(NS,{className:"h-6 w-6"}):C.jsx(sP,{className:"h-6 w-6"})})})]})}),e&&C.jsx("div",{className:"md:hidden",children:C.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3",children:[C.jsx(Nf,{href:"#features",children:"Features"}),C.jsx(Nf,{href:"#demo",children:"Demo"}),C.jsx(Nf,{href:"#pricing",children:"Pricing"}),C.jsx(Nf,{href:"/tools",children:C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx(vb,{className:"h-4 w-4"}),"Tool"]})}),C.jsx("button",{onClick:n,className:"w-full text-left px-3 py-2 text-gray-300 hover:bg-gray-700 hover:text-white rounded-md",children:"Join Group"})]})})]})},Mf=({href:n,children:e,target:t})=>C.jsx("a",{href:n,target:t,className:"text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium",children:e}),Nf=({href:n,children:e,target:t})=>C.jsx("a",{href:n,target:t,className:"block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-white hover:bg-gray-700",children:e}),uP=({isOpen:n,onClose:e})=>{if(!n)return null;const t=()=>{window.open("https://chat.whatsapp.com/H2EeBvKtjjI7Y6BzubcHTP"),e()};return C.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:C.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[C.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:e}),C.jsxs("div",{className:"relative bg-gray-800 rounded-2xl p-8 max-w-md w-full",children:[C.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:C.jsx(NS,{className:"h-6 w-6"})}),C.jsxs("div",{className:"text-center mb-8",children:[C.jsx(ng,{className:"h-12 w-12 mx-auto mb-4 text-blue-400"}),C.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Join Our Study Group"}),C.jsx("p",{className:"text-gray-400",children:"Get access to Free Demo Class and Premium Study Materials"})]}),C.jsxs("div",{className:"space-y-4",children:[C.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-lg",children:[C.jsx("h3",{className:"font-semibold mb-2",children:"Benefits of Joining:"}),C.jsxs("ul",{className:"text-gray-300 text-sm space-y-2",children:[C.jsx("li",{children:" Free Demo Class"}),C.jsx("li",{children:" Access to Premium Study Materials (Only 50)"}),C.jsx("li",{children:" Latest Update of AI Tools for Exam Preparation"})]})]}),C.jsxs("button",{onClick:t,className:"w-full bg-green-500 text-white py-3 px-4 rounded-lg font-medium flex items-center justify-center gap-3 hover:bg-green-600 transition-all",children:["Join WhatsApp Group",C.jsx(ng,{className:"h-5 w-5"})]})]}),C.jsx("div",{className:"mt-6 text-center text-sm text-gray-400",children:"By joining, you agree to our community guidelines and terms of service"})]})]})})},hP=()=>C.jsx("a",{href:"https://chat.whatsapp.com/H2EeBvKtjjI7Y6BzubcHTP",target:"_blank",rel:"noopener noreferrer",className:"fixed bottom-6 right-6 bg-green-500 hover:bg-green-600 text-white p-4 rounded-full shadow-lg transition-all hover:scale-110 z-50 flex items-center justify-center","aria-label":"Join WhatsApp Group",children:C.jsx(aP,{className:"h-6 w-6"})}),dP=()=>{const[n,e]=H.useState(()=>{const s=localStorage.getItem("timerEndTime");if(s){const a=parseInt(s),o=new Date().getTime(),c=a-o;if(c>0)return{hours:Math.floor(c/36e5),minutes:Math.floor(c%36e5/6e4),seconds:Math.floor(c%6e4/1e3)}}return{hours:0,minutes:30,seconds:0}}),[t,i]=H.useState("");H.useEffect(()=>{const s=()=>{const d=new Date().getTime()+30*60*1e3;return localStorage.setItem("timerEndTime",d.toString()),d};localStorage.getItem("timerEndTime")||s();const a=h=>{const d=new Date(h),f=d.getHours(),p=d.getMinutes(),g=f>=12?"PM":"AM",w=f%12||12,S=p.toString().padStart(2,"0");return`${w}:${S} ${g}`},o=()=>{const h=new Date().getTime(),f=parseInt(localStorage.getItem("timerEndTime")||"0")-h;if(f<=0){const p=s();i(a(p));return}e({hours:Math.floor(f/(1e3*60*60)),minutes:Math.floor(f%(1e3*60*60)/(1e3*60)),seconds:Math.floor(f%(1e3*60)/1e3)})},c=parseInt(localStorage.getItem("timerEndTime")||"0");i(a(c)),o();const u=setInterval(o,1e3);return()=>clearInterval(u)},[]);const r=({value:s,label:a})=>C.jsxs("div",{className:"flex flex-col items-center bg-gray-700/50 px-3 py-1 rounded",children:[C.jsx("span",{className:"font-mono text-xl font-bold text-purple-400",children:s.toString().padStart(2,"0")}),C.jsx("span",{className:"text-xs text-gray-400",children:a})]});return C.jsxs("div",{className:"flex flex-col items-center gap-2 bg-gray-800/50 px-6 py-3 rounded-lg",children:[C.jsxs("div",{className:"flex items-center gap-2 text-gray-300",children:[C.jsx(iP,{className:"h-5 w-5 text-purple-400"}),C.jsx("span",{children:"Offer ends in"})]}),C.jsxs("div",{className:"flex items-center gap-3",children:[C.jsx(r,{value:n.hours,label:"HRS"}),C.jsx("span",{className:"text-purple-400 font-bold",children:":"}),C.jsx(r,{value:n.minutes,label:"MIN"}),C.jsx("span",{className:"text-purple-400 font-bold",children:":"}),C.jsx(r,{value:n.seconds,label:"SEC"})]}),C.jsxs("div",{className:"text-sm text-gray-400",children:["Ends at ",t]})]})};function fP(){const[n,e]=H.useState(!1);return C.jsxs("div",{className:"min-h-screen bg-gray-900 text-gray-100",children:[C.jsx(cP,{onJoinClick:()=>e(!0)}),C.jsxs("section",{className:"relative overflow-hidden",children:[C.jsx("div",{}),C.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-20 pb-16",children:C.jsxs("div",{className:"text-center",children:[C.jsx(tg,{className:"h-16 w-16 mx-auto mb-6 text-blue-400"}),C.jsx("h1",{className:"text-4xl md:text-6xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-400 mb-6",children:"AI-Powered Exam Preparation"}),C.jsx("p",{className:"text-xl text-gray-300 max-w-2xl mx-auto mb-8",children:"Revolutionize your government exam preparation with cutting-edge AI tools and expert guidance"}),C.jsxs("button",{onClick:()=>e(!0),className:"bg-green-500 hover:bg-green-600 text-white px-8 py-3 rounded-lg font-semibold transition-all flex items-center gap-2 mx-auto",children:["Join Study Group",C.jsx(ng,{className:"h-5 w-5"})]})]})})]}),C.jsx("section",{className:"py-16 bg-gray-800/50",id:"features",children:C.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:C.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[C.jsx(jm,{icon:C.jsx(oP,{className:"h-8 w-8 text-blue-400"}),title:"Free Demo Content",description:"Get a free demo on using AI tools for exam prep"}),C.jsx(jm,{icon:C.jsx(rP,{className:"h-8 w-8 text-purple-400"}),title:"Premium Access",description:"Unlock comprehensive study materials and AI tools for 50"}),C.jsx(jm,{icon:C.jsx(nP,{className:"h-8 w-8 text-green-400"}),title:"Smart MCQ Practice",description:"Generate unlimited questions from your content with AI."})]})})}),C.jsx("section",{className:"py-16",id:"demo",children:C.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:C.jsxs("div",{className:"bg-gray-800 rounded-2xl p-8",children:[C.jsx("h2",{className:"text-3xl font-bold mb-8 text-center",children:"Join Our Free Demo"}),C.jsx("div",{className:"aspect-w-16 aspect-h-9 rounded-xl overflow-hidden",children:C.jsx("iframe",{className:"w-full h-[400px]",src:"https://www.youtube.com/embed/U8PygjYAF7A?si=JILJoImtLEnzY25t",title:"Introduction to AI-Powered Exam Preparation",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}),C.jsxs("button",{onClick:()=>e(!0),className:"bg-green-500 hover:bg-green-600 text-white px-8 py-3 rounded-lg font-semibold transition-all flex items-center gap-2 my-5",children:["Join Demo Class ",C.jsx(gb,{className:"h-5 w-5"})]})]})})}),C.jsx("section",{className:"py-16 bg-gradient-to-b from-gray-800/50 to-gray-900",id:"pricing",children:C.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[C.jsxs("div",{className:"text-center mb-12",children:[C.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Premium Content Preview"}),C.jsx("p",{className:"text-gray-400 mb-4",children:"Get a glimpse of what awaits in our premium section"}),C.jsxs("div",{className:"flex flex-col items-center gap-4",children:[C.jsxs("div",{className:"flex items-center justify-center gap-3 text-2xl",children:[C.jsx("span",{className:"text-gray-400 line-through",children:"1,500"}),C.jsx("span",{className:"text-green-400 font-bold",children:"50 only"})]}),C.jsx(dP,{})]})]}),C.jsxs("div",{className:"relative rounded-2xl overflow-hidden",children:[C.jsx("img",{src:"https://images.unsplash.com/photo-1516321318423-f06f85e504b3?auto=format&fit=crop&q=80",alt:"Premium Content",className:"w-full h-[300px] object-cover"}),C.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center",children:C.jsxs("button",{onClick:()=>e(!0),className:"bg-purple-500 hover:bg-purple-600 text-white px-8 py-3 rounded-lg font-semibold transition-all flex items-center gap-2",children:["Join Group to Access ",C.jsx(gb,{className:"h-5 w-5"})]})})]})]})}),C.jsx(uP,{isOpen:n,onClose:()=>e(!1)}),C.jsx(hP,{})]})}function jm({icon:n,title:e,description:t}){return C.jsxs("div",{className:"bg-gray-800 p-6 rounded-xl hover:bg-gray-700 transition-all",children:[C.jsx("div",{className:"mb-4",children:n}),C.jsx("h3",{className:"text-xl font-semibold mb-2",children:e}),C.jsx("p",{className:"text-gray-400",children:t})]})}const pP=()=>{const[n,e]=H.useState([]),[t,i]=H.useState(null),[r,s]=H.useState("00:00"),[a,o]=H.useState({}),c=H.useRef(null),u=H.useRef(null),h=H.useRef(0),d=()=>{u.current&&clearInterval(u.current),h.current=0,u.current=setInterval(()=>{h.current+=1;const y=Math.floor(h.current/60),x=h.current%60;s(`${String(y).padStart(2,"0")}:${String(x).padStart(2,"0")}`)},1e3)};H.useEffect(()=>()=>{u.current&&clearInterval(u.current)},[]);const f=y=>{try{const x=JSON.parse(y);e(x.questions),i(null),o({}),d()}catch{alert("Invalid JSON format. Please check your input.")}},p=(y,x)=>{o(E=>({...E,[`question${y}`]:x}))},g=()=>{u.current&&clearInterval(u.current);let y=0;n.forEach((x,E)=>{a[`question${E}`]===n[E].correct_answer&&y++}),i(y)},w=async()=>{try{const y=await navigator.clipboard.readText();c.current&&(c.current.value=y,f(y))}catch{alert("Failed to read clipboard. Please paste manually.")}},S=()=>{c.current&&(c.current.value=""),e([]),i(null),o({}),u.current&&clearInterval(u.current),s("00:00")},v=()=>{window.open("https://aistudio.google.com/app","_blank")};return C.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-gray-800 text-gray-100 p-4 md:p-8",children:C.jsxs("div",{className:"max-w-4xl mx-auto",children:[C.jsxs("div",{className:"text-center mb-8",children:[C.jsx("div",{className:"bg-blue-500/10 rounded-full w-16 h-16 md:w-20 md:h-20 mx-auto mb-4 flex items-center justify-center",children:C.jsx(tg,{className:"h-8 w-8 md:h-12 md:w-12 text-blue-400"})}),C.jsx("h1",{className:"text-2xl md:text-4xl font-bold mb-2 bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:"PrepAI Tool"}),C.jsx("p",{className:"text-sm md:text-base text-gray-400",children:"AI That Turns Your Study Material into Practice Questions!"})]}),C.jsxs("div",{className:"space-y-6",children:[C.jsxs("div",{className:"flex flex-wrap gap-2 md:gap-3 mb-4",children:[C.jsxs("button",{onClick:w,className:"flex items-center gap-1 md:gap-2 bg-blue-500 hover:bg-blue-600 text-white px-3 md:px-4 py-2 rounded-lg transition-all shadow-lg hover:shadow-blue-500/20 text-sm md:text-base",children:[C.jsx(RS,{className:"h-4 w-4"}),"Paste Questions"]}),C.jsxs("button",{onClick:S,className:"flex items-center gap-1 md:gap-2 bg-red-500 hover:bg-red-600 text-white px-3 md:px-4 py-2 rounded-lg transition-all shadow-lg hover:shadow-red-500/20 text-sm md:text-base",children:[C.jsx(LS,{className:"h-4 w-4"}),"Reset"]}),C.jsxs("button",{onClick:v,className:"flex items-center gap-1 md:gap-2 bg-green-500 hover:bg-green-600 text-white px-3 md:px-4 py-2 rounded-lg transition-all shadow-lg hover:shadow-green-500/20 text-sm md:text-base",children:[C.jsx(PS,{className:"h-4 w-4"}),"Open AI Studio"]})]}),C.jsx("textarea",{ref:c,className:"hidden",onChange:y=>f(y.target.value)}),n.length>0&&C.jsxs("div",{className:"space-y-8",children:[C.jsx("div",{className:"space-y-6",children:n.map((y,x)=>C.jsxs("div",{className:"bg-gray-800/50 p-4 md:p-6 rounded-lg shadow-lg hover:shadow-xl transition-all border border-gray-700/50",children:[C.jsxs("p",{className:"text-base md:text-lg font-semibold mb-4 text-gray-100",children:[x+1,". ",y.question]}),C.jsx("div",{className:"space-y-2 md:space-y-3",children:y.answers.map((E,T)=>{const _=a[`question${x}`]===E,R=t!==null&&E===y.correct_answer,M=t!==null&&_&&!R;return C.jsxs("label",{className:`flex items-center space-x-3 p-2 md:p-3 rounded-lg cursor-pointer transition-all text-sm md:text-base
                              ${_?"bg-blue-500/10 border border-blue-500/50":"hover:bg-gray-700/30"}
                              ${R?"bg-green-500/10 border-green-500/50":""}
                              ${M?"bg-red-500/10 border-red-500/50":""}`,children:[C.jsx("input",{type:"radio",name:`question${x}`,value:E,checked:_,onChange:()=>p(x,E),className:"form-radio h-4 w-4 text-blue-500",disabled:t!==null}),C.jsx("span",{className:`flex-1 ${R?"text-green-400":M?"text-red-400":"text-gray-300"}`,children:E}),t!==null&&(R?C.jsx(TS,{className:"h-4 w-4 text-green-400 flex-shrink-0"}):M?C.jsx(MS,{className:"h-4 w-4 text-red-400 flex-shrink-0"}):null)]},T)})}),t!==null&&C.jsx("div",{className:"mt-3 text-sm md:text-base",children:C.jsxs("p",{className:"text-green-400",children:["Ans:- ",y.correct_answer]})})]},x))}),C.jsxs("div",{className:"flex justify-between items-center",children:[C.jsxs("button",{onClick:g,className:"flex items-center gap-1 md:gap-2 bg-green-500 hover:bg-green-600 text-white px-4 md:px-6 py-2 md:py-3 rounded-lg transition-all shadow-lg hover:shadow-green-500/20 text-sm md:text-base",disabled:t!==null,children:[C.jsx(kS,{className:"h-4 w-4 md:h-5 md:w-5"}),"Submit Answers"]}),C.jsx("div",{className:"fixed bottom-4 md:bottom-6 right-4 md:right-6 bg-gray-800/90 backdrop-blur-sm text-white px-4 md:px-6 py-2 md:py-3 rounded-lg shadow-lg border border-gray-700/50",children:C.jsx("p",{className:"text-base md:text-xl font-mono text-blue-400",children:r})})]}),t!==null&&C.jsxs("div",{className:"bg-gradient-to-r from-blue-500/10 to-purple-500/10 p-6 md:p-8 rounded-lg text-center border border-blue-500/20 shadow-lg",children:[C.jsxs("p",{className:"text-xl md:text-2xl font-semibold",children:["Your Score:"," ",C.jsx("span",{className:"text-green-400 font-bold",children:t}),C.jsx("span",{className:"text-gray-400",children:" / "}),C.jsx("span",{className:"text-blue-400 font-bold",children:n.length})]}),C.jsxs("p",{className:"text-sm md:text-base text-gray-400 mt-2",children:["Time taken: ",r]})]})]})]})]})})};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wb;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT"})(wb||(wb={}));var bb;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(bb||(bb={}));var Ab;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(Ab||(Ab={}));var xb;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER"})(xb||(xb={}));var ig;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.OTHER="OTHER"})(ig||(ig={}));var Sb;(function(n){n.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",n.RETRIEVAL_QUERY="RETRIEVAL_QUERY",n.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",n.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",n.CLASSIFICATION="CLASSIFICATION",n.CLUSTERING="CLUSTERING"})(Sb||(Sb={}));/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class Eb extends wh{constructor(e,t){super(e),this.response=t}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gP="https://generativelanguage.googleapis.com",mP="v1",yP="0.2.1",vP="genai-js";var Qo;(function(n){n.GENERATE_CONTENT="generateContent",n.STREAM_GENERATE_CONTENT="streamGenerateContent",n.COUNT_TOKENS="countTokens",n.EMBED_CONTENT="embedContent",n.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Qo||(Qo={}));class nf{constructor(e,t,i,r){this.model=e,this.task=t,this.apiKey=i,this.stream=r}toString(){let e=`${gP}/${mP}/${this.model}:${this.task}`;return this.stream&&(e+="?alt=sse"),e}}function wP(){return`${vP}/${yP}`}async function rf(n,e,t){let i;try{if(i=await fetch(n.toString(),Object.assign(Object.assign({},bP(t)),{method:"POST",headers:{"Content-Type":"application/json","x-goog-api-client":wP(),"x-goog-api-key":n.apiKey},body:e})),!i.ok){let r="";try{const s=await i.json();r=s.error.message,s.error.details&&(r+=` ${JSON.stringify(s.error.details)}`)}catch{}throw new Error(`[${i.status} ${i.statusText}] ${r}`)}}catch(r){const s=new wh(`Error fetching from ${n.toString()}: ${r.message}`);throw s.stack=r.stack,s}return i}function bP(n){const e={};if((n==null?void 0:n.timeout)>=0){const t=new AbortController,i=t.signal;setTimeout(()=>t.abort(),n.timeout),e.signal=i}return e}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aw(n){return n.text=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),IS(n.candidates[0]))throw new Eb(`${rg(n)}`,n);return AP(n)}else if(n.promptFeedback)throw new Eb(`Text not available. ${rg(n)}`,n);return""},n}function AP(n){var e,t,i,r;return!((r=(i=(t=(e=n.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0?void 0:t.parts)===null||i===void 0?void 0:i[0])===null||r===void 0)&&r.text?n.candidates[0].content.parts[0].text:""}const xP=[ig.RECITATION,ig.SAFETY];function IS(n){return!!n.finishReason&&xP.includes(n.finishReason)}function rg(n){var e,t,i;let r="";if((!n.candidates||n.candidates.length===0)&&n.promptFeedback)r+="Response was blocked",!((e=n.promptFeedback)===null||e===void 0)&&e.blockReason&&(r+=` due to ${n.promptFeedback.blockReason}`),!((t=n.promptFeedback)===null||t===void 0)&&t.blockReasonMessage&&(r+=`: ${n.promptFeedback.blockReasonMessage}`);else if(!((i=n.candidates)===null||i===void 0)&&i[0]){const s=n.candidates[0];IS(s)&&(r+=`Candidate was blocked due to ${s.finishReason}`,s.finishMessage&&(r+=`: ${s.finishMessage}`))}return r}function bh(n){return this instanceof bh?(this.v=n,this):new bh(n)}function SP(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,s=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(f){i[f]&&(r[f]=function(p){return new Promise(function(g,w){s.push([f,p,g,w])>1||o(f,p)})})}function o(f,p){try{c(i[f](p))}catch(g){d(s[0][3],g)}}function c(f){f.value instanceof bh?Promise.resolve(f.value.v).then(u,h):d(s[0][2],f)}function u(f){o("next",f)}function h(f){o("throw",f)}function d(f,p){f(p),s.shift(),s.length&&o(s[0][0],s[0][1])}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _b=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function EP(n){const e=n.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),t=TP(e),[i,r]=t.tee();return{stream:CP(i),response:_P(r)}}async function _P(n){const e=[],t=n.getReader();for(;;){const{done:i,value:r}=await t.read();if(i)return aw(kP(e));e.push(r)}}function CP(n){return SP(this,arguments,function*(){const t=n.getReader();for(;;){const{value:i,done:r}=yield bh(t.read());if(r)break;yield yield bh(aw(i))}})}function TP(n){const e=n.getReader();return new ReadableStream({start(i){let r="";return s();function s(){return e.read().then(({value:a,done:o})=>{if(o){if(r.trim()){i.error(new wh("Failed to parse stream"));return}i.close();return}r+=a;let c=r.match(_b),u;for(;c;){try{u=JSON.parse(c[1])}catch{i.error(new wh(`Error parsing JSON response: "${c[1]}"`));return}i.enqueue(u),r=r.substring(c[0].length),c=r.match(_b)}return s()})}}})}function kP(n){const e=n[n.length-1],t={promptFeedback:e==null?void 0:e.promptFeedback};for(const i of n)if(i.candidates)for(const r of i.candidates){const s=r.index;if(t.candidates||(t.candidates=[]),t.candidates[s]||(t.candidates[s]={index:r.index}),t.candidates[s].citationMetadata=r.citationMetadata,t.candidates[s].finishReason=r.finishReason,t.candidates[s].finishMessage=r.finishMessage,t.candidates[s].safetyRatings=r.safetyRatings,r.content&&r.content.parts){t.candidates[s].content||(t.candidates[s].content={role:r.content.role||"user",parts:[{text:""}]});for(const a of r.content.parts)a.text&&(t.candidates[s].content.parts[0].text+=a.text)}}return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DS(n,e,t,i){const r=new nf(e,Qo.STREAM_GENERATE_CONTENT,n,!0),s=await rf(r,JSON.stringify(t),i);return EP(s)}async function OS(n,e,t,i){const r=new nf(e,Qo.GENERATE_CONTENT,n,!1),a=await(await rf(r,JSON.stringify(t),i)).json();return{response:aw(a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ju(n,e){let t=[];if(typeof n=="string")t=[{text:n}];else for(const i of n)typeof i=="string"?t.push({text:i}):t.push(i);return{role:e,parts:t}}function zm(n){return n.contents?n:{contents:[Ju(n,"user")]}}function RP(n){return typeof n=="string"||Array.isArray(n)?{content:Ju(n,"user")}:n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cb="SILENT_ERROR";class PP{constructor(e,t,i,r){this.model=t,this.params=i,this.requestOptions=r,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,i!=null&&i.history&&(this._history=i.history.map(s=>{if(!s.role)throw new Error("Missing role for history item: "+JSON.stringify(s));return Ju(s.parts,s.role)}))}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e){var t,i;await this._sendPromise;const r=Ju(e,"user"),s={safetySettings:(t=this.params)===null||t===void 0?void 0:t.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,contents:[...this._history,r]};let a;return this._sendPromise=this._sendPromise.then(()=>OS(this._apiKey,this.model,s,this.requestOptions)).then(o=>{var c;if(o.response.candidates&&o.response.candidates.length>0){this._history.push(r);const u=Object.assign({parts:[],role:"model"},(c=o.response.candidates)===null||c===void 0?void 0:c[0].content);this._history.push(u)}else{const u=rg(o.response);u&&console.warn(`sendMessage() was unsuccessful. ${u}. Inspect response object for details.`)}a=o}),await this._sendPromise,a}async sendMessageStream(e){var t,i;await this._sendPromise;const r=Ju(e,"user"),s={safetySettings:(t=this.params)===null||t===void 0?void 0:t.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,contents:[...this._history,r]},a=DS(this._apiKey,this.model,s,this.requestOptions);return this._sendPromise=this._sendPromise.then(()=>a).catch(o=>{throw new Error(Cb)}).then(o=>o.response).then(o=>{if(o.candidates&&o.candidates.length>0){this._history.push(r);const c=Object.assign({},o.candidates[0].content);c.role||(c.role="model"),this._history.push(c)}else{const c=rg(o);c&&console.warn(`sendMessageStream() was unsuccessful. ${c}. Inspect response object for details.`)}}).catch(o=>{o.message!==Cb&&console.error(o)}),a}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LP(n,e,t,i){const r=new nf(e,Qo.COUNT_TOKENS,n,!1);return(await rf(r,JSON.stringify(Object.assign(Object.assign({},t),{model:e})),i)).json()}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MP(n,e,t,i){const r=new nf(e,Qo.EMBED_CONTENT,n,!1);return(await rf(r,JSON.stringify(t),i)).json()}async function NP(n,e,t,i){const r=new nf(e,Qo.BATCH_EMBED_CONTENTS,n,!1),s=t.requests.map(o=>Object.assign(Object.assign({},o),{model:e}));return(await rf(r,JSON.stringify({requests:s}),i)).json()}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(e,t,i){this.apiKey=e,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.requestOptions=i||{}}async generateContent(e){const t=zm(e);return OS(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings},t),this.requestOptions)}async generateContentStream(e){const t=zm(e);return DS(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings},t),this.requestOptions)}startChat(e){return new PP(this.apiKey,this.model,e,this.requestOptions)}async countTokens(e){const t=zm(e);return LP(this.apiKey,this.model,t)}async embedContent(e){const t=RP(e);return MP(this.apiKey,this.model,t)}async batchEmbedContents(e){return NP(this.apiKey,this.model,e,this.requestOptions)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new wh("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new IP(this.apiKey,e,t)}}var OP={exports:{}};(function(n){var e=function(t){var i=Object.prototype,r=i.hasOwnProperty,s=Object.defineProperty||function(P,L,D){P[L]=D.value},a,o=typeof Symbol=="function"?Symbol:{},c=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function d(P,L,D){return Object.defineProperty(P,L,{value:D,enumerable:!0,configurable:!0,writable:!0}),P[L]}try{d({},"")}catch{d=function(L,D,U){return L[D]=U}}function f(P,L,D,U){var O=L&&L.prototype instanceof x?L:x,$=Object.create(O.prototype),he=new W(U||[]);return s($,"_invoke",{value:ue(P,D,he)}),$}t.wrap=f;function p(P,L,D){try{return{type:"normal",arg:P.call(L,D)}}catch(U){return{type:"throw",arg:U}}}var g="suspendedStart",w="suspendedYield",S="executing",v="completed",y={};function x(){}function E(){}function T(){}var _={};d(_,c,function(){return this});var R=Object.getPrototypeOf,M=R&&R(R(X([])));M&&M!==i&&r.call(M,c)&&(_=M);var j=T.prototype=x.prototype=Object.create(_);E.prototype=T,s(j,"constructor",{value:T,configurable:!0}),s(T,"constructor",{value:E,configurable:!0}),E.displayName=d(T,h,"GeneratorFunction");function z(P){["next","throw","return"].forEach(function(L){d(P,L,function(D){return this._invoke(L,D)})})}t.isGeneratorFunction=function(P){var L=typeof P=="function"&&P.constructor;return L?L===E||(L.displayName||L.name)==="GeneratorFunction":!1},t.mark=function(P){return Object.setPrototypeOf?Object.setPrototypeOf(P,T):(P.__proto__=T,d(P,h,"GeneratorFunction")),P.prototype=Object.create(j),P},t.awrap=function(P){return{__await:P}};function V(P,L){function D($,he,ie,te){var Te=p(P[$],P,he);if(Te.type==="throw")te(Te.arg);else{var Nn=Te.arg,In=Nn.value;return In&&typeof In=="object"&&r.call(In,"__await")?L.resolve(In.__await).then(function(We){D("next",We,ie,te)},function(We){D("throw",We,ie,te)}):L.resolve(In).then(function(We){Nn.value=We,ie(Nn)},function(We){return D("throw",We,ie,te)})}}var U;function O($,he){function ie(){return new L(function(te,Te){D($,he,te,Te)})}return U=U?U.then(ie,ie):ie()}s(this,"_invoke",{value:O})}z(V.prototype),d(V.prototype,u,function(){return this}),t.AsyncIterator=V,t.async=function(P,L,D,U,O){O===void 0&&(O=Promise);var $=new V(f(P,L,D,U),O);return t.isGeneratorFunction(L)?$:$.next().then(function(he){return he.done?he.value:$.next()})};function ue(P,L,D){var U=g;return function($,he){if(U===S)throw new Error("Generator is already running");if(U===v){if($==="throw")throw he;return F()}for(D.method=$,D.arg=he;;){var ie=D.delegate;if(ie){var te=pe(ie,D);if(te){if(te===y)continue;return te}}if(D.method==="next")D.sent=D._sent=D.arg;else if(D.method==="throw"){if(U===g)throw U=v,D.arg;D.dispatchException(D.arg)}else D.method==="return"&&D.abrupt("return",D.arg);U=S;var Te=p(P,L,D);if(Te.type==="normal"){if(U=D.done?v:w,Te.arg===y)continue;return{value:Te.arg,done:D.done}}else Te.type==="throw"&&(U=v,D.method="throw",D.arg=Te.arg)}}}function pe(P,L){var D=L.method,U=P.iterator[D];if(U===a)return L.delegate=null,D==="throw"&&P.iterator.return&&(L.method="return",L.arg=a,pe(P,L),L.method==="throw")||D!=="return"&&(L.method="throw",L.arg=new TypeError("The iterator does not provide a '"+D+"' method")),y;var O=p(U,P.iterator,L.arg);if(O.type==="throw")return L.method="throw",L.arg=O.arg,L.delegate=null,y;var $=O.arg;if(!$)return L.method="throw",L.arg=new TypeError("iterator result is not an object"),L.delegate=null,y;if($.done)L[P.resultName]=$.value,L.next=P.nextLoc,L.method!=="return"&&(L.method="next",L.arg=a);else return $;return L.delegate=null,y}z(j),d(j,h,"Generator"),d(j,c,function(){return this}),d(j,"toString",function(){return"[object Generator]"});function oe(P){var L={tryLoc:P[0]};1 in P&&(L.catchLoc=P[1]),2 in P&&(L.finallyLoc=P[2],L.afterLoc=P[3]),this.tryEntries.push(L)}function Ce(P){var L=P.completion||{};L.type="normal",delete L.arg,P.completion=L}function W(P){this.tryEntries=[{tryLoc:"root"}],P.forEach(oe,this),this.reset(!0)}t.keys=function(P){var L=Object(P),D=[];for(var U in L)D.push(U);return D.reverse(),function O(){for(;D.length;){var $=D.pop();if($ in L)return O.value=$,O.done=!1,O}return O.done=!0,O}};function X(P){if(P){var L=P[c];if(L)return L.call(P);if(typeof P.next=="function")return P;if(!isNaN(P.length)){var D=-1,U=function O(){for(;++D<P.length;)if(r.call(P,D))return O.value=P[D],O.done=!1,O;return O.value=a,O.done=!0,O};return U.next=U}}return{next:F}}t.values=X;function F(){return{value:a,done:!0}}return W.prototype={constructor:W,reset:function(P){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(Ce),!P)for(var L in this)L.charAt(0)==="t"&&r.call(this,L)&&!isNaN(+L.slice(1))&&(this[L]=a)},stop:function(){this.done=!0;var P=this.tryEntries[0],L=P.completion;if(L.type==="throw")throw L.arg;return this.rval},dispatchException:function(P){if(this.done)throw P;var L=this;function D(te,Te){return $.type="throw",$.arg=P,L.next=te,Te&&(L.method="next",L.arg=a),!!Te}for(var U=this.tryEntries.length-1;U>=0;--U){var O=this.tryEntries[U],$=O.completion;if(O.tryLoc==="root")return D("end");if(O.tryLoc<=this.prev){var he=r.call(O,"catchLoc"),ie=r.call(O,"finallyLoc");if(he&&ie){if(this.prev<O.catchLoc)return D(O.catchLoc,!0);if(this.prev<O.finallyLoc)return D(O.finallyLoc)}else if(he){if(this.prev<O.catchLoc)return D(O.catchLoc,!0)}else if(ie){if(this.prev<O.finallyLoc)return D(O.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(P,L){for(var D=this.tryEntries.length-1;D>=0;--D){var U=this.tryEntries[D];if(U.tryLoc<=this.prev&&r.call(U,"finallyLoc")&&this.prev<U.finallyLoc){var O=U;break}}O&&(P==="break"||P==="continue")&&O.tryLoc<=L&&L<=O.finallyLoc&&(O=null);var $=O?O.completion:{};return $.type=P,$.arg=L,O?(this.method="next",this.next=O.finallyLoc,y):this.complete($)},complete:function(P,L){if(P.type==="throw")throw P.arg;return P.type==="break"||P.type==="continue"?this.next=P.arg:P.type==="return"?(this.rval=this.arg=P.arg,this.method="return",this.next="end"):P.type==="normal"&&L&&(this.next=L),y},finish:function(P){for(var L=this.tryEntries.length-1;L>=0;--L){var D=this.tryEntries[L];if(D.finallyLoc===P)return this.complete(D.completion,D.afterLoc),Ce(D),y}},catch:function(P){for(var L=this.tryEntries.length-1;L>=0;--L){var D=this.tryEntries[L];if(D.tryLoc===P){var U=D.completion;if(U.type==="throw"){var O=U.arg;Ce(D)}return O}}throw new Error("illegal catch attempt")},delegateYield:function(P,L,D){return this.delegate={iterator:X(P),resultName:L,nextLoc:D},this.method==="next"&&(this.arg=a),y}},t}(n.exports);try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}})(OP);var ow=(n,e)=>`${n}-${e}-${Math.random().toString(16).slice(3,8)}`;const FP=ow;let Tb=0;var FS=({id:n,action:e,payload:t={}})=>{let i=n;return typeof i>"u"&&(i=FP("Job",Tb),Tb+=1),{id:i,action:e,payload:t}},nu={};let lw=!1;nu.logging=lw;nu.setLogging=n=>{lw=n};nu.log=(...n)=>lw?console.log.apply(void 0,n):null;const jP=FS,{log:If}=nu,zP=ow;let kb=0;var BP=()=>{const n=zP("Scheduler",kb),e={},t={};let i=[];kb+=1;const r=()=>i.length,s=()=>Object.keys(e).length,a=()=>{if(i.length!==0){const d=Object.keys(e);for(let f=0;f<d.length;f+=1)if(typeof t[d[f]]>"u"){i[0](e[d[f]]);break}}},o=(d,f)=>new Promise((p,g)=>{const w=jP({action:d,payload:f});i.push(async S=>{i.shift(),t[S.id]=w;try{p(await S[d].apply(void 0,[...f,w.id]))}catch(v){g(v)}finally{delete t[S.id],a()}}),If(`[${n}]: Add ${w.id} to JobQueue`),If(`[${n}]: JobQueue length=${i.length}`),a()});return{addWorker:d=>(e[d.id]=d,If(`[${n}]: Add ${d.id}`),If(`[${n}]: Number of workers=${s()}`),a(),d.id),addJob:async(d,...f)=>{if(s()===0)throw Error(`[${n}]: You need to have at least one worker before adding jobs`);return o(d,f)},terminate:async()=>{Object.keys(e).forEach(async d=>{await e[d].terminate()}),i=[]},getQueueLen:r,getNumWorkers:s}};function HP(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}function $P(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}var UP=$P;const GP=UP;var VP=n=>{const e={};return typeof WorkerGlobalScope<"u"?e.type="webworker":GP()?e.type="electron":typeof document=="object"?e.type="browser":typeof process=="object"&&typeof HP=="function"&&(e.type="node"),typeof n>"u"?e:e[n]};const WP=VP("type")==="browser",XP=WP?n=>new URL(n,window.location.href).href:n=>n;var YP=n=>{const e={...n};return["corePath","workerPath","langPath"].forEach(t=>{n[t]&&(e[t]=XP(e[t]))}),e},KP=n=>{const e=[],t=[],i=[],r=[],s=[];return n.blocks&&n.blocks.forEach(a=>{a.paragraphs.forEach(o=>{o.lines.forEach(c=>{c.words.forEach(u=>{u.symbols.forEach(h=>{s.push({...h,page:n,block:a,paragraph:o,line:c,word:u})}),r.push({...u,page:n,block:a,paragraph:o,line:c})}),i.push({...c,page:n,block:a,paragraph:o})}),t.push({...o,page:n,block:a})}),e.push({...a,page:n})}),{...n,blocks:e,paragraphs:t,lines:i,words:r,symbols:s}},jS={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3};const qP="tesseract.js",QP="5.1.1",JP="Pure Javascript Multilingual OCR",ZP="src/index.js",eL="src/index.d.ts",tL="dist/tesseract.min.js",nL="dist/tesseract.min.js",iL={start:"node scripts/server.js",build:"rimraf dist && webpack --config scripts/webpack.config.prod.js && rollup -c scripts/rollup.esm.mjs","profile:tesseract":"webpack-bundle-analyzer dist/tesseract-stats.json","profile:worker":"webpack-bundle-analyzer dist/worker-stats.json",prepublishOnly:"npm run build",wait:"rimraf dist && wait-on http://localhost:3000/dist/tesseract.min.js",test:"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:* test:node:all","test:node":"nyc mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js","test:browser-tpl":"mocha-headless-chrome -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:detect":"npm run test:browser-tpl -- -f ./tests/detect.test.html","test:browser:recognize":"npm run test:browser-tpl -- -f ./tests/recognize.test.html","test:browser:scheduler":"npm run test:browser-tpl -- -f ./tests/scheduler.test.html","test:browser:FS":"npm run test:browser-tpl -- -f ./tests/FS.test.html",lint:"eslint src","lint:fix":"eslint --fix src",postinstall:"opencollective-postinstall || true"},rL={"./src/worker/node/index.js":"./src/worker/browser/index.js"},sL="",aL=["jeromewu"],oL="Apache-2.0",lL={"@babel/core":"^7.21.4","@babel/eslint-parser":"^7.21.3","@babel/preset-env":"^7.21.4","@rollup/plugin-commonjs":"^24.1.0",acorn:"^8.8.2","babel-loader":"^9.1.2",buffer:"^6.0.3",cors:"^2.8.5",eslint:"^7.32.0","eslint-config-airbnb-base":"^14.2.1","eslint-plugin-import":"^2.27.5","expect.js":"^0.3.1",express:"^4.18.2",mocha:"^10.2.0","mocha-headless-chrome":"^4.0.0","npm-run-all":"^4.1.5",nyc:"^15.1.0",rimraf:"^5.0.0",rollup:"^3.20.7","wait-on":"^7.0.1",webpack:"^5.79.0","webpack-bundle-analyzer":"^4.8.0","webpack-cli":"^5.0.1","webpack-dev-middleware":"^6.0.2","rollup-plugin-sourcemaps":"^0.6.3"},cL={"bmp-js":"^0.1.0","idb-keyval":"^6.2.0","is-electron":"^2.2.2","is-url":"^1.2.4","node-fetch":"^2.6.9","opencollective-postinstall":"^2.0.3","regenerator-runtime":"^0.13.3","tesseract.js-core":"^5.1.1","wasm-feature-detect":"^1.2.11",zlibjs:"^0.3.1"},uL={"@rollup/pluginutils":"^5.0.2"},hL={type:"git",url:"https://github.com/naptha/tesseract.js.git"},dL={url:"https://github.com/naptha/tesseract.js/issues"},fL="https://github.com/naptha/tesseract.js",pL={type:"opencollective",url:"https://opencollective.com/tesseractjs"},gL={name:qP,version:QP,description:JP,main:ZP,types:eL,unpkg:tL,jsdelivr:nL,scripts:iL,browser:rL,author:sL,contributors:aL,license:oL,devDependencies:lL,dependencies:cL,overrides:uL,repository:hL,bugs:dL,homepage:fL,collective:pL};var mL={workerBlobURL:!0,logger:()=>{}};const yL=gL.version,vL=mL;var wL={...vL,workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${yL}/dist/worker.min.js`},bL=({workerPath:n,workerBlobURL:e})=>{let t;if(Blob&&URL&&e){const i=new Blob([`importScripts("${n}");`],{type:"application/javascript"});t=new Worker(URL.createObjectURL(i))}else t=new Worker(n);return t},AL=n=>{n.terminate()},xL=(n,e)=>{n.onmessage=({data:t})=>{e(t)}},SL=async(n,e)=>{n.postMessage(e)};const Bm=n=>new Promise((e,t)=>{const i=new FileReader;i.onload=()=>{e(i.result)},i.onerror=({target:{error:{code:r}}})=>{t(Error(`File could not be read! Code=${r}`))},i.readAsArrayBuffer(n)}),V0=async n=>{let e=n;if(typeof n>"u")return"undefined";if(typeof n=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(n)?e=atob(n.split(",")[1]).split("").map(t=>t.charCodeAt(0)):e=await(await fetch(n)).arrayBuffer();else if(typeof HTMLElement<"u"&&n instanceof HTMLElement)n.tagName==="IMG"&&(e=await V0(n.src)),n.tagName==="VIDEO"&&(e=await V0(n.poster)),n.tagName==="CANVAS"&&await new Promise(t=>{n.toBlob(async i=>{e=await Bm(i),t()})});else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas){const t=await n.convertToBlob();e=await Bm(t)}else(n instanceof File||n instanceof Blob)&&(e=await Bm(n));return new Uint8Array(e)};var EL=V0;const _L=wL,CL=bL,TL=AL,kL=xL,RL=SL,PL=EL;var LL={defaultOptions:_L,spawnWorker:CL,terminateWorker:TL,onMessage:kL,send:RL,loadImage:PL};const ML=YP,NL=KP,xi=FS,{log:Rb}=nu,IL=ow,Ea=jS,{defaultOptions:DL,spawnWorker:OL,terminateWorker:FL,onMessage:jL,loadImage:Pb,send:zL}=LL;let Lb=0;var zS=async(n="eng",e=Ea.LSTM_ONLY,t={},i={})=>{const r=IL("Worker",Lb),{logger:s,errorHandler:a,...o}=ML({...DL,...t}),c={},u={},h=typeof n=="string"?n.split("+"):n;let d=e,f=i;const p=[Ea.DEFAULT,Ea.LSTM_ONLY].includes(e)&&!o.legacyCore;let g,w;const S=new Promise((O,$)=>{w=O,g=$}),v=O=>{g(O.message)};let y=OL(o);y.onerror=v,Lb+=1;const x=(O,$)=>{c[O]=$},E=(O,$)=>{u[O]=$},T=({id:O,action:$,payload:he})=>new Promise((ie,te)=>{Rb(`[${r}]: Start ${O}, action=${$}`);const Te=`${$}-${O}`;x(Te,ie),E(Te,te),zL(y,{workerId:r,jobId:O,action:$,payload:he})}),_=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),R=O=>T(xi({id:O,action:"load",payload:{options:{lstmOnly:p,corePath:o.corePath,logging:o.logging}}})),M=(O,$,he)=>T(xi({id:he,action:"FS",payload:{method:"writeFile",args:[O,$]}})),j=(O,$)=>T(xi({id:$,action:"FS",payload:{method:"readFile",args:[O,{encoding:"utf8"}]}})),z=(O,$)=>T(xi({id:$,action:"FS",payload:{method:"unlink",args:[O]}})),V=(O,$,he)=>T(xi({id:he,action:"FS",payload:{method:O,args:$}})),ue=()=>console.warn("`loadLanguage` is depreciated and should be removed from code (workers now come with language pre-loaded)"),pe=(O,$)=>T(xi({id:$,action:"loadLanguage",payload:{langs:O,options:{langPath:o.langPath,dataPath:o.dataPath,cachePath:o.cachePath,cacheMethod:o.cacheMethod,gzip:o.gzip,lstmOnly:[Ea.DEFAULT,Ea.LSTM_ONLY].includes(d)&&!o.legacyLang}}})),oe=()=>console.warn("`initialize` is depreciated and should be removed from code (workers now come pre-initialized)"),Ce=(O,$,he,ie)=>T(xi({id:ie,action:"initialize",payload:{langs:O,oem:$,config:he}})),W=(O="eng",$,he,ie)=>{if(p&&[Ea.TESSERACT_ONLY,Ea.TESSERACT_LSTM_COMBINED].includes($))throw Error("Legacy model requested but code missing.");const te=$||d;d=te;const Te=he||f;f=Te;const In=(typeof O=="string"?O.split("+"):O).filter(We=>!h.includes(We));return h.push(...In),In.length>0?pe(In,ie).then(()=>Ce(O,te,Te,ie)):Ce(O,te,Te,ie)},X=(O={},$)=>T(xi({id:$,action:"setParameters",payload:{params:O}})),F=async(O,$={},he={blocks:!0,text:!0,hocr:!0,tsv:!0},ie)=>T(xi({id:ie,action:"recognize",payload:{image:await Pb(O),options:$,output:he}})),P=(O="Tesseract OCR Result",$=!1,he)=>(console.log("`getPDF` function is depreciated. `recognize` option `savePDF` should be used instead."),T(xi({id:he,action:"getPDF",payload:{title:O,textonly:$}}))),L=async(O,$)=>{if(p)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return T(xi({id:$,action:"detect",payload:{image:await Pb(O)}}))},D=async()=>(y!==null&&(FL(y),y=null),Promise.resolve());jL(y,({workerId:O,jobId:$,status:he,action:ie,data:te})=>{const Te=`${ie}-${$}`;if(he==="resolve"){Rb(`[${O}]: Complete ${$}`);let Nn=te;ie==="recognize"?Nn=NL(te):ie==="getPDF"&&(Nn=Array.from({...te,length:Object.keys(te).length})),c[Te]({jobId:$,data:Nn})}else if(he==="reject")if(u[Te](te),ie==="load"&&g(te),a)a(te);else throw Error(te);else he==="progress"&&s({...te,userJobId:$})});const U={id:r,worker:y,setResolve:x,setReject:E,load:_,writeText:M,readText:j,removeFile:z,FS:V,loadLanguage:ue,initialize:oe,reinitialize:W,setParameters:X,recognize:F,getPDF:P,detect:L,terminate:D};return R().then(()=>pe(n)).then(()=>Ce(n,e,i)).then(()=>w(U)).catch(()=>{}),S};const BS=zS,BL=async(n,e,t)=>{const i=await BS(e,1,t);return i.recognize(n).finally(async()=>{await i.terminate()})},HL=async(n,e)=>{const t=await BS("osd",0,e);return t.detect(n).finally(async()=>{await t.terminate()})};var $L={recognize:BL,detect:HL},UL={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"},GL={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"};const VL=BP,WL=zS,XL=$L,YL=UL,KL=jS,qL=GL,{setLogging:QL}=nu;var JL={languages:YL,OEM:KL,PSM:qL,createScheduler:VL,createWorker:WL,setLogging:QL,...XL},Zu={};Zu.d=(n,e)=>{for(var t in e)Zu.o(e,t)&&!Zu.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})};Zu.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var ge=globalThis.pdfjsLib={};Zu.d(ge,{AbortException:()=>fa,AnnotationEditorLayer:()=>ev,AnnotationEditorParamsType:()=>_e,AnnotationEditorType:()=>ve,AnnotationEditorUIManager:()=>Zo,AnnotationLayer:()=>XN,AnnotationMode:()=>xs,ColorPicker:()=>ug,DOMSVGFactory:()=>yw,DrawLayer:()=>iv,FeatureTest:()=>gn,GlobalWorkerOptions:()=>es,ImageKind:()=>Jf,InvalidPDFException:()=>X0,MissingPDFException:()=>Ah,OPS:()=>_i,OutputScale:()=>K0,PDFDataRangeTransport:()=>$E,PDFDateString:()=>fw,PDFWorker:()=>zl,PasswordResponses:()=>nM,PermissionFlag:()=>tM,PixelsPerInch:()=>pa,RenderingCancelledException:()=>hw,TextLayer:()=>xh,TouchManager:()=>lg,UnexpectedResponseException:()=>sg,Util:()=>ae,VerbosityLevel:()=>qg,XfaLayer:()=>GE,build:()=>TN,createValidAbsoluteUrl:()=>aM,fetchData:()=>em,getDocument:()=>vN,getFilenameFromUrl:()=>gM,getPdfFilenameFromUrl:()=>mM,getXfaPageViewport:()=>yM,isDataScheme:()=>tm,isPdfFile:()=>dw,noContextMenu:()=>Vi,normalizeUnicode:()=>dM,setLayerDimensions:()=>Jo,shadow:()=>xe,stopEvent:()=>Qn,version:()=>CN});const sn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),HS=[1,0,0,1,0,0],W0=[.001,0,0,.001,0,0],ZL=1e7,Hm=1.35,Xn={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},xs={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},eM="pdfjs_internal_editor_",ve={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},_e={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},tM={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Kt={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Jf={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},xt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},vu={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},qg={ERRORS:0,WARNINGS:1,INFOS:5},_i={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},nM={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Qg=qg.WARNINGS;function iM(n){Number.isInteger(n)&&(Qg=n)}function rM(){return Qg}function Jg(n){Qg>=qg.INFOS&&console.log(`Info: ${n}`)}function we(n){Qg>=qg.WARNINGS&&console.log(`Warning: ${n}`)}function $e(n){throw new Error(n)}function wt(n,e){n||$e(e)}function sM(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function aM(n,e=null,t=null){if(!n)return null;try{if(t&&typeof n=="string"){if(t.addDefaultProtocol&&n.startsWith("www.")){const r=n.match(/\./g);(r==null?void 0:r.length)>=2&&(n=`http://${n}`)}if(t.tryConvertEncoding)try{n=hM(n)}catch{}}const i=e?new URL(n,e):new URL(n);if(sM(i))return i}catch{}return null}function xe(n,e,t,i=!1){return Object.defineProperty(n,e,{value:t,enumerable:!i,configurable:!0,writable:!1}),t}const ba=function(){function e(t,i){this.message=t,this.name=i}return e.prototype=new Error,e.constructor=e,e}();class Mb extends ba{constructor(e,t){super(e,"PasswordException"),this.code=t}}class $m extends ba{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class X0 extends ba{constructor(e){super(e,"InvalidPDFException")}}class Ah extends ba{constructor(e){super(e,"MissingPDFException")}}class sg extends ba{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class oM extends ba{constructor(e){super(e,"FormatError")}}class fa extends ba{constructor(e){super(e,"AbortException")}}function $S(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&$e("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const i=[];for(let r=0;r<e;r+=t){const s=Math.min(r+t,e),a=n.subarray(r,s);i.push(String.fromCharCode.apply(null,a))}return i.join("")}function Zg(n){typeof n!="string"&&$e("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let i=0;i<e;++i)t[i]=n.charCodeAt(i)&255;return t}function lM(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function cw(n){const e=Object.create(null);for(const[t,i]of n)e[t]=i;return e}function cM(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function uM(){try{return new Function(""),!0}catch{return!1}}class gn{static get isLittleEndian(){return xe(this,"isLittleEndian",cM())}static get isEvalSupported(){return xe(this,"isEvalSupported",uM())}static get isOffscreenCanvasSupported(){return xe(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return xe(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?xe(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):xe(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var e,t;return xe(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const Um=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var rs,Zf,Y0;class ae{static makeHexColor(e,t,i){return`#${Um[e]}${Um[t]}${Um[i]}`}static scaleMinMax(e,t){let i;e[0]?(e[0]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[3],t[3]*=e[3]):(i=t[0],t[0]=t[1],t[1]=i,i=t[2],t[2]=t[3],t[3]=i,e[1]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const i=e[0]*t[0]+e[1]*t[2]+t[4],r=e[0]*t[1]+e[1]*t[3]+t[5];return[i,r]}static applyInverseTransform(e,t){const i=t[0]*t[3]-t[1]*t[2],r=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/i,s=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/i;return[r,s]}static getAxialAlignedBoundingBox(e,t){const i=this.applyTransform(e,t),r=this.applyTransform(e.slice(2,4),t),s=this.applyTransform([e[0],e[3]],t),a=this.applyTransform([e[2],e[1]],t);return[Math.min(i[0],r[0],s[0],a[0]),Math.min(i[1],r[1],s[1],a[1]),Math.max(i[0],r[0],s[0],a[0]),Math.max(i[1],r[1],s[1],a[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],i=e[0]*t[0]+e[1]*t[2],r=e[0]*t[1]+e[1]*t[3],s=e[2]*t[0]+e[3]*t[2],a=e[2]*t[1]+e[3]*t[3],o=(i+a)/2,c=Math.sqrt((i+a)**2-4*(i*a-s*r))/2,u=o+c||1,h=o-c||1;return[Math.sqrt(u),Math.sqrt(h)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const i=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(i>r)return null;const s=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return s>a?null:[i,s,r,a]}static bezierBoundingBox(e,t,i,r,s,a,o,c,u){return u?(u[0]=Math.min(u[0],e,o),u[1]=Math.min(u[1],t,c),u[2]=Math.max(u[2],e,o),u[3]=Math.max(u[3],t,c)):u=[Math.min(e,o),Math.min(t,c),Math.max(e,o),Math.max(t,c)],A(this,rs,Y0).call(this,e,i,s,o,t,r,a,c,3*(-e+3*(i-s)+o),6*(e-2*i+s),3*(i-e),u),A(this,rs,Y0).call(this,e,i,s,o,t,r,a,c,3*(-t+3*(r-a)+c),6*(t-2*r+a),3*(r-t),u),u}}rs=new WeakSet,Zf=function(e,t,i,r,s,a,o,c,u,h){if(u<=0||u>=1)return;const d=1-u,f=u*u,p=f*u,g=d*(d*(d*e+3*u*t)+3*f*i)+p*r,w=d*(d*(d*s+3*u*a)+3*f*o)+p*c;h[0]=Math.min(h[0],g),h[1]=Math.min(h[1],w),h[2]=Math.max(h[2],g),h[3]=Math.max(h[3],w)},Y0=function(e,t,i,r,s,a,o,c,u,h,d,f){if(Math.abs(u)<1e-12){Math.abs(h)>=1e-12&&A(this,rs,Zf).call(this,e,t,i,r,s,a,o,c,-d/h,f);return}const p=h**2-4*d*u;if(p<0)return;const g=Math.sqrt(p),w=2*u;A(this,rs,Zf).call(this,e,t,i,r,s,a,o,c,(-h+g)/w,f),A(this,rs,Zf).call(this,e,t,i,r,s,a,o,c,(-h-g)/w,f)},b(ae,rs);function hM(n){return decodeURIComponent(escape(n))}let Gm=null,Nb=null;function dM(n){return Gm||(Gm=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Nb=new Map([["","t"]])),n.replaceAll(Gm,(e,t,i)=>t?t.normalize("NFKC"):Nb.get(i))}function fM(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),$S(n)}const uw="pdfjs_internal_id_";function pM(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa($S(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...e){return new Promise(t=>{t(n(...e))})});const xr="http://www.w3.org/2000/svg",Ma=class Ma{};de(Ma,"CSS",96),de(Ma,"PDF",72),de(Ma,"PDF_TO_CSS_UNITS",Ma.CSS/Ma.PDF);let pa=Ma;async function em(n,e="text"){if(Tu(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,i)=>{const r=new XMLHttpRequest;r.open("GET",n,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(r.response);return}t(r.responseText);return}i(new Error(r.statusText))}},r.send(null)})}class sf{constructor({viewBox:e,userUnit:t,scale:i,rotation:r,offsetX:s=0,offsetY:a=0,dontFlip:o=!1}){this.viewBox=e,this.userUnit=t,this.scale=i,this.rotation=r,this.offsetX=s,this.offsetY=a,i*=t;const c=(e[2]+e[0])/2,u=(e[3]+e[1])/2;let h,d,f,p;switch(r%=360,r<0&&(r+=360),r){case 180:h=-1,d=0,f=0,p=1;break;case 90:h=0,d=1,f=1,p=0;break;case 270:h=0,d=-1,f=-1,p=0;break;case 0:h=1,d=0,f=0,p=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(f=-f,p=-p);let g,w,S,v;h===0?(g=Math.abs(u-e[1])*i+s,w=Math.abs(c-e[0])*i+a,S=(e[3]-e[1])*i,v=(e[2]-e[0])*i):(g=Math.abs(c-e[0])*i+s,w=Math.abs(u-e[1])*i+a,S=(e[2]-e[0])*i,v=(e[3]-e[1])*i),this.transform=[h*i,d*i,f*i,p*i,g-h*i*c-f*i*u,w-d*i*c-p*i*u],this.width=S,this.height=v}get rawDims(){const{userUnit:e,viewBox:t}=this,i=t.map(r=>r*e);return xe(this,"rawDims",{pageWidth:i[2]-i[0],pageHeight:i[3]-i[1],pageX:i[0],pageY:i[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:i=this.offsetX,offsetY:r=this.offsetY,dontFlip:s=!1}={}){return new sf({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:i,offsetY:r,dontFlip:s})}convertToViewportPoint(e,t){return ae.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=ae.applyTransform([e[0],e[1]],this.transform),i=ae.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],i[0],i[1]]}convertToPdfPoint(e,t){return ae.applyInverseTransform([e,t],this.transform)}}class hw extends ba{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function tm(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function dw(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function gM(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function mM(n,e="document.pdf"){if(typeof n!="string")return e;if(tm(n))return we('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,r=t.exec(n);let s=i.exec(r[1])||i.exec(r[2])||i.exec(r[3]);if(s&&(s=s[0],s.includes("%")))try{s=i.exec(decodeURIComponent(s))[0]}catch{}return s||e}class Ib{constructor(){de(this,"started",Object.create(null));de(this,"times",[])}time(e){e in this.started&&we(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||we(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:i}of this.times)t=Math.max(i.length,t);for(const{name:i,start:r,end:s}of this.times)e.push(`${i.padEnd(t)} ${s-r}ms
`);return e.join("")}}function Tu(n,e){try{const{protocol:t}=e?new URL(n,e):new URL(n);return t==="http:"||t==="https:"}catch{return!1}}function Vi(n){n.preventDefault()}function Qn(n){n.preventDefault(),n.stopPropagation()}var Eh;class fw{static toDateObject(e){if(!e||typeof e!="string")return null;l(this,Eh)||m(this,Eh,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=l(this,Eh).exec(e);if(!t)return null;const i=parseInt(t[1],10);let r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let s=parseInt(t[3],10);s=s>=1&&s<=31?s:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let o=parseInt(t[5],10);o=o>=0&&o<=59?o:0;let c=parseInt(t[6],10);c=c>=0&&c<=59?c:0;const u=t[7]||"Z";let h=parseInt(t[8],10);h=h>=0&&h<=23?h:0;let d=parseInt(t[9],10)||0;return d=d>=0&&d<=59?d:0,u==="-"?(a+=h,o+=d):u==="+"&&(a-=h,o-=d),new Date(Date.UTC(i,r,s,a,o,c))}}Eh=new WeakMap,b(fw,Eh);function yM(n,{scale:e=1,rotation:t=0}){const{width:i,height:r}=n.attributes.style,s=[0,0,parseInt(i),parseInt(r)];return new sf({viewBox:s,userUnit:1,scale:e,rotation:t})}function pw(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(we(`Not a valid color format: "${n}"`),[0,0,0])}function vM(n){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of n.keys()){e.style.color=t;const i=window.getComputedStyle(e).color;n.set(t,pw(i))}e.remove()}function Qe(n){const{a:e,b:t,c:i,d:r,e:s,f:a}=n.getTransform();return[e,t,i,r,s,a]}function Ki(n){const{a:e,b:t,c:i,d:r,e:s,f:a}=n.getTransform().invertSelf();return[e,t,i,r,s,a]}function Jo(n,e,t=!1,i=!0){if(e instanceof sf){const{pageWidth:r,pageHeight:s}=e.rawDims,{style:a}=n,o=gn.isCSSRoundSupported,c=`var(--scale-factor) * ${r}px`,u=`var(--scale-factor) * ${s}px`,h=o?`round(down, ${c}, var(--scale-round-x, 1px))`:`calc(${c})`,d=o?`round(down, ${u}, var(--scale-round-y, 1px))`:`calc(${u})`;!t||e.rotation%180===0?(a.width=h,a.height=d):(a.width=d,a.height=h)}i&&n.setAttribute("data-main-rotation",e.rotation)}class K0{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var Ss,ja,Ci,za,_h,Ch,fg,US,mn,GS,VS,ep,WS,Q0;const Cr=class Cr{constructor(e){b(this,mn);b(this,Ss,null);b(this,ja,null);b(this,Ci);b(this,za,null);b(this,_h,null);m(this,Ci,e),l(Cr,Ch)||m(Cr,Ch,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const e=m(this,Ss,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=l(this,Ci)._uiManager._signal;e.addEventListener("contextmenu",Vi,{signal:t}),e.addEventListener("pointerdown",A(Cr,fg,US),{signal:t});const i=m(this,za,document.createElement("div"));i.className="buttons",e.append(i);const r=l(this,Ci).toolbarPosition;if(r){const{style:s}=e,a=l(this,Ci)._uiManager.direction==="ltr"?1-r[0]:r[0];s.insetInlineEnd=`${100*a}%`,s.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return A(this,mn,WS).call(this),e}get div(){return l(this,Ss)}hide(){var e;l(this,Ss).classList.add("hidden"),(e=l(this,ja))==null||e.hideDropdown()}show(){var e;l(this,Ss).classList.remove("hidden"),(e=l(this,_h))==null||e.shown()}async addAltText(e){const t=await e.render();A(this,mn,ep).call(this,t),l(this,za).prepend(t,l(this,mn,Q0)),m(this,_h,e)}addColorPicker(e){m(this,ja,e);const t=e.renderButton();A(this,mn,ep).call(this,t),l(this,za).prepend(t,l(this,mn,Q0))}remove(){var e;l(this,Ss).remove(),(e=l(this,ja))==null||e.destroy(),m(this,ja,null)}};Ss=new WeakMap,ja=new WeakMap,Ci=new WeakMap,za=new WeakMap,_h=new WeakMap,Ch=new WeakMap,fg=new WeakSet,US=function(e){e.stopPropagation()},mn=new WeakSet,GS=function(e){l(this,Ci)._focusEventsAllowed=!1,Qn(e)},VS=function(e){l(this,Ci)._focusEventsAllowed=!0,Qn(e)},ep=function(e){const t=l(this,Ci)._uiManager._signal;e.addEventListener("focusin",A(this,mn,GS).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",A(this,mn,VS).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Vi,{signal:t})},WS=function(){const{editorType:e,_uiManager:t}=l(this,Ci),i=document.createElement("button");i.className="delete",i.tabIndex=0,i.setAttribute("data-l10n-id",l(Cr,Ch)[e]),A(this,mn,ep).call(this,i),i.addEventListener("click",r=>{t.delete()},{signal:t._signal}),l(this,za).append(i)},Q0=function(){const e=document.createElement("div");return e.className="divider",e},b(Cr,fg),b(Cr,Ch,null);let q0=Cr;var Th,Ba,Ha,ga,XS,YS,KS;class wM{constructor(e){b(this,ga);b(this,Th,null);b(this,Ba,null);b(this,Ha);m(this,Ha,e)}show(e,t,i){const[r,s]=A(this,ga,YS).call(this,t,i),{style:a}=l(this,Ba)||m(this,Ba,A(this,ga,XS).call(this));e.append(l(this,Ba)),a.insetInlineEnd=`${100*r}%`,a.top=`calc(${100*s}% + var(--editor-toolbar-vert-offset))`}hide(){l(this,Ba).remove()}}Th=new WeakMap,Ba=new WeakMap,Ha=new WeakMap,ga=new WeakSet,XS=function(){const e=m(this,Ba,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",Vi,{signal:l(this,Ha)._signal});const t=m(this,Th,document.createElement("div"));return t.className="buttons",e.append(t),A(this,ga,KS).call(this),e},YS=function(e,t){let i=0,r=0;for(const s of e){const a=s.y+s.height;if(a<i)continue;const o=s.x+(t?s.width:0);if(a>i){r=o,i=a;continue}t?o>r&&(r=o):o<r&&(r=o)}return[t?1-r:r,i]},KS=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const i=l(this,Ha)._signal;e.addEventListener("contextmenu",Vi,{signal:i}),e.addEventListener("click",()=>{l(this,Ha).highlightSelection("floating_button")},{signal:i}),l(this,Th).append(e)};function ag(n,e,t){for(const i of t)e.addEventListener(i,n[i].bind(n))}var pg;class bM{constructor(){b(this,pg,0)}get id(){return`${eM}${on(this,pg)._++}`}}pg=new WeakMap;var Bl,kh,Jt,Hl,tp;const ww=class ww{constructor(){b(this,Hl);b(this,Bl,fM());b(this,kh,0);b(this,Jt,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=e;const s=r.decode().then(()=>(i.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return xe(this,"_isSVGFittingCanvas",s)}async getFromFile(e){const{lastModified:t,name:i,size:r,type:s}=e;return A(this,Hl,tp).call(this,`${t}_${i}_${r}_${s}`,e)}async getFromUrl(e){return A(this,Hl,tp).call(this,e,e)}async getFromBlob(e,t){const i=await t;return A(this,Hl,tp).call(this,e,i)}async getFromId(e){l(this,Jt)||m(this,Jt,new Map);const t=l(this,Jt).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:i}=t;return delete t.blobPromise,this.getFromBlob(t.id,i)}return this.getFromUrl(t.url)}getFromCanvas(e,t){l(this,Jt)||m(this,Jt,new Map);let i=l(this,Jt).get(e);if(i!=null&&i.bitmap)return i.refCounter+=1,i;const r=new OffscreenCanvas(t.width,t.height);return r.getContext("2d").drawImage(t,0,0),i={bitmap:r.transferToImageBitmap(),id:`image_${l(this,Bl)}_${on(this,kh)._++}`,refCounter:1,isSvg:!1},l(this,Jt).set(e,i),l(this,Jt).set(i.id,i),i}getSvgUrl(e){const t=l(this,Jt).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var r;l(this,Jt)||m(this,Jt,new Map);const t=l(this,Jt).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:i}=t;if(!t.url&&!t.file){const s=new OffscreenCanvas(i.width,i.height);s.getContext("bitmaprenderer").transferFromImageBitmap(i),t.blobPromise=s.convertToBlob()}(r=i.close)==null||r.call(i),t.bitmap=null}isValidId(e){return e.startsWith(`image_${l(this,Bl)}_`)}};Bl=new WeakMap,kh=new WeakMap,Jt=new WeakMap,Hl=new WeakSet,tp=async function(e,t){l(this,Jt)||m(this,Jt,new Map);let i=l(this,Jt).get(e);if(i===null)return null;if(i!=null&&i.bitmap)return i.refCounter+=1,i;try{i||(i={bitmap:null,id:`image_${l(this,Bl)}_${on(this,kh)._++}`,refCounter:0,isSvg:!1});let r;if(typeof t=="string"?(i.url=t,r=await em(t,"blob")):t instanceof File?r=i.file=t:t instanceof Blob&&(r=t),r.type==="image/svg+xml"){const s=ww._isSVGFittingCanvas,a=new FileReader,o=new Image,c=new Promise((u,h)=>{o.onload=()=>{i.bitmap=o,i.isSvg=!0,u()},a.onload=async()=>{const d=i.svgUrl=a.result;o.src=await s?`${d}#svgView(preserveAspectRatio(none))`:d},o.onerror=a.onerror=h});a.readAsDataURL(r),await c}else i.bitmap=await createImageBitmap(r);i.refCounter=1}catch(r){we(r),i=null}return l(this,Jt).set(e,i),i&&l(this,Jt).set(i.id,i),i};let J0=ww;var ht,Es,Rh,tt;class AM{constructor(e=128){b(this,ht,[]);b(this,Es,!1);b(this,Rh);b(this,tt,-1);m(this,Rh,e)}add({cmd:e,undo:t,post:i,mustExec:r,type:s=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}){if(r&&e(),l(this,Es))return;const c={cmd:e,undo:t,post:i,type:s};if(l(this,tt)===-1){l(this,ht).length>0&&(l(this,ht).length=0),m(this,tt,0),l(this,ht).push(c);return}if(a&&l(this,ht)[l(this,tt)].type===s){o&&(c.undo=l(this,ht)[l(this,tt)].undo),l(this,ht)[l(this,tt)]=c;return}const u=l(this,tt)+1;u===l(this,Rh)?l(this,ht).splice(0,1):(m(this,tt,u),u<l(this,ht).length&&l(this,ht).splice(u)),l(this,ht).push(c)}undo(){if(l(this,tt)===-1)return;m(this,Es,!0);const{undo:e,post:t}=l(this,ht)[l(this,tt)];e(),t==null||t(),m(this,Es,!1),m(this,tt,l(this,tt)-1)}redo(){if(l(this,tt)<l(this,ht).length-1){m(this,tt,l(this,tt)+1),m(this,Es,!0);const{cmd:e,post:t}=l(this,ht)[l(this,tt)];e(),t==null||t(),m(this,Es,!1)}}hasSomethingToUndo(){return l(this,tt)!==-1}hasSomethingToRedo(){return l(this,tt)<l(this,ht).length-1}cleanType(e){if(l(this,tt)!==-1){for(let t=l(this,tt);t>=0;t--)if(l(this,ht)[t].type!==e){l(this,ht).splice(t+1,l(this,tt)-t),m(this,tt,t);return}l(this,ht).length=0,m(this,tt,-1)}}destroy(){m(this,ht,null)}}ht=new WeakMap,Es=new WeakMap,Rh=new WeakMap,tt=new WeakMap;var gg,qS;class af{constructor(e){b(this,gg);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=gn.platform;for(const[i,r,s={}]of e)for(const a of i){const o=a.startsWith("mac+");t&&o?(this.callbacks.set(a.slice(4),{callback:r,options:s}),this.allKeys.add(a.split("+").at(-1))):!t&&!o&&(this.callbacks.set(a,{callback:r,options:s}),this.allKeys.add(a.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const i=this.callbacks.get(A(this,gg,qS).call(this,t));if(!i)return;const{callback:r,options:{bubbles:s=!1,args:a=[],checker:o=null}}=i;o&&!o(e,t)||(r.bind(e,...a,t)(),s||Qn(t))}}gg=new WeakSet,qS=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const mg=class mg{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return vM(e),xe(this,"_colors",e)}convert(e){const t=pw(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[i,r]of this._colors)if(r.every((s,a)=>s===t[a]))return mg._colorsMapping.get(i);return t}getHexCode(e){const t=this._colors.get(e);return t?ae.makeHexColor(...t):e}};de(mg,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Z0=mg;var $l,Dn,Et,jt,Ul,Rr,Gl,si,_s,$a,Vl,Ua,Zi,Ti,Ga,Ph,Lh,Wl,Mh,er,Cs,Xl,Ts,tr,yg,ks,Nh,Rs,Va,Ih,Dh,Rt,Oe,Pr,Wa,Oh,Fh,Ps,nr,Lr,jh,ai,Y,np,ey,QS,JS,ip,ZS,eE,tE,ty,nE,ny,iy,iE,ln,Sr,rE,sE,ry,aE,ku,sy;const Pl=class Pl{constructor(e,t,i,r,s,a,o,c,u,h,d,f,p){b(this,Y);b(this,$l,new AbortController);b(this,Dn,null);b(this,Et,new Map);b(this,jt,new Map);b(this,Ul,null);b(this,Rr,null);b(this,Gl,null);b(this,si,new AM);b(this,_s,null);b(this,$a,null);b(this,Vl,0);b(this,Ua,new Set);b(this,Zi,null);b(this,Ti,null);b(this,Ga,new Set);de(this,"_editorUndoBar",null);b(this,Ph,!1);b(this,Lh,!1);b(this,Wl,!1);b(this,Mh,null);b(this,er,null);b(this,Cs,null);b(this,Xl,null);b(this,Ts,!1);b(this,tr,null);b(this,yg,new bM);b(this,ks,!1);b(this,Nh,!1);b(this,Rs,null);b(this,Va,null);b(this,Ih,null);b(this,Dh,null);b(this,Rt,ve.NONE);b(this,Oe,new Set);b(this,Pr,null);b(this,Wa,null);b(this,Oh,null);b(this,Fh,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});b(this,Ps,[0,0]);b(this,nr,null);b(this,Lr,null);b(this,jh,null);b(this,ai,null);const g=this._signal=l(this,$l).signal;m(this,Lr,e),m(this,jh,t),m(this,Ul,i),this._eventBus=r,r._on("editingaction",this.onEditingAction.bind(this),{signal:g}),r._on("pagechanging",this.onPageChanging.bind(this),{signal:g}),r._on("scalechanging",this.onScaleChanging.bind(this),{signal:g}),r._on("rotationchanging",this.onRotationChanging.bind(this),{signal:g}),r._on("setpreference",this.onSetPreference.bind(this),{signal:g}),r._on("switchannotationeditorparams",w=>this.updateParams(w.type,w.value),{signal:g}),A(this,Y,ZS).call(this),A(this,Y,iE).call(this),A(this,Y,ty).call(this),m(this,Rr,s.annotationStorage),m(this,Mh,s.filterFactory),m(this,Wa,a),m(this,Xl,o||null),m(this,Ph,c),m(this,Lh,u),m(this,Wl,h),m(this,Dh,d||null),this.viewParameters={realScale:pa.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=f||null,this._supportsPinchToZoom=p!==!1}static get _keyboardManager(){const e=Pl.prototype,t=a=>l(a,Lr).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),i=(a,{target:o})=>{if(o instanceof HTMLInputElement){const{type:c}=o;return c!=="text"&&c!=="number"}return!0},r=this.TRANSLATE_SMALL,s=this.TRANSLATE_BIG;return xe(this,"_keyboardManager",new af([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],e.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:i}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&l(a,Lr).contains(o)&&!a.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&l(a,Lr).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}]]))}destroy(){var e,t,i,r,s;(e=l(this,ai))==null||e.resolve(),m(this,ai,null),(t=l(this,$l))==null||t.abort(),m(this,$l,null),this._signal=null;for(const a of l(this,jt).values())a.destroy();l(this,jt).clear(),l(this,Et).clear(),l(this,Ga).clear(),m(this,Dn,null),l(this,Oe).clear(),l(this,si).destroy(),(i=l(this,Ul))==null||i.destroy(),(r=l(this,tr))==null||r.hide(),m(this,tr,null),l(this,er)&&(clearTimeout(l(this,er)),m(this,er,null)),l(this,nr)&&(clearTimeout(l(this,nr)),m(this,nr,null)),(s=this._editorUndoBar)==null||s.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return l(this,Dh)}get useNewAltTextFlow(){return l(this,Lh)}get useNewAltTextWhenAddingImage(){return l(this,Wl)}get hcmFilter(){return xe(this,"hcmFilter",l(this,Wa)?l(this,Mh).addHCMFilter(l(this,Wa).foreground,l(this,Wa).background):"none")}get direction(){return xe(this,"direction",getComputedStyle(l(this,Lr)).direction)}get highlightColors(){return xe(this,"highlightColors",l(this,Xl)?new Map(l(this,Xl).split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return xe(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),m(this,$a,e)}setMainHighlightColorPicker(e){m(this,Ih,e)}editAltText(e,t=!1){var i;(i=l(this,Ul))==null||i.editAltText(this,e,t)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":m(this,Wl,t);break}}onPageChanging({pageNumber:e}){m(this,Vl,e-1)}focusMainContainer(){l(this,Lr).focus()}findParent(e,t){for(const i of l(this,jt).values()){const{x:r,y:s,width:a,height:o}=i.div.getBoundingClientRect();if(e>=r&&e<=r+a&&t>=s&&t<=s+o)return i}return null}disableUserSelect(e=!1){l(this,jh).classList.toggle("noUserSelect",e)}addShouldRescale(e){l(this,Ga).add(e)}removeShouldRescale(e){l(this,Ga).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*pa.PDF_TO_CSS_UNITS;for(const i of l(this,Ga))i.onScaleChanging();(t=l(this,$a))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:i,anchorOffset:r,focusNode:s,focusOffset:a}=t,o=t.toString(),u=A(this,Y,np).call(this,t).closest(".textLayer"),h=this.getSelectionBoxes(u);if(!h)return;t.empty();const d=A(this,Y,ey).call(this,u),f=l(this,Rt)===ve.NONE,p=()=>{d==null||d.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:h,anchorNode:i,anchorOffset:r,focusNode:s,focusOffset:a,text:o}),f&&this.showAllEditors("highlight",!0,!0)};if(f){this.switchToMode(ve.HIGHLIGHT,p);return}p()}addToAnnotationStorage(e){!e.isEmpty()&&l(this,Rr)&&!l(this,Rr).has(e.id)&&l(this,Rr).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,l(this,Ts)&&(m(this,Ts,!1),A(this,Y,ip).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of l(this,Oe))if(t.div.contains(e)){m(this,Va,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!l(this,Va))return;const[e,t]=l(this,Va);m(this,Va,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){A(this,Y,ty).call(this),A(this,Y,ny).call(this)}removeEditListeners(){A(this,Y,nE).call(this),A(this,Y,iy).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const i of l(this,Ti))if(i.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const i of l(this,Ti))if(i.isHandlingMimeForPasting(t.type)){i.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var i;if(e.preventDefault(),(i=l(this,Dn))==null||i.commitOrRemove(),!this.hasSelection)return;const t=[];for(const r of l(this,Oe)){const s=r.serialize(!0);s&&t.push(s)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const s of t.items)for(const a of l(this,Ti))if(a.isHandlingMimeForPasting(s.type)){a.paste(s,this.currentLayer);return}let i=t.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(s){we(`paste: "${s.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const r=this.currentLayer;try{const s=[];for(const c of i){const u=await r.deserialize(c);if(!u)return;s.push(u)}const a=()=>{for(const c of s)A(this,Y,ry).call(this,c);A(this,Y,sy).call(this,s)},o=()=>{for(const c of s)c.remove()};this.addCommands({cmd:a,undo:o,mustExec:!0})}catch(s){we(`paste: "${s.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),l(this,Rt)!==ve.NONE&&!this.isEditorHandlingKeyboard&&Pl._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,l(this,Ts)&&(m(this,Ts,!1),A(this,Y,ip).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(A(this,Y,eE).call(this),A(this,Y,ny).call(this),A(this,Y,ln).call(this,{isEditing:l(this,Rt)!==ve.NONE,isEmpty:A(this,Y,ku).call(this),hasSomethingToUndo:l(this,si).hasSomethingToUndo(),hasSomethingToRedo:l(this,si).hasSomethingToRedo(),hasSelectedEditor:!1})):(A(this,Y,tE).call(this),A(this,Y,iy).call(this),A(this,Y,ln).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!l(this,Ti)){m(this,Ti,e);for(const t of l(this,Ti))A(this,Y,Sr).call(this,t.defaultPropertiesToUpdate)}}getId(){return l(this,yg).id}get currentLayer(){return l(this,jt).get(l(this,Vl))}getLayer(e){return l(this,jt).get(e)}get currentPageIndex(){return l(this,Vl)}addLayer(e){l(this,jt).set(e.pageIndex,e),l(this,ks)?e.enable():e.disable()}removeLayer(e){l(this,jt).delete(e.pageIndex)}async updateMode(e,t=null,i=!1){var r;if(l(this,Rt)!==e&&!(l(this,ai)&&(await l(this,ai).promise,!l(this,ai)))){if(m(this,ai,Promise.withResolvers()),m(this,Rt,e),e===ve.NONE){this.setEditingState(!1),A(this,Y,sE).call(this),(r=this._editorUndoBar)==null||r.hide(),l(this,ai).resolve();return}this.setEditingState(!0),await A(this,Y,rE).call(this),this.unselectAll();for(const s of l(this,jt).values())s.updateMode(e);if(!t){i&&this.addNewEditorFromKeyboard(),l(this,ai).resolve();return}for(const s of l(this,Et).values())s.annotationElementId===t?(this.setSelected(s),s.enterInEditMode()):s.unselect();l(this,ai).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==l(this,Rt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var i;if(l(this,Ti)){switch(e){case _e.CREATE:this.currentLayer.addNewEditor();return;case _e.HIGHLIGHT_DEFAULT_COLOR:(i=l(this,Ih))==null||i.updateColor(t);break;case _e.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(l(this,Oh)||m(this,Oh,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const r of l(this,Oe))r.updateParams(e,t);for(const r of l(this,Ti))r.updateDefaultParams(e,t)}}showAllEditors(e,t,i=!1){var s;for(const a of l(this,Et).values())a.editorType===e&&a.show(t);(((s=l(this,Oh))==null?void 0:s.get(_e.HIGHLIGHT_SHOW_ALL))??!0)!==t&&A(this,Y,Sr).call(this,[[_e.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(l(this,Nh)!==e){m(this,Nh,e);for(const t of l(this,jt).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const i of l(this,Et).values())i.pageIndex===e&&t.push(i);return t}getEditor(e){return l(this,Et).get(e)}addEditor(e){l(this,Et).set(e.id,e)}removeEditor(e){var t;e.div.contains(document.activeElement)&&(l(this,er)&&clearTimeout(l(this,er)),m(this,er,setTimeout(()=>{this.focusMainContainer(),m(this,er,null)},0))),l(this,Et).delete(e.id),this.unselect(e),(!e.annotationElementId||!l(this,Ua).has(e.annotationElementId))&&((t=l(this,Rr))==null||t.remove(e.id))}addDeletedAnnotationElement(e){l(this,Ua).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return l(this,Ua).has(e)}removeDeletedAnnotationElement(e){l(this,Ua).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){l(this,Dn)!==e&&(m(this,Dn,e),e&&A(this,Y,Sr).call(this,e.propertiesToUpdate))}updateUI(e){l(this,Y,aE)===e&&A(this,Y,Sr).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){A(this,Y,Sr).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(l(this,Oe).has(e)){l(this,Oe).delete(e),e.unselect(),A(this,Y,ln).call(this,{hasSelectedEditor:this.hasSelection});return}l(this,Oe).add(e),e.select(),A(this,Y,Sr).call(this,e.propertiesToUpdate),A(this,Y,ln).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;(t=l(this,$a))==null||t.commitOrRemove();for(const i of l(this,Oe))i!==e&&i.unselect();l(this,Oe).clear(),l(this,Oe).add(e),e.select(),A(this,Y,Sr).call(this,e.propertiesToUpdate),A(this,Y,ln).call(this,{hasSelectedEditor:!0})}isSelected(e){return l(this,Oe).has(e)}get firstSelectedEditor(){return l(this,Oe).values().next().value}unselect(e){e.unselect(),l(this,Oe).delete(e),A(this,Y,ln).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return l(this,Oe).size!==0}get isEnterHandled(){return l(this,Oe).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;l(this,si).undo(),A(this,Y,ln).call(this,{hasSomethingToUndo:l(this,si).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:A(this,Y,ku).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){l(this,si).redo(),A(this,Y,ln).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:l(this,si).hasSomethingToRedo(),isEmpty:A(this,Y,ku).call(this)})}addCommands(e){l(this,si).add(e),A(this,Y,ln).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:A(this,Y,ku).call(this)})}cleanUndoStack(e){l(this,si).cleanType(e)}delete(){var s;this.commitOrRemove();const e=(s=this.currentLayer)==null?void 0:s.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...l(this,Oe)],i=()=>{var a;(a=this._editorUndoBar)==null||a.show(r,t.length===1?t[0].editorType:t.length);for(const o of t)o.remove()},r=()=>{for(const a of t)A(this,Y,ry).call(this,a)};this.addCommands({cmd:i,undo:r,mustExec:!0})}commitOrRemove(){var e;(e=l(this,Dn))==null||e.commitOrRemove()}hasSomethingToControl(){return l(this,Dn)||this.hasSelection}selectAll(){for(const e of l(this,Oe))e.commit();A(this,Y,sy).call(this,l(this,Et).values())}unselectAll(){var e;if(!(l(this,Dn)&&(l(this,Dn).commitOrRemove(),l(this,Rt)!==ve.NONE))&&!((e=l(this,$a))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of l(this,Oe))t.unselect();l(this,Oe).clear(),A(this,Y,ln).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;l(this,Ps)[0]+=e,l(this,Ps)[1]+=t;const[r,s]=l(this,Ps),a=[...l(this,Oe)],o=1e3;l(this,nr)&&clearTimeout(l(this,nr)),m(this,nr,setTimeout(()=>{m(this,nr,null),l(this,Ps)[0]=l(this,Ps)[1]=0,this.addCommands({cmd:()=>{for(const c of a)l(this,Et).has(c.id)&&c.translateInPage(r,s)},undo:()=>{for(const c of a)l(this,Et).has(c.id)&&c.translateInPage(-r,-s)},mustExec:!1})},o));for(const c of a)c.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),m(this,Zi,new Map);for(const e of l(this,Oe))l(this,Zi).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!l(this,Zi))return!1;this.disableUserSelect(!1);const e=l(this,Zi);m(this,Zi,null);let t=!1;for(const[{x:r,y:s,pageIndex:a},o]of e)o.newX=r,o.newY=s,o.newPageIndex=a,t||(t=r!==o.savedX||s!==o.savedY||a!==o.savedPageIndex);if(!t)return!1;const i=(r,s,a,o)=>{if(l(this,Et).has(r.id)){const c=l(this,jt).get(o);c?r._setParentAndPosition(c,s,a):(r.pageIndex=o,r.x=s,r.y=a)}};return this.addCommands({cmd:()=>{for(const[r,{newX:s,newY:a,newPageIndex:o}]of e)i(r,s,a,o)},undo:()=>{for(const[r,{savedX:s,savedY:a,savedPageIndex:o}]of e)i(r,s,a,o)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(l(this,Zi))for(const i of l(this,Zi).keys())i.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||l(this,Oe).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return l(this,Dn)===e}getActive(){return l(this,Dn)}getMode(){return l(this,Rt)}get imageManager(){return xe(this,"imageManager",new J0)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let u=0,h=t.rangeCount;u<h;u++)if(!e.contains(t.getRangeAt(u).commonAncestorContainer))return null;const{x:i,y:r,width:s,height:a}=e.getBoundingClientRect();let o;switch(e.getAttribute("data-main-rotation")){case"90":o=(u,h,d,f)=>({x:(h-r)/a,y:1-(u+d-i)/s,width:f/a,height:d/s});break;case"180":o=(u,h,d,f)=>({x:1-(u+d-i)/s,y:1-(h+f-r)/a,width:d/s,height:f/a});break;case"270":o=(u,h,d,f)=>({x:1-(h+f-r)/a,y:(u-i)/s,width:f/a,height:d/s});break;default:o=(u,h,d,f)=>({x:(u-i)/s,y:(h-r)/a,width:d/s,height:f/a});break}const c=[];for(let u=0,h=t.rangeCount;u<h;u++){const d=t.getRangeAt(u);if(!d.collapsed)for(const{x:f,y:p,width:g,height:w}of d.getClientRects())g===0||w===0||c.push(o(f,p,g,w))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:e,id:t}){(l(this,Gl)||m(this,Gl,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=l(this,Gl))==null||t.delete(e)}renderAnnotationElement(e){var r;const t=(r=l(this,Gl))==null?void 0:r.get(e.data.id);if(!t)return;const i=l(this,Rr).getRawValue(t);i&&(l(this,Rt)===ve.NONE&&!i.hasBeenModified||i.renderAnnotationElement(e))}};$l=new WeakMap,Dn=new WeakMap,Et=new WeakMap,jt=new WeakMap,Ul=new WeakMap,Rr=new WeakMap,Gl=new WeakMap,si=new WeakMap,_s=new WeakMap,$a=new WeakMap,Vl=new WeakMap,Ua=new WeakMap,Zi=new WeakMap,Ti=new WeakMap,Ga=new WeakMap,Ph=new WeakMap,Lh=new WeakMap,Wl=new WeakMap,Mh=new WeakMap,er=new WeakMap,Cs=new WeakMap,Xl=new WeakMap,Ts=new WeakMap,tr=new WeakMap,yg=new WeakMap,ks=new WeakMap,Nh=new WeakMap,Rs=new WeakMap,Va=new WeakMap,Ih=new WeakMap,Dh=new WeakMap,Rt=new WeakMap,Oe=new WeakMap,Pr=new WeakMap,Wa=new WeakMap,Oh=new WeakMap,Fh=new WeakMap,Ps=new WeakMap,nr=new WeakMap,Lr=new WeakMap,jh=new WeakMap,ai=new WeakMap,Y=new WeakSet,np=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},ey=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const i of l(this,jt).values())if(i.hasTextLayer(e))return i;return null},QS=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const i=A(this,Y,np).call(this,e).closest(".textLayer"),r=this.getSelectionBoxes(i);r&&(l(this,tr)||m(this,tr,new wM(this)),l(this,tr).show(i,r,this.direction==="ltr"))},JS=function(){var s,a,o;const e=document.getSelection();if(!e||e.isCollapsed){l(this,Pr)&&((s=l(this,tr))==null||s.hide(),m(this,Pr,null),A(this,Y,ln).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===l(this,Pr))return;const r=A(this,Y,np).call(this,e).closest(".textLayer");if(!r){l(this,Pr)&&((a=l(this,tr))==null||a.hide(),m(this,Pr,null),A(this,Y,ln).call(this,{hasSelectedText:!1}));return}if((o=l(this,tr))==null||o.hide(),m(this,Pr,t),A(this,Y,ln).call(this,{hasSelectedText:!0}),!(l(this,Rt)!==ve.HIGHLIGHT&&l(this,Rt)!==ve.NONE)&&(l(this,Rt)===ve.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),m(this,Ts,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=l(this,Rt)===ve.HIGHLIGHT?A(this,Y,ey).call(this,r):null;c==null||c.toggleDrawing();const u=new AbortController,h=this.combinedSignal(u),d=f=>{f.type==="pointerup"&&f.button!==0||(u.abort(),c==null||c.toggleDrawing(!0),f.type==="pointerup"&&A(this,Y,ip).call(this,"main_toolbar"))};window.addEventListener("pointerup",d,{signal:h}),window.addEventListener("blur",d,{signal:h})}},ip=function(e=""){l(this,Rt)===ve.HIGHLIGHT?this.highlightSelection(e):l(this,Ph)&&A(this,Y,QS).call(this)},ZS=function(){document.addEventListener("selectionchange",A(this,Y,JS).bind(this),{signal:this._signal})},eE=function(){if(l(this,Cs))return;m(this,Cs,new AbortController);const e=this.combinedSignal(l(this,Cs));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},tE=function(){var e;(e=l(this,Cs))==null||e.abort(),m(this,Cs,null)},ty=function(){if(l(this,Rs))return;m(this,Rs,new AbortController);const e=this.combinedSignal(l(this,Rs));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},nE=function(){var e;(e=l(this,Rs))==null||e.abort(),m(this,Rs,null)},ny=function(){if(l(this,_s))return;m(this,_s,new AbortController);const e=this.combinedSignal(l(this,_s));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},iy=function(){var e;(e=l(this,_s))==null||e.abort(),m(this,_s,null)},iE=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},ln=function(e){Object.entries(e).some(([i,r])=>l(this,Fh)[i]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(l(this,Fh),e)}),l(this,Rt)===ve.HIGHLIGHT&&e.hasSelectedEditor===!1&&A(this,Y,Sr).call(this,[[_e.HIGHLIGHT_FREE,!0]]))},Sr=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},rE=async function(){if(!l(this,ks)){m(this,ks,!0);const e=[];for(const t of l(this,jt).values())e.push(t.enable());await Promise.all(e);for(const t of l(this,Et).values())t.enable()}},sE=function(){if(this.unselectAll(),l(this,ks)){m(this,ks,!1);for(const e of l(this,jt).values())e.disable();for(const e of l(this,Et).values())e.disable()}},ry=function(e){const t=l(this,jt).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},aE=function(){let e=null;for(e of l(this,Oe));return e},ku=function(){if(l(this,Et).size===0)return!0;if(l(this,Et).size===1)for(const e of l(this,Et).values())return e.isEmpty();return!1},sy=function(e){for(const t of l(this,Oe))t.unselect();l(this,Oe).clear();for(const t of e)t.isEmpty()||(l(this,Oe).add(t),t.select());A(this,Y,ln).call(this,{hasSelectedEditor:this.hasSelection})},de(Pl,"TRANSLATE_SMALL",1),de(Pl,"TRANSLATE_BIG",10);let Zo=Pl;var Pt,ir,ki,Yl,rr,On,Kl,sr,Sn,Mr,Xa,ar,Ls,Hi,Ru,rp;const cn=class cn{constructor(e){b(this,Hi);b(this,Pt,null);b(this,ir,!1);b(this,ki,null);b(this,Yl,null);b(this,rr,null);b(this,On,null);b(this,Kl,!1);b(this,sr,null);b(this,Sn,null);b(this,Mr,null);b(this,Xa,null);b(this,ar,!1);m(this,Sn,e),m(this,ar,e._uiManager.useNewAltTextFlow),l(cn,Ls)||m(cn,Ls,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){cn._l10n??(cn._l10n=e)}async render(){const e=m(this,ki,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=m(this,Yl,document.createElement("span"));e.append(t),l(this,ar)?(e.classList.add("new"),e.setAttribute("data-l10n-id",l(cn,Ls).missing),t.setAttribute("data-l10n-id",l(cn,Ls)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=l(this,Sn)._uiManager._signal;e.addEventListener("contextmenu",Vi,{signal:i}),e.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:i});const r=s=>{s.preventDefault(),l(this,Sn)._uiManager.editAltText(l(this,Sn)),l(this,ar)&&l(this,Sn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:l(this,Hi,Ru)}})};return e.addEventListener("click",r,{capture:!0,signal:i}),e.addEventListener("keydown",s=>{s.target===e&&s.key==="Enter"&&(m(this,Kl,!0),r(s))},{signal:i}),await A(this,Hi,rp).call(this),e}finish(){l(this,ki)&&(l(this,ki).focus({focusVisible:l(this,Kl)}),m(this,Kl,!1))}isEmpty(){return l(this,ar)?l(this,Pt)===null:!l(this,Pt)&&!l(this,ir)}hasData(){return l(this,ar)?l(this,Pt)!==null||!!l(this,Mr):this.isEmpty()}get guessedText(){return l(this,Mr)}async setGuessedText(e){l(this,Pt)===null&&(m(this,Mr,e),m(this,Xa,await cn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),A(this,Hi,rp).call(this))}toggleAltTextBadge(e=!1){var t;if(!l(this,ar)||l(this,Pt)){(t=l(this,sr))==null||t.remove(),m(this,sr,null);return}if(!l(this,sr)){const i=m(this,sr,document.createElement("div"));i.className="noAltTextBadge",l(this,Sn).div.append(i)}l(this,sr).classList.toggle("hidden",!e)}serialize(e){let t=l(this,Pt);return!e&&l(this,Mr)===t&&(t=l(this,Xa)),{altText:t,decorative:l(this,ir),guessedText:l(this,Mr),textWithDisclaimer:l(this,Xa)}}get data(){return{altText:l(this,Pt),decorative:l(this,ir)}}set data({altText:e,decorative:t,guessedText:i,textWithDisclaimer:r,cancel:s=!1}){i&&(m(this,Mr,i),m(this,Xa,r)),!(l(this,Pt)===e&&l(this,ir)===t)&&(s||(m(this,Pt,e),m(this,ir,t)),A(this,Hi,rp).call(this))}toggle(e=!1){l(this,ki)&&(!e&&l(this,On)&&(clearTimeout(l(this,On)),m(this,On,null)),l(this,ki).disabled=!e)}shown(){l(this,Sn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:l(this,Hi,Ru)}})}destroy(){var e,t;(e=l(this,ki))==null||e.remove(),m(this,ki,null),m(this,Yl,null),m(this,rr,null),(t=l(this,sr))==null||t.remove(),m(this,sr,null)}};Pt=new WeakMap,ir=new WeakMap,ki=new WeakMap,Yl=new WeakMap,rr=new WeakMap,On=new WeakMap,Kl=new WeakMap,sr=new WeakMap,Sn=new WeakMap,Mr=new WeakMap,Xa=new WeakMap,ar=new WeakMap,Ls=new WeakMap,Hi=new WeakSet,Ru=function(){return l(this,Pt)&&"added"||l(this,Pt)===null&&this.guessedText&&"review"||"missing"},rp=async function(){var r,s,a;const e=l(this,ki);if(!e)return;if(l(this,ar)){if(e.classList.toggle("done",!!l(this,Pt)),e.setAttribute("data-l10n-id",l(cn,Ls)[l(this,Hi,Ru)]),(r=l(this,Yl))==null||r.setAttribute("data-l10n-id",l(cn,Ls)[`${l(this,Hi,Ru)}-label`]),!l(this,Pt)){(s=l(this,rr))==null||s.remove();return}}else{if(!l(this,Pt)&&!l(this,ir)){e.classList.remove("done"),(a=l(this,rr))==null||a.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=l(this,rr);if(!t){m(this,rr,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${l(this,Sn).id}`;const o=100,c=l(this,Sn)._uiManager._signal;c.addEventListener("abort",()=>{clearTimeout(l(this,On)),m(this,On,null)},{once:!0}),e.addEventListener("mouseenter",()=>{m(this,On,setTimeout(()=>{m(this,On,null),l(this,rr).classList.add("show"),l(this,Sn)._reportTelemetry({action:"alt_text_tooltip"})},o))},{signal:c}),e.addEventListener("mouseleave",()=>{var u;l(this,On)&&(clearTimeout(l(this,On)),m(this,On,null)),(u=l(this,rr))==null||u.classList.remove("show")},{signal:c})}l(this,ir)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=l(this,Pt)),t.parentNode||e.append(t);const i=l(this,Sn).getImageForAltText();i==null||i.setAttribute("aria-describedby",t.id)},b(cn,Ls,null),de(cn,"_l10n",null);let og=cn;var zh,Ya,Bh,Hh,$h,Uh,Gh,ql,Nr,Ka,Ms,us,oE,lE,ay;const bw=class bw{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:i=null,onPinchStart:r=null,onPinching:s=null,onPinchEnd:a=null,signal:o}){b(this,us);b(this,zh);b(this,Ya,!1);b(this,Bh,null);b(this,Hh);b(this,$h);b(this,Uh);b(this,Gh);b(this,ql);b(this,Nr,null);b(this,Ka);b(this,Ms,null);m(this,zh,e),m(this,Bh,i),m(this,Hh,t),m(this,$h,r),m(this,Uh,s),m(this,Gh,a),m(this,Ka,new AbortController),m(this,ql,AbortSignal.any([o,l(this,Ka).signal])),e.addEventListener("touchstart",A(this,us,oE).bind(this),{passive:!1,signal:l(this,ql)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return xe(this,"MIN_TOUCH_DISTANCE_TO_PINCH",35/(window.devicePixelRatio||1))}destroy(){var e;(e=l(this,Ka))==null||e.abort(),m(this,Ka,null)}};zh=new WeakMap,Ya=new WeakMap,Bh=new WeakMap,Hh=new WeakMap,$h=new WeakMap,Uh=new WeakMap,Gh=new WeakMap,ql=new WeakMap,Nr=new WeakMap,Ka=new WeakMap,Ms=new WeakMap,us=new WeakSet,oE=function(e){var r,s,a;if((r=l(this,Hh))!=null&&r.call(this)||e.touches.length<2)return;if(!l(this,Ms)){m(this,Ms,new AbortController);const o=AbortSignal.any([l(this,ql),l(this,Ms).signal]),c=l(this,zh),u={signal:o,passive:!1};c.addEventListener("touchmove",A(this,us,lE).bind(this),u),c.addEventListener("touchend",A(this,us,ay).bind(this),u),c.addEventListener("touchcancel",A(this,us,ay).bind(this),u),(s=l(this,$h))==null||s.call(this)}if(Qn(e),e.touches.length!==2||(a=l(this,Bh))!=null&&a.call(this)){m(this,Nr,null);return}let[t,i]=e.touches;t.identifier>i.identifier&&([t,i]=[i,t]),m(this,Nr,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:i.screenX,touch1Y:i.screenY})},lE=function(e){var E;if(!l(this,Nr)||e.touches.length!==2)return;let[t,i]=e.touches;t.identifier>i.identifier&&([t,i]=[i,t]);const{screenX:r,screenY:s}=t,{screenX:a,screenY:o}=i,c=l(this,Nr),{touch0X:u,touch0Y:h,touch1X:d,touch1Y:f}=c,p=d-u,g=f-h,w=a-r,S=o-s,v=Math.hypot(w,S)||1,y=Math.hypot(p,g)||1;if(!l(this,Ya)&&Math.abs(y-v)<=bw.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=r,c.touch0Y=s,c.touch1X=a,c.touch1Y=o,e.preventDefault(),!l(this,Ya)){m(this,Ya,!0);return}const x=[(r+a)/2,(s+o)/2];(E=l(this,Uh))==null||E.call(this,x,y,v)},ay=function(e){var t;l(this,Ms).abort(),m(this,Ms,null),(t=l(this,Gh))==null||t.call(this),l(this,Nr)&&(e.preventDefault(),m(this,Nr,null),m(this,Ya,!1))};let lg=bw;var qa,Ri,Ye,Ql,Ns,Vh,Qa,zt,Ja,Ir,Is,Wh,Za,Fn,Xh,eo,Dr,or,Jl,Zl,oi,to,Yh,vg,fe,oy,Kh,ly,sp,cE,uE,cy,ap,uy,hE,dE,fE,hy,pE,dy,gE,mE,yE,fy,Pu;const be=class be{constructor(e){b(this,fe);b(this,qa,null);b(this,Ri,null);b(this,Ye,null);b(this,Ql,!1);b(this,Ns,null);b(this,Vh,"");b(this,Qa,!1);b(this,zt,null);b(this,Ja,null);b(this,Ir,null);b(this,Is,null);b(this,Wh,"");b(this,Za,!1);b(this,Fn,null);b(this,Xh,!1);b(this,eo,!1);b(this,Dr,!1);b(this,or,null);b(this,Jl,0);b(this,Zl,0);b(this,oi,null);b(this,to,null);de(this,"_editToolbar",null);de(this,"_initialOptions",Object.create(null));de(this,"_initialData",null);de(this,"_isVisible",!0);de(this,"_uiManager",null);de(this,"_focusEventsAllowed",!0);b(this,Yh,!1);b(this,vg,be._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:i,pageHeight:r,pageX:s,pageY:a}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,r],this.pageTranslation=[s,a];const[o,c]=this.parentDimensions;this.x=e.x/o,this.y=e.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=be.prototype._resizeWithKeyboard,t=Zo.TRANSLATE_SMALL,i=Zo.TRANSLATE_BIG;return xe(this,"_resizerKeyboardManager",new af([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,i]}],[["Escape","mac+Escape"],be.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return xe(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new xM({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(be._l10n??(be._l10n=e),be._l10nResizer||(be._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),be._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);be._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){$e("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return l(this,Yh)}set _isDraggable(e){var t;m(this,Yh,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=l(this,vg)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):A(this,fe,Pu).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(l(this,Za)?m(this,Za,!1):this.parent.setSelected(this))}focusout(e){var i;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(i=this.parent)!=null&&i.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,i,r){const[s,a]=this.parentDimensions;[i,r]=this.screenToPageTranslation(i,r),this.x=(e+i)/s,this.y=(t+r)/a,this.fixAndSetPosition()}translate(e,t){A(this,fe,oy).call(this,this.parentDimensions,e,t)}translateInPage(e,t){l(this,Fn)||m(this,Fn,[this.x,this.y,this.width,this.height]),A(this,fe,oy).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){l(this,Fn)||m(this,Fn,[this.x,this.y,this.width,this.height]);const{div:i,parentDimensions:[r,s]}=this;if(this.x+=e/r,this.y+=t/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:d,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,d,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:o}=this;const[c,u]=this.getBaseTranslation();a+=c,o+=u;const{style:h}=i;h.left=`${(100*a).toFixed(2)}%`,h.top=`${(100*o).toFixed(2)}%`,this._onTranslating(a,o),i.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!l(this,Fn)&&(l(this,Fn)[0]!==this.x||l(this,Fn)[1]!==this.y)}get _hasBeenResized(){return!!l(this,Fn)&&(l(this,Fn)[2]!==this.width||l(this,Fn)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:i}=be,r=i/e,s=i/t;switch(this.rotation){case 90:return[-r,s];case 180:return[r,s];case 270:return[r,-s];default:return[-r,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[i,r]}=this;let{x:s,y:a,width:o,height:c}=this;if(o*=i,c*=r,s*=i,a*=r,this._mustFixPosition)switch(e){case 0:s=Math.max(0,Math.min(i-o,s)),a=Math.max(0,Math.min(r-c,a));break;case 90:s=Math.max(0,Math.min(i-c,s)),a=Math.min(r,Math.max(o,a));break;case 180:s=Math.min(i,Math.max(o,s)),a=Math.min(r,Math.max(c,a));break;case 270:s=Math.min(i,Math.max(c,s)),a=Math.max(0,Math.min(r-o,a));break}this.x=s/=i,this.y=a/=r;const[u,h]=this.getBaseTranslation();s+=u,a+=h,t.left=`${(100*s).toFixed(2)}%`,t.top=`${(100*a).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var i;return A(i=be,Kh,ly).call(i,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var i;return A(i=be,Kh,ly).call(i,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,i]}=this;return[t*e,i*e]}setDims(e,t){const[i,r]=this.parentDimensions,{style:s}=this.div;s.width=`${(100*e/i).toFixed(2)}%`,l(this,Qa)||(s.height=`${(100*t/r).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:i}=e,r=i.endsWith("%"),s=!l(this,Qa)&&t.endsWith("%");if(r&&s)return;const[a,o]=this.parentDimensions;r||(e.width=`${(100*parseFloat(i)/a).toFixed(2)}%`),!l(this,Qa)&&!s&&(e.height=`${(100*parseFloat(t)/o).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=l(this,Ye))==null||e.finish()}async addEditToolbar(){return this._editToolbar||l(this,eo)?this._editToolbar:(this._editToolbar=new q0(this),this.div.append(this._editToolbar.render()),l(this,Ye)&&await this._editToolbar.addAltText(l(this,Ye)),this._editToolbar)}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=l(this,Ye))==null||e.destroy())}addContainer(e){var i;const t=(i=this._editToolbar)==null?void 0:i.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){l(this,Ye)||(og.initialize(be._l10n),m(this,Ye,new og(this)),l(this,qa)&&(l(this,Ye).data=l(this,qa),m(this,qa,null)),await this.addEditToolbar())}get altTextData(){var e;return(e=l(this,Ye))==null?void 0:e.data}set altTextData(e){l(this,Ye)&&(l(this,Ye).data=e)}get guessedAltText(){var e;return(e=l(this,Ye))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=l(this,Ye))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=l(this,Ye))==null?void 0:t.serialize(e)}hasAltText(){return!!l(this,Ye)&&!l(this,Ye).isEmpty()}hasAltTextData(){var e;return((e=l(this,Ye))==null?void 0:e.hasData())??!1}render(){var s;this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=l(this,Ql)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),A(this,fe,dy).call(this);const[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[i,r]=this.getInitialTranslation();return this.translate(i,r),ag(this,this.div,["pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(l(this,to)||m(this,to,new lg({container:this.div,isPinchingDisabled:()=>!this.isSelected,onPinchStart:A(this,fe,hE).bind(this),onPinching:A(this,fe,dE).bind(this),onPinchEnd:A(this,fe,fE).bind(this),signal:this._uiManager._signal}))),(s=this._uiManager._editorUndoBar)==null||s.hide(),this.div}pointerdown(e){const{isMac:t}=gn.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(m(this,Za,!0),this._isDraggable){A(this,fe,pE).call(this,e);return}A(this,fe,hy).call(this,e)}get isSelected(){return this._uiManager.isSelected(this)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){l(this,or)&&clearTimeout(l(this,or)),m(this,or,setTimeout(()=>{var e;m(this,or,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,i){e.changeParent(this),this.x=t,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,i=this.rotation){const r=this.parentScale,[s,a]=this.pageDimensions,[o,c]=this.pageTranslation,u=e/r,h=t/r,d=this.x*s,f=this.y*a,p=this.width*s,g=this.height*a;switch(i){case 0:return[d+u+o,a-f-h-g+c,d+u+p+o,a-f-h+c];case 90:return[d+h+o,a-f+u+c,d+h+g+o,a-f+u+p+c];case 180:return[d-u-p+o,a-f+h+c,d-u+o,a-f+h+g+c];case 270:return[d-h-g+o,a-f-u-p+c,d-h+o,a-f-u+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[i,r,s,a]=e,o=s-i,c=a-r;switch(this.rotation){case 0:return[i,t-a,o,c];case 90:return[i,t-r,c,o];case 180:return[s,t-r,o,c];case 270:return[s,t-a,c,o];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){m(this,eo,!0)}disableEditMode(){m(this,eo,!1)}isInEditMode(){return l(this,eo)}shouldGetKeyboardEvents(){return l(this,Dr)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:i,right:r}=this.getClientDimensions(),{innerHeight:s,innerWidth:a}=window;return t<a&&r>0&&e<s&&i>0}rebuild(){A(this,fe,dy).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){$e("An editor must be serializable")}static async deserialize(e,t,i){const r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:i});r.rotation=e.rotation,m(r,qa,e.accessibilityData);const[s,a]=r.pageDimensions,[o,c,u,h]=r.getRectInCurrentCoords(e.rect,a);return r.x=o/s,r.y=c/a,r.width=u/s,r.height=h/a,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t;if((e=l(this,Is))==null||e.abort(),m(this,Is,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),l(this,or)&&(clearTimeout(l(this,or)),m(this,or,null)),A(this,fe,Pu).call(this),this.removeEditToolbar(),l(this,oi)){for(const i of l(this,oi).values())clearTimeout(i);m(this,oi,null)}this.parent=null,(t=l(this,to))==null||t.destroy(),m(this,to,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(A(this,fe,cE).call(this),l(this,zt).classList.remove("hidden"),ag(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),m(this,Ir,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=l(this,zt).children;if(!l(this,Ri)){m(this,Ri,Array.from(t));const a=A(this,fe,gE).bind(this),o=A(this,fe,mE).bind(this),c=this._uiManager._signal;for(const u of l(this,Ri)){const h=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",a,{signal:c}),u.addEventListener("blur",o,{signal:c}),u.addEventListener("focus",A(this,fe,yE).bind(this,h),{signal:c}),u.setAttribute("data-l10n-id",be._l10nResizer[h])}}const i=l(this,Ri)[0];let r=0;for(const a of t){if(a===i)break;r++}const s=(360-this.rotation+this.parentRotation)%360/90*(l(this,Ri).length/4);if(s!==r){if(s<r)for(let o=0;o<r-s;o++)l(this,zt).append(l(this,zt).firstChild);else if(s>r)for(let o=0;o<s-r;o++)l(this,zt).firstChild.before(l(this,zt).lastChild);let a=0;for(const o of t){const u=l(this,Ri)[a++].getAttribute("data-resizer-name");o.setAttribute("data-l10n-id",be._l10nResizer[u])}}A(this,fe,fy).call(this,0),m(this,Dr,!0),l(this,zt).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){l(this,Dr)&&A(this,fe,uy).call(this,l(this,Wh),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){A(this,fe,Pu).call(this),this.div.focus()}select(){var e,t,i;if(this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var r,s;(r=this.div)!=null&&r.classList.contains("selectedEditor")&&((s=this._editToolbar)==null||s.show())});return}(t=this._editToolbar)==null||t.show(),(i=l(this,Ye))==null||i.toggleAltTextBadge(!1)}unselect(){var e,t,i,r,s;(e=l(this,zt))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(i=this.div)!=null&&i.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(r=this._editToolbar)==null||r.hide(),(s=l(this,Ye))==null||s.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return l(this,Xh)}set isEditing(e){m(this,Xh,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){m(this,Qa,!0);const i=e/t,{style:r}=this.div;r.aspectRatio=i,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){l(this,oi)||m(this,oi,new Map);const{action:i}=e;let r=l(this,oi).get(i);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(e),l(this,oi).delete(i),l(this,oi).size===0&&m(this,oi,null)},be._telemetryTimeout),l(this,oi).set(i,r);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),m(this,Ql,!1)}disable(){this.div&&(this.div.tabIndex=-1),m(this,Ql,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const i=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),i.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};qa=new WeakMap,Ri=new WeakMap,Ye=new WeakMap,Ql=new WeakMap,Ns=new WeakMap,Vh=new WeakMap,Qa=new WeakMap,zt=new WeakMap,Ja=new WeakMap,Ir=new WeakMap,Is=new WeakMap,Wh=new WeakMap,Za=new WeakMap,Fn=new WeakMap,Xh=new WeakMap,eo=new WeakMap,Dr=new WeakMap,or=new WeakMap,Jl=new WeakMap,Zl=new WeakMap,oi=new WeakMap,to=new WeakMap,Yh=new WeakMap,vg=new WeakMap,fe=new WeakSet,oy=function([e,t],i,r){[i,r]=this.screenToPageTranslation(i,r),this.x+=i/e,this.y+=r/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Kh=new WeakSet,ly=function(e,t,i){switch(i){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},sp=function(e){switch(e){case 90:{const[t,i]=this.pageDimensions;return[0,-t/i,i/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,i]=this.pageDimensions;return[0,t/i,-i/t,0]}default:return[1,0,0,1]}},cE=function(){if(l(this,zt))return;m(this,zt,document.createElement("div")),l(this,zt).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const i of e){const r=document.createElement("div");l(this,zt).append(r),r.classList.add("resizer",i),r.setAttribute("data-resizer-name",i),r.addEventListener("pointerdown",A(this,fe,uE).bind(this,i),{signal:t}),r.addEventListener("contextmenu",Vi,{signal:t}),r.tabIndex=-1}this.div.prepend(l(this,zt))},uE=function(e,t){var h;t.preventDefault();const{isMac:i}=gn.platform;if(t.button!==0||t.ctrlKey&&i)return;(h=l(this,Ye))==null||h.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,m(this,Ja,[t.screenX,t.screenY]);const s=new AbortController,a=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",A(this,fe,uy).bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",Qn,{passive:!1,signal:a}),window.addEventListener("contextmenu",Vi,{signal:a}),m(this,Ir,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const o=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const u=()=>{var d;s.abort(),this.parent.togglePointerEvents(!0),(d=l(this,Ye))==null||d.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=o,this.div.style.cursor=c,A(this,fe,ap).call(this)};window.addEventListener("pointerup",u,{signal:a}),window.addEventListener("blur",u,{signal:a})},cy=function(e,t,i,r){this.width=i,this.height=r,this.x=e,this.y=t;const[s,a]=this.parentDimensions;this.setDims(s*i,a*r),this.fixAndSetPosition(),this._onResized()},ap=function(){if(!l(this,Ir))return;const{savedX:e,savedY:t,savedWidth:i,savedHeight:r}=l(this,Ir);m(this,Ir,null);const s=this.x,a=this.y,o=this.width,c=this.height;s===e&&a===t&&o===i&&c===r||this.addCommands({cmd:A(this,fe,cy).bind(this,s,a,o,c),undo:A(this,fe,cy).bind(this,e,t,i,r),mustExec:!0})},uy=function(e,t){const[i,r]=this.parentDimensions,s=this.x,a=this.y,o=this.width,c=this.height,u=be.MIN_SIZE/i,h=be.MIN_SIZE/r,d=A(this,fe,sp).call(this,this.rotation),f=(W,X)=>[d[0]*W+d[2]*X,d[1]*W+d[3]*X],p=A(this,fe,sp).call(this,360-this.rotation),g=(W,X)=>[p[0]*W+p[2]*X,p[1]*W+p[3]*X];let w,S,v=!1,y=!1;switch(e){case"topLeft":v=!0,w=(W,X)=>[0,0],S=(W,X)=>[W,X];break;case"topMiddle":w=(W,X)=>[W/2,0],S=(W,X)=>[W/2,X];break;case"topRight":v=!0,w=(W,X)=>[W,0],S=(W,X)=>[0,X];break;case"middleRight":y=!0,w=(W,X)=>[W,X/2],S=(W,X)=>[0,X/2];break;case"bottomRight":v=!0,w=(W,X)=>[W,X],S=(W,X)=>[0,0];break;case"bottomMiddle":w=(W,X)=>[W/2,X],S=(W,X)=>[W/2,0];break;case"bottomLeft":v=!0,w=(W,X)=>[0,X],S=(W,X)=>[W,0];break;case"middleLeft":y=!0,w=(W,X)=>[0,X/2],S=(W,X)=>[W,X/2];break}const x=w(o,c),E=S(o,c);let T=f(...E);const _=be._round(s+T[0]),R=be._round(a+T[1]);let M=1,j=1,z,V;if(t.fromKeyboard)({deltaX:z,deltaY:V}=t);else{const{screenX:W,screenY:X}=t,[F,P]=l(this,Ja);[z,V]=this.screenToPageTranslation(W-F,X-P),l(this,Ja)[0]=W,l(this,Ja)[1]=X}if([z,V]=g(z/i,V/r),v){const W=Math.hypot(o,c);M=j=Math.max(Math.min(Math.hypot(E[0]-x[0]-z,E[1]-x[1]-V)/W,1/o,1/c),u/o,h/c)}else y?M=Math.max(u,Math.min(1,Math.abs(E[0]-x[0]-z)))/o:j=Math.max(h,Math.min(1,Math.abs(E[1]-x[1]-V)))/c;const ue=be._round(o*M),pe=be._round(c*j);T=f(...S(ue,pe));const oe=_-T[0],Ce=R-T[1];l(this,Fn)||m(this,Fn,[this.x,this.y,this.width,this.height]),this.width=ue,this.height=pe,this.x=oe,this.y=Ce,this.setDims(i*ue,r*pe),this.fixAndSetPosition(),this._onResizing()},hE=function(){var e;m(this,Ir,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=l(this,Ye))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},dE=function(e,t,i){let s=.7*(i/t)+1-.7;if(s===1)return;const a=A(this,fe,sp).call(this,this.rotation),o=(_,R)=>[a[0]*_+a[2]*R,a[1]*_+a[3]*R],[c,u]=this.parentDimensions,h=this.x,d=this.y,f=this.width,p=this.height,g=be.MIN_SIZE/c,w=be.MIN_SIZE/u;s=Math.max(Math.min(s,1/f,1/p),g/f,w/p);const S=be._round(f*s),v=be._round(p*s);if(S===f&&v===p)return;l(this,Fn)||m(this,Fn,[h,d,f,p]);const y=o(f/2,p/2),x=be._round(h+y[0]),E=be._round(d+y[1]),T=o(S/2,v/2);this.x=x-T[0],this.y=E-T[1],this.width=S,this.height=v,this.setDims(c*S,u*v),this.fixAndSetPosition(),this._onResizing()},fE=function(){var e;(e=l(this,Ye))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),A(this,fe,ap).call(this)},hy=function(e){const{isMac:t}=gn.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},pE=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let i=!1;const r=new AbortController,s=this._uiManager.combinedSignal(r),a={capture:!0,passive:!1,signal:s},o=u=>{r.abort(),m(this,Ns,null),m(this,Za,!1),this._uiManager.endDragSession()||A(this,fe,hy).call(this,u),i&&this._onStopDragging()};t&&(m(this,Jl,e.clientX),m(this,Zl,e.clientY),m(this,Ns,e.pointerId),m(this,Vh,e.pointerType),window.addEventListener("pointermove",u=>{i||(i=!0,this._onStartDragging());const{clientX:h,clientY:d,pointerId:f}=u;if(f!==l(this,Ns)){Qn(u);return}const[p,g]=this.screenToPageTranslation(h-l(this,Jl),d-l(this,Zl));m(this,Jl,h),m(this,Zl,d),this._uiManager.dragSelectedEditors(p,g)},a),window.addEventListener("touchmove",Qn,a),window.addEventListener("pointerdown",u=>{u.pointerType===l(this,Vh)&&(l(this,to)||u.isPrimary)&&o(u),Qn(u)},a));const c=u=>{if(!l(this,Ns)||l(this,Ns)===u.pointerId){o(u);return}Qn(u)};window.addEventListener("pointerup",c,{signal:s}),window.addEventListener("blur",c,{signal:s})},dy=function(){if(l(this,Is)||!this.div)return;m(this,Is,new AbortController);const e=this._uiManager.combinedSignal(l(this,Is));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},gE=function(e){be._resizerKeyboardManager.exec(this,e)},mE=function(e){var t;l(this,Dr)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==l(this,zt)&&A(this,fe,Pu).call(this)},yE=function(e){m(this,Wh,l(this,Dr)?e:"")},fy=function(e){if(l(this,Ri))for(const t of l(this,Ri))t.tabIndex=e},Pu=function(){m(this,Dr,!1),A(this,fe,fy).call(this,-1),A(this,fe,ap).call(this)},b(be,Kh),de(be,"_l10n",null),de(be,"_l10nResizer",null),de(be,"_borderLineWidth",-1),de(be,"_colorManager",new Z0),de(be,"_zIndex",1),de(be,"_telemetryTimeout",1e3);let rt=be;class xM extends rt{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Db=3285377520,ri=4294901760,qi=65535;class vE{constructor(e){this.h1=e?e&4294967295:Db,this.h2=e?e&4294967295:Db}update(e){let t,i;if(typeof e=="string"){t=new Uint8Array(e.length*2),i=0;for(let w=0,S=e.length;w<S;w++){const v=e.charCodeAt(w);v<=255?t[i++]=v:(t[i++]=v>>>8,t[i++]=v&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),i=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=i>>2,s=i-r*4,a=new Uint32Array(t.buffer,0,r);let o=0,c=0,u=this.h1,h=this.h2;const d=3432918353,f=461845907,p=d&qi,g=f&qi;for(let w=0;w<r;w++)w&1?(o=a[w],o=o*d&ri|o*p&qi,o=o<<15|o>>>17,o=o*f&ri|o*g&qi,u^=o,u=u<<13|u>>>19,u=u*5+3864292196):(c=a[w],c=c*d&ri|c*p&qi,c=c<<15|c>>>17,c=c*f&ri|c*g&qi,h^=c,h=h<<13|h>>>19,h=h*5+3864292196);switch(o=0,s){case 3:o^=t[r*4+2]<<16;case 2:o^=t[r*4+1]<<8;case 1:o^=t[r*4],o=o*d&ri|o*p&qi,o=o<<15|o>>>17,o=o*f&ri|o*g&qi,r&1?u^=o:h^=o}this.h1=u,this.h2=h}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&ri|e*36045&qi,t=t*4283543511&ri|((t<<16|e>>>16)*2950163797&ri)>>>16,e^=t>>>1,e=e*444984403&ri|e*60499&qi,t=t*3301882366&ri|((t<<16|e>>>16)*3120437893&ri)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const py=Object.freeze({map:null,hash:"",transfer:void 0});var no,io,Lt,wg,wE;class gw{constructor(){b(this,wg);b(this,no,!1);b(this,io,null);b(this,Lt,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const i=l(this,Lt).get(e);return i===void 0?t:Object.assign(t,i)}getRawValue(e){return l(this,Lt).get(e)}remove(e){if(l(this,Lt).delete(e),l(this,Lt).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of l(this,Lt).values())if(t instanceof rt)return;this.onAnnotationEditor(null)}}setValue(e,t){const i=l(this,Lt).get(e);let r=!1;if(i!==void 0)for(const[s,a]of Object.entries(t))i[s]!==a&&(r=!0,i[s]=a);else r=!0,l(this,Lt).set(e,t);r&&A(this,wg,wE).call(this),t instanceof rt&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return l(this,Lt).has(e)}getAll(){return l(this,Lt).size>0?cw(l(this,Lt)):null}setAll(e){for(const[t,i]of Object.entries(e))this.setValue(t,i)}get size(){return l(this,Lt).size}resetModified(){l(this,no)&&(m(this,no,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new bE(this)}get serializable(){if(l(this,Lt).size===0)return py;const e=new Map,t=new vE,i=[],r=Object.create(null);let s=!1;for(const[a,o]of l(this,Lt)){const c=o instanceof rt?o.serialize(!1,r):o;c&&(e.set(a,c),t.update(`${a}:${JSON.stringify(c)}`),s||(s=!!c.bitmap))}if(s)for(const a of e.values())a.bitmap&&i.push(a.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:i}:py}get editorStats(){let e=null;const t=new Map;for(const i of l(this,Lt).values()){if(!(i instanceof rt))continue;const r=i.telemetryFinalData;if(!r)continue;const{type:s}=r;t.has(s)||t.set(s,Object.getPrototypeOf(i).constructor),e||(e=Object.create(null));const a=e[s]||(e[s]=new Map);for(const[o,c]of Object.entries(r)){if(o==="type")continue;let u=a.get(o);u||(u=new Map,a.set(o,u));const h=u.get(c)??0;u.set(c,h+1)}}for(const[i,r]of t)e[i]=r.computeTelemetryFinalData(e[i]);return e}resetModifiedIds(){m(this,io,null)}get modifiedIds(){if(l(this,io))return l(this,io);const e=[];for(const t of l(this,Lt).values())!(t instanceof rt)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return m(this,io,{ids:new Set(e),hash:e.join(",")})}}no=new WeakMap,io=new WeakMap,Lt=new WeakMap,wg=new WeakSet,wE=function(){l(this,no)||(m(this,no,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var qh;class bE extends gw{constructor(t){super();b(this,qh);const{map:i,hash:r,transfer:s}=t.serializable,a=structuredClone(i,s?{transfer:s}:null);m(this,qh,{map:a,hash:r,transfer:s})}get print(){$e("Should not call PrintAnnotationStorage.print")}get serializable(){return l(this,qh)}get modifiedIds(){return xe(this,"modifiedIds",{ids:new Set,hash:""})}}qh=new WeakMap;var ec;class SM{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){b(this,ec,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),l(this,ec).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||l(this,ec).has(e.loadedName))){if(wt(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:r,style:s}=e,a=new FontFace(i,r,s);this.addNativeFontFace(a);try{await a.load(),l(this,ec).add(i),t==null||t(e)}catch{we(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}$e("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const i=e.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(r){throw we(`Failed to load font '${i.family}': '${r}'.`),e.disableFontFace=!0,r}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const r=this._queueLoadingCallback(i);this._prepareFontLoadEvent(e,r)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return xe(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(sn||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),xe(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(wt(!r.done,"completeRequest() cannot be called twice."),r.done=!0;i.length>0&&i[0].done;){const s=i.shift();setTimeout(s.callback,0)}}const{loadingRequests:i}=this,r={done:!1,complete:t,callback:e};return i.push(r),r}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return xe(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function i(E,T){return E.charCodeAt(T)<<24|E.charCodeAt(T+1)<<16|E.charCodeAt(T+2)<<8|E.charCodeAt(T+3)&255}function r(E,T,_,R){const M=E.substring(0,T),j=E.substring(T+_);return M+R+j}let s,a;const o=this._document.createElement("canvas");o.width=1,o.height=1;const c=o.getContext("2d");let u=0;function h(E,T){if(++u>30){we("Load test font never loaded."),T();return}if(c.font="30px "+E,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){T();return}setTimeout(h.bind(null,E,T))}const d=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=r(f,976,d.length,d);const g=16,w=1482184792;let S=i(f,g);for(s=0,a=d.length-3;s<a;s+=4)S=S-w+i(d,s)|0;s<d.length&&(S=S-w+i(d+"XXX",s)|0),f=r(f,g,4,lM(S));const v=`url(data:font/opentype;base64,${btoa(f)});`,y=`@font-face {font-family:"${d}";src:${v}}`;this.insertRule(y);const x=this._document.createElement("div");x.style.visibility="hidden",x.style.width=x.style.height="10px",x.style.position="absolute",x.style.top=x.style.left="0px";for(const E of[e.loadedName,d]){const T=this._document.createElement("span");T.textContent="Hi",T.style.fontFamily=E,x.append(T)}this._document.body.append(x),h(d,()=>{x.remove(),t.complete()})}}ec=new WeakMap;class EM{constructor(e,{disableFontFace:t=!1,fontExtraProperties:i=!1,inspectFont:r=null}){this.compiledGlyphs=Object.create(null);for(const s in e)this[s]=e[s];this.disableFontFace=t===!0,this.fontExtraProperties=i===!0,this._inspectFont=r}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var i;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${pM(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return(i=this._inspectFont)==null||i.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const i=this.loadedName+"_path_"+t;let r;try{r=e.get(i)}catch(a){we(`getPathGenerator - ignoring character: "${a}".`)}const s=new Path2D(r||"");return this.fontExtraProperties||e.delete(i),this.compiledGlyphs[t]=s}}const Df={DATA:1,ERROR:2},mt={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Ob(){}function An(n){if(n instanceof fa||n instanceof X0||n instanceof Ah||n instanceof Mb||n instanceof sg||n instanceof $m)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||$e('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new fa(n.message);case"InvalidPDFException":return new X0(n.message);case"MissingPDFException":return new Ah(n.message);case"PasswordException":return new Mb(n.message,n.code);case"UnexpectedResponseException":return new sg(n.message,n.status);case"UnknownErrorException":return new $m(n.message,n.details)}return new $m(n.message,n.toString())}var tc,vi,AE,xE,SE,op;class Lu{constructor(e,t,i){b(this,vi);b(this,tc,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",A(this,vi,AE).bind(this),{signal:l(this,tc).signal})}on(e,t){const i=this.actionHandler;if(i[e])throw new Error(`There is already an actionName called "${e}"`);i[e]=t}send(e,t,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},i)}sendWithPromise(e,t,i){const r=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[r]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},i)}catch(a){s.reject(a)}return s.promise}sendWithStream(e,t,i,r){const s=this.streamId++,a=this.sourceName,o=this.targetName,c=this.comObj;return new ReadableStream({start:u=>{const h=Promise.withResolvers();return this.streamControllers[s]={controller:u,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:a,targetName:o,action:e,streamId:s,data:t,desiredSize:u.desiredSize},r),h.promise},pull:u=>{const h=Promise.withResolvers();return this.streamControllers[s].pullCall=h,c.postMessage({sourceName:a,targetName:o,stream:mt.PULL,streamId:s,desiredSize:u.desiredSize}),h.promise},cancel:u=>{wt(u instanceof Error,"cancel must have a valid reason");const h=Promise.withResolvers();return this.streamControllers[s].cancelCall=h,this.streamControllers[s].isClosed=!0,c.postMessage({sourceName:a,targetName:o,stream:mt.CANCEL,streamId:s,reason:An(u)}),h.promise}},i)}destroy(){var e;(e=l(this,tc))==null||e.abort(),m(this,tc,null)}}tc=new WeakMap,vi=new WeakSet,AE=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){A(this,vi,SE).call(this,e);return}if(e.callback){const i=e.callbackId,r=this.callbackCapabilities[i];if(!r)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],e.callback===Df.DATA)r.resolve(e.data);else if(e.callback===Df.ERROR)r.reject(An(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const i=this.sourceName,r=e.sourceName,s=this.comObj;Promise.try(t,e.data).then(function(a){s.postMessage({sourceName:i,targetName:r,callback:Df.DATA,callbackId:e.callbackId,data:a})},function(a){s.postMessage({sourceName:i,targetName:r,callback:Df.ERROR,callbackId:e.callbackId,reason:An(a)})});return}if(e.streamId){A(this,vi,xE).call(this,e);return}t(e.data)},xE=function(e){const t=e.streamId,i=this.sourceName,r=e.sourceName,s=this.comObj,a=this,o=this.actionHandler[e.action],c={enqueue(u,h=1,d){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=h,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:i,targetName:r,stream:mt.ENQUEUE,streamId:t,chunk:u},d)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:i,targetName:r,stream:mt.CLOSE,streamId:t}),delete a.streamSinks[t])},error(u){wt(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,s.postMessage({sourceName:i,targetName:r,stream:mt.ERROR,streamId:t,reason:An(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[t]=c,Promise.try(o,e.data,c).then(function(){s.postMessage({sourceName:i,targetName:r,stream:mt.START_COMPLETE,streamId:t,success:!0})},function(u){s.postMessage({sourceName:i,targetName:r,stream:mt.START_COMPLETE,streamId:t,reason:An(u)})})},SE=function(e){const t=e.streamId,i=this.sourceName,r=e.sourceName,s=this.comObj,a=this.streamControllers[t],o=this.streamSinks[t];switch(e.stream){case mt.START_COMPLETE:e.success?a.startCall.resolve():a.startCall.reject(An(e.reason));break;case mt.PULL_COMPLETE:e.success?a.pullCall.resolve():a.pullCall.reject(An(e.reason));break;case mt.PULL:if(!o){s.postMessage({sourceName:i,targetName:r,stream:mt.PULL_COMPLETE,streamId:t,success:!0});break}o.desiredSize<=0&&e.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=e.desiredSize,Promise.try(o.onPull||Ob).then(function(){s.postMessage({sourceName:i,targetName:r,stream:mt.PULL_COMPLETE,streamId:t,success:!0})},function(u){s.postMessage({sourceName:i,targetName:r,stream:mt.PULL_COMPLETE,streamId:t,reason:An(u)})});break;case mt.ENQUEUE:if(wt(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case mt.CLOSE:if(wt(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),A(this,vi,op).call(this,a,t);break;case mt.ERROR:wt(a,"error should have stream controller"),a.controller.error(An(e.reason)),A(this,vi,op).call(this,a,t);break;case mt.CANCEL_COMPLETE:e.success?a.cancelCall.resolve():a.cancelCall.reject(An(e.reason)),A(this,vi,op).call(this,a,t);break;case mt.CANCEL:if(!o)break;const c=An(e.reason);Promise.try(o.onCancel||Ob,c).then(function(){s.postMessage({sourceName:i,targetName:r,stream:mt.CANCEL_COMPLETE,streamId:t,success:!0})},function(u){s.postMessage({sourceName:i,targetName:r,stream:mt.CANCEL_COMPLETE,streamId:t,reason:An(u)})}),o.sinkCapability.reject(c),o.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},op=async function(e,t){var i,r,s;await Promise.allSettled([(i=e.startCall)==null?void 0:i.promise,(r=e.pullCall)==null?void 0:r.promise,(s=e.cancelCall)==null?void 0:s.promise]),delete this.streamControllers[t]};var Qh;class EE{constructor({enableHWA:e=!1}){b(this,Qh,!1);m(this,Qh,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(e,t);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!l(this,Qh)})}}reset(e,t,i){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||i<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=i}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){$e("Abstract method `_createCanvas` called.")}}Qh=new WeakMap;class _M extends EE{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const i=this._document.createElement("canvas");return i.width=e,i.height=t,i}}class _E{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){$e("Abstract method `_fetch` called.")}}class CE extends _E{async _fetch(e){const t=await em(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):Zg(t)}}class TE{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,i,r,s){return"none"}destroy(e=!1){}}var ro,nc,Or,Fr,Zt,so,ao,K,qt,Mu,hl,lp,dl,kE,gy,fl,Nu,Iu,my,Du;class CM extends TE{constructor({docId:t,ownerDocument:i=globalThis.document}){super();b(this,K);b(this,ro);b(this,nc);b(this,Or);b(this,Fr);b(this,Zt);b(this,so);b(this,ao,0);m(this,Fr,t),m(this,Zt,i)}addFilter(t){if(!t)return"none";let i=l(this,K,qt).get(t);if(i)return i;const[r,s,a]=A(this,K,lp).call(this,t),o=t.length===1?r:`${r}${s}${a}`;if(i=l(this,K,qt).get(o),i)return l(this,K,qt).set(t,i),i;const c=`g_${l(this,Fr)}_transfer_map_${on(this,ao)._++}`,u=A(this,K,dl).call(this,c);l(this,K,qt).set(t,u),l(this,K,qt).set(o,u);const h=A(this,K,fl).call(this,c);return A(this,K,Iu).call(this,r,s,a,h),u}addHCMFilter(t,i){var g;const r=`${t}-${i}`,s="base";let a=l(this,K,Mu).get(s);if((a==null?void 0:a.key)===r||(a?((g=a.filter)==null||g.remove(),a.key=r,a.url="none",a.filter=null):(a={key:r,url:"none",filter:null},l(this,K,Mu).set(s,a)),!t||!i))return a.url;const o=A(this,K,Du).call(this,t);t=ae.makeHexColor(...o);const c=A(this,K,Du).call(this,i);if(i=ae.makeHexColor(...c),l(this,K,hl).style.color="",t==="#000000"&&i==="#ffffff"||t===i)return a.url;const u=new Array(256);for(let w=0;w<=255;w++){const S=w/255;u[w]=S<=.03928?S/12.92:((S+.055)/1.055)**2.4}const h=u.join(","),d=`g_${l(this,Fr)}_hcm_filter`,f=a.filter=A(this,K,fl).call(this,d);A(this,K,Iu).call(this,h,h,h,f),A(this,K,gy).call(this,f);const p=(w,S)=>{const v=o[w]/255,y=c[w]/255,x=new Array(S+1);for(let E=0;E<=S;E++)x[E]=v+E/S*(y-v);return x.join(",")};return A(this,K,Iu).call(this,p(0,5),p(1,5),p(2,5),f),a.url=A(this,K,dl).call(this,d),a.url}addAlphaFilter(t){let i=l(this,K,qt).get(t);if(i)return i;const[r]=A(this,K,lp).call(this,[t]),s=`alpha_${r}`;if(i=l(this,K,qt).get(s),i)return l(this,K,qt).set(t,i),i;const a=`g_${l(this,Fr)}_alpha_map_${on(this,ao)._++}`,o=A(this,K,dl).call(this,a);l(this,K,qt).set(t,o),l(this,K,qt).set(s,o);const c=A(this,K,fl).call(this,a);return A(this,K,my).call(this,r,c),o}addLuminosityFilter(t){let i=l(this,K,qt).get(t||"luminosity");if(i)return i;let r,s;if(t?([r]=A(this,K,lp).call(this,[t]),s=`luminosity_${r}`):s="luminosity",i=l(this,K,qt).get(s),i)return l(this,K,qt).set(t,i),i;const a=`g_${l(this,Fr)}_luminosity_map_${on(this,ao)._++}`,o=A(this,K,dl).call(this,a);l(this,K,qt).set(t,o),l(this,K,qt).set(s,o);const c=A(this,K,fl).call(this,a);return A(this,K,kE).call(this,c),t&&A(this,K,my).call(this,r,c),o}addHighlightHCMFilter(t,i,r,s,a){var y;const o=`${i}-${r}-${s}-${a}`;let c=l(this,K,Mu).get(t);if((c==null?void 0:c.key)===o||(c?((y=c.filter)==null||y.remove(),c.key=o,c.url="none",c.filter=null):(c={key:o,url:"none",filter:null},l(this,K,Mu).set(t,c)),!i||!r))return c.url;const[u,h]=[i,r].map(A(this,K,Du).bind(this));let d=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),f=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[p,g]=[s,a].map(A(this,K,Du).bind(this));f<d&&([d,f,p,g]=[f,d,g,p]),l(this,K,hl).style.color="";const w=(x,E,T)=>{const _=new Array(256),R=(f-d)/T,M=x/255,j=(E-x)/(255*T);let z=0;for(let V=0;V<=T;V++){const ue=Math.round(d+V*R),pe=M+V*j;for(let oe=z;oe<=ue;oe++)_[oe]=pe;z=ue+1}for(let V=z;V<256;V++)_[V]=_[z-1];return _.join(",")},S=`g_${l(this,Fr)}_hcm_${t}_filter`,v=c.filter=A(this,K,fl).call(this,S);return A(this,K,gy).call(this,v),A(this,K,Iu).call(this,w(p[0],g[0],5),w(p[1],g[1],5),w(p[2],g[2],5),v),c.url=A(this,K,dl).call(this,S),c.url}destroy(t=!1){var i,r,s,a;t&&((i=l(this,so))!=null&&i.size)||((r=l(this,Or))==null||r.parentNode.parentNode.remove(),m(this,Or,null),(s=l(this,nc))==null||s.clear(),m(this,nc,null),(a=l(this,so))==null||a.clear(),m(this,so,null),m(this,ao,0))}}ro=new WeakMap,nc=new WeakMap,Or=new WeakMap,Fr=new WeakMap,Zt=new WeakMap,so=new WeakMap,ao=new WeakMap,K=new WeakSet,qt=function(){return l(this,nc)||m(this,nc,new Map)},Mu=function(){return l(this,so)||m(this,so,new Map)},hl=function(){if(!l(this,Or)){const t=l(this,Zt).createElement("div"),{style:i}=t;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const r=l(this,Zt).createElementNS(xr,"svg");r.setAttribute("width",0),r.setAttribute("height",0),m(this,Or,l(this,Zt).createElementNS(xr,"defs")),t.append(r),r.append(l(this,Or)),l(this,Zt).body.append(t)}return l(this,Or)},lp=function(t){if(t.length===1){const u=t[0],h=new Array(256);for(let f=0;f<256;f++)h[f]=u[f]/255;const d=h.join(",");return[d,d,d]}const[i,r,s]=t,a=new Array(256),o=new Array(256),c=new Array(256);for(let u=0;u<256;u++)a[u]=i[u]/255,o[u]=r[u]/255,c[u]=s[u]/255;return[a.join(","),o.join(","),c.join(",")]},dl=function(t){if(l(this,ro)===void 0){m(this,ro,"");const i=l(this,Zt).URL;i!==l(this,Zt).baseURI&&(tm(i)?we('#createUrl: ignore "data:"-URL for performance reasons.'):m(this,ro,i.split("#",1)[0]))}return`url(${l(this,ro)}#${t})`},kE=function(t){const i=l(this,Zt).createElementNS(xr,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(i)},gy=function(t){const i=l(this,Zt).createElementNS(xr,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(i)},fl=function(t){const i=l(this,Zt).createElementNS(xr,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",t),l(this,K,hl).append(i),i},Nu=function(t,i,r){const s=l(this,Zt).createElementNS(xr,i);s.setAttribute("type","discrete"),s.setAttribute("tableValues",r),t.append(s)},Iu=function(t,i,r,s){const a=l(this,Zt).createElementNS(xr,"feComponentTransfer");s.append(a),A(this,K,Nu).call(this,a,"feFuncR",t),A(this,K,Nu).call(this,a,"feFuncG",i),A(this,K,Nu).call(this,a,"feFuncB",r)},my=function(t,i){const r=l(this,Zt).createElementNS(xr,"feComponentTransfer");i.append(r),A(this,K,Nu).call(this,r,"feFuncA",t)},Du=function(t){return l(this,K,hl).style.color=t,pw(getComputedStyle(l(this,K,hl)).getPropertyValue("color"))};class RE{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(i=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){$e("Abstract method `_fetch` called.")}}class PE extends RE{async _fetch(e){const t=await em(e,"arraybuffer");return new Uint8Array(t)}}sn&&we("Please use the `legacy` build in Node.js environments.");async function LE(n){const t=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(t)}class TM extends TE{}class kM extends EE{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class RM extends _E{async _fetch(e){return LE(e)}}class PM extends RE{async _fetch(e){return LE(e)}}const nn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function yy(n,e){if(!e)return;const t=e[2]-e[0],i=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],t,i),n.clip(r)}class mw{getPattern(){$e("Abstract method `getPattern` called.")}}class LM extends mw{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)t.addColorStop(i[0],i[1]);return t}getPattern(e,t,i,r){let s;if(r===nn.STROKE||r===nn.FILL){const a=t.current.getClippedPathBoundingBox(r,Qe(e))||[0,0,0,0],o=Math.ceil(a[2]-a[0])||1,c=Math.ceil(a[3]-a[1])||1,u=t.cachedCanvases.getCanvas("pattern",o,c),h=u.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-a[0],-a[1]),i=ae.transform(i,[1,0,0,1,a[0],a[1]]),h.transform(...t.baseTransform),this.matrix&&h.transform(...this.matrix),yy(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),s=e.createPattern(u.canvas,"no-repeat");const d=new DOMMatrix(i);s.setTransform(d)}else yy(e,this._bbox),s=this._createGradient(e);return s}}function Vm(n,e,t,i,r,s,a,o){const c=e.coords,u=e.colors,h=n.data,d=n.width*4;let f;c[t+1]>c[i+1]&&(f=t,t=i,i=f,f=s,s=a,a=f),c[i+1]>c[r+1]&&(f=i,i=r,r=f,f=a,a=o,o=f),c[t+1]>c[i+1]&&(f=t,t=i,i=f,f=s,s=a,a=f);const p=(c[t]+e.offsetX)*e.scaleX,g=(c[t+1]+e.offsetY)*e.scaleY,w=(c[i]+e.offsetX)*e.scaleX,S=(c[i+1]+e.offsetY)*e.scaleY,v=(c[r]+e.offsetX)*e.scaleX,y=(c[r+1]+e.offsetY)*e.scaleY;if(g>=y)return;const x=u[s],E=u[s+1],T=u[s+2],_=u[a],R=u[a+1],M=u[a+2],j=u[o],z=u[o+1],V=u[o+2],ue=Math.round(g),pe=Math.round(y);let oe,Ce,W,X,F,P,L,D;for(let U=ue;U<=pe;U++){if(U<S){const te=U<g?0:(g-U)/(g-S);oe=p-(p-w)*te,Ce=x-(x-_)*te,W=E-(E-R)*te,X=T-(T-M)*te}else{let te;U>y?te=1:S===y?te=0:te=(S-U)/(S-y),oe=w-(w-v)*te,Ce=_-(_-j)*te,W=R-(R-z)*te,X=M-(M-V)*te}let O;U<g?O=0:U>y?O=1:O=(g-U)/(g-y),F=p-(p-v)*O,P=x-(x-j)*O,L=E-(E-z)*O,D=T-(T-V)*O;const $=Math.round(Math.min(oe,F)),he=Math.round(Math.max(oe,F));let ie=d*U+$*4;for(let te=$;te<=he;te++)O=(oe-te)/(oe-F),O<0?O=0:O>1&&(O=1),h[ie++]=Ce-(Ce-P)*O|0,h[ie++]=W-(W-L)*O|0,h[ie++]=X-(X-D)*O|0,h[ie++]=255}}function MM(n,e,t){const i=e.coords,r=e.colors;let s,a;switch(e.type){case"lattice":const o=e.verticesPerRow,c=Math.floor(i.length/o)-1,u=o-1;for(s=0;s<c;s++){let h=s*o;for(let d=0;d<u;d++,h++)Vm(n,t,i[h],i[h+1],i[h+o],r[h],r[h+1],r[h+o]),Vm(n,t,i[h+o+1],i[h+1],i[h+o],r[h+o+1],r[h+1],r[h+o])}break;case"triangles":for(s=0,a=i.length;s<a;s+=3)Vm(n,t,i[s],i[s+1],i[s+2],r[s],r[s+1],r[s+2]);break;default:throw new Error("illegal figure")}}class NM extends mw{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,i){const o=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-o,h=Math.ceil(this._bounds[3])-c,d=Math.min(Math.ceil(Math.abs(u*e[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(h*e[1]*1.1)),3e3),p=u/d,g=h/f,w={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-c,scaleX:1/p,scaleY:1/g},S=d+2*2,v=f+2*2,y=i.getCanvas("mesh",S,v),x=y.context,E=x.createImageData(d,f);if(t){const _=E.data;for(let R=0,M=_.length;R<M;R+=4)_[R]=t[0],_[R+1]=t[1],_[R+2]=t[2],_[R+3]=255}for(const _ of this._figures)MM(E,_,w);return x.putImageData(E,2,2),{canvas:y.canvas,offsetX:o-2*p,offsetY:c-2*g,scaleX:p,scaleY:g}}getPattern(e,t,i,r){yy(e,this._bbox);let s;if(r===nn.SHADING)s=ae.singularValueDecompose2dScale(Qe(e));else if(s=ae.singularValueDecompose2dScale(t.baseTransform),this.matrix){const o=ae.singularValueDecompose2dScale(this.matrix);s=[s[0]*o[0],s[1]*o[1]]}const a=this._createMeshCanvas(s,r===nn.SHADING?null:this._background,t.cachedCanvases);return r!==nn.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}class IM extends mw{getPattern(){return"hotpink"}}function DM(n){switch(n[0]){case"RadialAxial":return new LM(n);case"Mesh":return new NM(n);case"Dummy":return new IM}throw new Error(`Unknown IR type: ${n[0]}`)}const Fb={COLORED:1,UNCOLORED:2},bg=class bg{constructor(e,t,i,r,s){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=i,this.canvasGraphicsFactory=r,this.baseTransform=s}createPatternCanvas(e){const{bbox:t,operatorList:i,paintType:r,tilingType:s,color:a,canvasGraphicsFactory:o}=this;let{xstep:c,ystep:u}=this;c=Math.abs(c),u=Math.abs(u),Jg("TilingType: "+s);const h=t[0],d=t[1],f=t[2],p=t[3],g=f-h,w=p-d,S=ae.singularValueDecompose2dScale(this.matrix),v=ae.singularValueDecompose2dScale(this.baseTransform),y=S[0]*v[0],x=S[1]*v[1];let E=g,T=w,_=!1,R=!1;const M=Math.ceil(c*y),j=Math.ceil(u*x),z=Math.ceil(g*y),V=Math.ceil(w*x);M>=z?E=c:_=!0,j>=V?T=u:R=!0;const ue=this.getSizeAndScale(E,this.ctx.canvas.width,y),pe=this.getSizeAndScale(T,this.ctx.canvas.height,x),oe=e.cachedCanvases.getCanvas("pattern",ue.size,pe.size),Ce=oe.context,W=o.createCanvasGraphics(Ce);if(W.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(W,r,a),Ce.translate(-ue.scale*h,-pe.scale*d),W.transform(ue.scale,0,0,pe.scale,0,0),Ce.save(),this.clipBbox(W,h,d,f,p),W.baseTransform=Qe(W.ctx),W.executeOperatorList(i),W.endDrawing(),Ce.restore(),_||R){const X=oe.canvas;_&&(E=c),R&&(T=u);const F=this.getSizeAndScale(E,this.ctx.canvas.width,y),P=this.getSizeAndScale(T,this.ctx.canvas.height,x),L=F.size,D=P.size,U=e.cachedCanvases.getCanvas("pattern-workaround",L,D),O=U.context,$=_?Math.floor(g/c):0,he=R?Math.floor(w/u):0;for(let ie=0;ie<=$;ie++)for(let te=0;te<=he;te++)O.drawImage(X,L*ie,D*te,L,D,0,0,L,D);return{canvas:U.canvas,scaleX:F.scale,scaleY:P.scale,offsetX:h,offsetY:d}}return{canvas:oe.canvas,scaleX:ue.scale,scaleY:pe.scale,offsetX:h,offsetY:d}}getSizeAndScale(e,t,i){const r=Math.max(bg.MAX_PATTERN_SIZE,t);let s=Math.ceil(e*i);return s>=r?s=r:i=s/e,{scale:i,size:s}}clipBbox(e,t,i,r,s){const a=r-t,o=s-i;e.ctx.rect(t,i,a,o),e.current.updateRectMinMax(Qe(e.ctx),[t,i,r,s]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,i){const r=e.ctx,s=e.current;switch(t){case Fb.COLORED:const a=this.ctx;r.fillStyle=a.fillStyle,r.strokeStyle=a.strokeStyle,s.fillColor=a.fillStyle,s.strokeColor=a.strokeStyle;break;case Fb.UNCOLORED:const o=ae.makeHexColor(i[0],i[1],i[2]);r.fillStyle=o,r.strokeStyle=o,s.fillColor=o,s.strokeColor=o;break;default:throw new oM(`Unsupported paint type: ${t}`)}}getPattern(e,t,i,r){let s=i;r!==nn.SHADING&&(s=ae.transform(s,t.baseTransform),this.matrix&&(s=ae.transform(s,this.matrix)));const a=this.createPatternCanvas(t);let o=new DOMMatrix(s);o=o.translate(a.offsetX,a.offsetY),o=o.scale(1/a.scaleX,1/a.scaleY);const c=e.createPattern(a.canvas,"repeat");return c.setTransform(o),c}};de(bg,"MAX_PATTERN_SIZE",3e3);let vy=bg;function OM({src:n,srcPos:e=0,dest:t,width:i,height:r,nonBlackColor:s=4294967295,inverseDecode:a=!1}){const o=gn.isLittleEndian?4278190080:255,[c,u]=a?[s,o]:[o,s],h=i>>3,d=i&7,f=n.length;t=new Uint32Array(t.buffer);let p=0;for(let g=0;g<r;g++){for(const S=e+h;e<S;e++){const v=e<f?n[e]:255;t[p++]=v&128?u:c,t[p++]=v&64?u:c,t[p++]=v&32?u:c,t[p++]=v&16?u:c,t[p++]=v&8?u:c,t[p++]=v&4?u:c,t[p++]=v&2?u:c,t[p++]=v&1?u:c}if(d===0)continue;const w=e<f?n[e++]:255;for(let S=0;S<d;S++)t[p++]=w&1<<7-S?u:c}return{srcPos:e,destPos:p}}const jb=16,zb=100,FM=15,Bb=10,Hb=1e3,Tn=16;function jM(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(i,r){e.translate(i,r),this.__originalTranslate(i,r)},n.scale=function(i,r){e.scale(i,r),this.__originalScale(i,r)},n.transform=function(i,r,s,a,o,c){e.transform(i,r,s,a,o,c),this.__originalTransform(i,r,s,a,o,c)},n.setTransform=function(i,r,s,a,o,c){e.setTransform(i,r,s,a,o,c),this.__originalSetTransform(i,r,s,a,o,c)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(i){e.rotate(i),this.__originalRotate(i)},n.clip=function(i){e.clip(i),this.__originalClip(i)},n.moveTo=function(t,i){e.moveTo(t,i),this.__originalMoveTo(t,i)},n.lineTo=function(t,i){e.lineTo(t,i),this.__originalLineTo(t,i)},n.bezierCurveTo=function(t,i,r,s,a,o){e.bezierCurveTo(t,i,r,s,a,o),this.__originalBezierCurveTo(t,i,r,s,a,o)},n.rect=function(t,i,r,s){e.rect(t,i,r,s),this.__originalRect(t,i,r,s)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class zM{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,i){let r;return this.cache[e]!==void 0?(r=this.cache[e],this.canvasFactory.reset(r,t,i)):(r=this.canvasFactory.create(t,i),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Of(n,e,t,i,r,s,a,o,c,u){const[h,d,f,p,g,w]=Qe(n);if(d===0&&f===0){const y=a*h+g,x=Math.round(y),E=o*p+w,T=Math.round(E),_=(a+c)*h+g,R=Math.abs(Math.round(_)-x)||1,M=(o+u)*p+w,j=Math.abs(Math.round(M)-T)||1;return n.setTransform(Math.sign(h),0,0,Math.sign(p),x,T),n.drawImage(e,t,i,r,s,0,0,R,j),n.setTransform(h,d,f,p,g,w),[R,j]}if(h===0&&p===0){const y=o*f+g,x=Math.round(y),E=a*d+w,T=Math.round(E),_=(o+u)*f+g,R=Math.abs(Math.round(_)-x)||1,M=(a+c)*d+w,j=Math.abs(Math.round(M)-T)||1;return n.setTransform(0,Math.sign(d),Math.sign(f),0,x,T),n.drawImage(e,t,i,r,s,0,0,j,R),n.setTransform(h,d,f,p,g,w),[j,R]}n.drawImage(e,t,i,r,s,a,o,c,u);const S=Math.hypot(h,d),v=Math.hypot(f,p);return[S*c,v*u]}function BM(n){const{width:e,height:t}=n;if(e>Hb||t>Hb)return null;const i=1e3,r=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),s=e+1;let a=new Uint8Array(s*(t+1)),o,c,u;const h=e+7&-8;let d=new Uint8Array(h*t),f=0;for(const v of n.data){let y=128;for(;y>0;)d[f++]=v&y?0:255,y>>=1}let p=0;for(f=0,d[f]!==0&&(a[0]=1,++p),c=1;c<e;c++)d[f]!==d[f+1]&&(a[c]=d[f]?2:1,++p),f++;for(d[f]!==0&&(a[c]=2,++p),o=1;o<t;o++){f=o*h,u=o*s,d[f-h]!==d[f]&&(a[u]=d[f]?1:8,++p);let v=(d[f]?4:0)+(d[f-h]?8:0);for(c=1;c<e;c++)v=(v>>2)+(d[f+1]?4:0)+(d[f-h+1]?8:0),r[v]&&(a[u+c]=r[v],++p),f++;if(d[f-h]!==d[f]&&(a[u+c]=d[f]?2:4,++p),p>i)return null}for(f=h*(t-1),u=o*s,d[f]!==0&&(a[u]=8,++p),c=1;c<e;c++)d[f]!==d[f+1]&&(a[u+c]=d[f]?4:8,++p),f++;if(d[f]!==0&&(a[u+c]=4,++p),p>i)return null;const g=new Int32Array([0,s,-1,0,-s,0,0,0,1]),w=new Path2D;for(o=0;p&&o<=t;o++){let v=o*s;const y=v+e;for(;v<y&&!a[v];)v++;if(v===y)continue;w.moveTo(v%s,o);const x=v;let E=a[v];do{const T=g[E];do v+=T;while(!a[v]);const _=a[v];_!==5&&_!==10?(E=_,a[v]=0):(E=_&51*E>>4,a[v]&=E>>2|E<<2),w.lineTo(v%s,v/s|0),a[v]||--p}while(x!==v);--o}return d=null,a=null,function(v){v.save(),v.scale(1/e,-1/t),v.translate(0,-t),v.fill(w),v.beginPath(),v.restore()}}class $b{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=HS,this.textMatrixScale=1,this.fontMatrix=W0,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Kt.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,i){[t,i]=ae.applyTransform([t,i],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(e,t){const i=ae.applyTransform(t,e),r=ae.applyTransform(t.slice(2),e),s=ae.applyTransform([t[0],t[3]],e),a=ae.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,i[0],r[0],s[0],a[0]),this.minY=Math.min(this.minY,i[1],r[1],s[1],a[1]),this.maxX=Math.max(this.maxX,i[0],r[0],s[0],a[0]),this.maxY=Math.max(this.maxY,i[1],r[1],s[1],a[1])}updateScalingPathMinMax(e,t){ae.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,i,r,s,a,o,c,u,h){const d=ae.bezierBoundingBox(t,i,r,s,a,o,c,u,h);h||this.updateRectMinMax(e,d)}getPathBoundingBox(e=nn.FILL,t=null){const i=[this.minX,this.minY,this.maxX,this.maxY];if(e===nn.STROKE){t||$e("Stroke bounding box must include transform.");const r=ae.singularValueDecompose2dScale(t),s=r[0]*this.lineWidth/2,a=r[1]*this.lineWidth/2;i[0]-=s,i[1]-=a,i[2]+=s,i[3]+=a}return i}updateClipFromPath(){const e=ae.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=nn.FILL,t=null){return ae.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function Ub(n,e){if(e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,i=e.width,r=t%Tn,s=(t-r)/Tn,a=r===0?s:s+1,o=n.createImageData(i,Tn);let c=0,u;const h=e.data,d=o.data;let f,p,g,w;if(e.kind===Jf.GRAYSCALE_1BPP){const S=h.byteLength,v=new Uint32Array(d.buffer,0,d.byteLength>>2),y=v.length,x=i+7>>3,E=4294967295,T=gn.isLittleEndian?4278190080:255;for(f=0;f<a;f++){for(g=f<s?Tn:r,u=0,p=0;p<g;p++){const _=S-c;let R=0;const M=_>x?i:_*8-7,j=M&-8;let z=0,V=0;for(;R<j;R+=8)V=h[c++],v[u++]=V&128?E:T,v[u++]=V&64?E:T,v[u++]=V&32?E:T,v[u++]=V&16?E:T,v[u++]=V&8?E:T,v[u++]=V&4?E:T,v[u++]=V&2?E:T,v[u++]=V&1?E:T;for(;R<M;R++)z===0&&(V=h[c++],z=128),v[u++]=V&z?E:T,z>>=1}for(;u<y;)v[u++]=0;n.putImageData(o,0,f*Tn)}}else if(e.kind===Jf.RGBA_32BPP){for(p=0,w=i*Tn*4,f=0;f<s;f++)d.set(h.subarray(c,c+w)),c+=w,n.putImageData(o,0,p),p+=Tn;f<a&&(w=i*r*4,d.set(h.subarray(c,c+w)),n.putImageData(o,0,p))}else if(e.kind===Jf.RGB_24BPP)for(g=Tn,w=i*g,f=0;f<a;f++){for(f>=s&&(g=r,w=i*g),u=0,p=w;p--;)d[u++]=h[c++],d[u++]=h[c++],d[u++]=h[c++],d[u++]=255;n.putImageData(o,0,f*Tn)}else throw new Error(`bad image kind: ${e.kind}`)}function Gb(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,i=e.width,r=t%Tn,s=(t-r)/Tn,a=r===0?s:s+1,o=n.createImageData(i,Tn);let c=0;const u=e.data,h=o.data;for(let d=0;d<a;d++){const f=d<s?Tn:r;({srcPos:c}=OM({src:u,srcPos:c,dest:h,width:i,height:f,nonBlackColor:0})),n.putImageData(o,0,d*Tn)}}function wu(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of t)n[i]!==void 0&&(e[i]=n[i]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function Ff(n){if(n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0),!sn){const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}}function Vb(n,e){if(e)return!0;const t=ae.singularValueDecompose2dScale(n);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const i=Math.fround((globalThis.devicePixelRatio||1)*pa.PDF_TO_CSS_UNITS);return t[0]<=i&&t[1]<=i}const HM=["butt","round","square"],$M=["miter","round","bevel"],UM={},Wb={};var Wi,wy,by,Ay;const Aw=class Aw{constructor(e,t,i,r,s,{optionalContentConfig:a,markedContentStack:o=null},c,u){b(this,Wi);this.ctx=e,this.current=new $b(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=i,this.canvasFactory=r,this.filterFactory=s,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=a,this.cachedCanvases=new zM(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:i=!1,background:r=null}){const s=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,s,a),this.ctx.fillStyle=o,i){const c=this.cachedCanvases.getCanvas("transparent",s,a);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...Qe(this.compositeCtx))}this.ctx.save(),Ff(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Qe(this.ctx)}executeOperatorList(e,t,i,r){const s=e.argsArray,a=e.fnArray;let o=t||0;const c=s.length;if(c===o)return o;const u=c-o>Bb&&typeof i=="function",h=u?Date.now()+FM:0;let d=0;const f=this.commonObjs,p=this.objs;let g;for(;;){if(r!==void 0&&o===r.nextBreakPoint)return r.breakIt(o,i),o;if(g=a[o],g!==_i.dependency)this[g].apply(this,s[o]);else for(const w of s[o]){const S=w.startsWith("g_")?f:p;if(!S.has(w))return S.get(w,i),o}if(o++,o===c)return o;if(u&&++d>Bb){if(Date.now()>h)return i(),o;d=0}}}endDrawing(){A(this,Wi,wy).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),A(this,Wi,by).call(this)}_scaleImage(e,t){const i=e.width??e.displayWidth,r=e.height??e.displayHeight;let s=Math.max(Math.hypot(t[0],t[1]),1),a=Math.max(Math.hypot(t[2],t[3]),1),o=i,c=r,u="prescale1",h,d;for(;s>2&&o>1||a>2&&c>1;){let f=o,p=c;s>2&&o>1&&(f=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),s/=o/f),a>2&&c>1&&(p=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,a/=c/p),h=this.cachedCanvases.getCanvas(u,f,p),d=h.context,d.clearRect(0,0,f,p),d.drawImage(e,0,0,o,c,0,0,f,p),e=h.canvas,o=f,c=p,u=u==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:o,paintHeight:c}}_createMaskCanvas(e){const t=this.ctx,{width:i,height:r}=e,s=this.current.fillColor,a=this.current.patternFill,o=Qe(t);let c,u,h,d;if((e.bitmap||e.data)&&e.count>1){const M=e.bitmap||e.data.buffer;u=JSON.stringify(a?o:[o.slice(0,4),s]),c=this._cachedBitmapsMap.get(M),c||(c=new Map,this._cachedBitmapsMap.set(M,c));const j=c.get(u);if(j&&!a){const z=Math.round(Math.min(o[0],o[2])+o[4]),V=Math.round(Math.min(o[1],o[3])+o[5]);return{canvas:j,offsetX:z,offsetY:V}}h=j}h||(d=this.cachedCanvases.getCanvas("maskCanvas",i,r),Gb(d.context,e));let f=ae.transform(o,[1/i,0,0,-1/r,0,0]);f=ae.transform(f,[1,0,0,1,0,-r]);const[p,g,w,S]=ae.getAxialAlignedBoundingBox([0,0,i,r],f),v=Math.round(w-p)||1,y=Math.round(S-g)||1,x=this.cachedCanvases.getCanvas("fillCanvas",v,y),E=x.context,T=p,_=g;E.translate(-T,-_),E.transform(...f),h||(h=this._scaleImage(d.canvas,Ki(E)),h=h.img,c&&a&&c.set(u,h)),E.imageSmoothingEnabled=Vb(Qe(E),e.interpolate),Of(E,h,0,0,h.width,h.height,0,0,i,r),E.globalCompositeOperation="source-in";const R=ae.transform(Ki(E),[1,0,0,1,-T,-_]);return E.fillStyle=a?s.getPattern(t,this,R,nn.FILL):s,E.fillRect(0,0,i,r),c&&!a&&(this.cachedCanvases.delete("fillCanvas"),c.set(u,x.canvas)),{canvas:x.canvas,offsetX:Math.round(T),offsetY:Math.round(_)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=HM[e]}setLineJoin(e){this.ctx.lineJoin=$M[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(e),i.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,i]of e)switch(t){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(i,e,t);this.suspendedCtx=this.ctx,this.ctx=r.context;const s=this.ctx;s.setTransform(...Qe(this.suspendedCtx)),wu(this.suspendedCtx,s),jM(s,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),wu(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,i,r){const s=r[0],a=r[1],o=r[2]-s,c=r[3]-a;o===0||c===0||(this.genericComposeSMask(t.context,i,o,c,t.subtype,t.backdrop,t.transferMap,s,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(i.canvas,0,0),e.restore())}genericComposeSMask(e,t,i,r,s,a,o,c,u,h,d){let f=e.canvas,p=c-h,g=u-d;if(a){const S=ae.makeHexColor(...a);if(p<0||g<0||p+i>f.width||g+r>f.height){const v=this.cachedCanvases.getCanvas("maskExtension",i,r),y=v.context;y.drawImage(f,-p,-g),y.globalCompositeOperation="destination-atop",y.fillStyle=S,y.fillRect(0,0,i,r),y.globalCompositeOperation="source-over",f=v.canvas,p=g=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const v=new Path2D;v.rect(p,g,i,r),e.clip(v),e.globalCompositeOperation="destination-atop",e.fillStyle=S,e.fillRect(p,g,i,r),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),s==="Alpha"&&o?t.filter=this.filterFactory.addAlphaFilter(o):s==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(o));const w=new Path2D;w.rect(c,u,i,r),t.clip(w),t.globalCompositeOperation="destination-in",t.drawImage(f,p,g,i,r,c,u,i,r),t.restore()}save(){this.inSMaskMode?(wu(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),wu(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,i,r,s,a){this.ctx.transform(e,t,i,r,s,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,i){const r=this.ctx,s=this.current;let a=s.x,o=s.y,c,u;const h=Qe(r),d=h[0]===0&&h[3]===0||h[1]===0&&h[2]===0,f=d?i.slice(0):null;for(let p=0,g=0,w=e.length;p<w;p++)switch(e[p]|0){case _i.rectangle:a=t[g++],o=t[g++];const S=t[g++],v=t[g++],y=a+S,x=o+v;r.moveTo(a,o),S===0||v===0?r.lineTo(y,x):(r.lineTo(y,o),r.lineTo(y,x),r.lineTo(a,x)),d||s.updateRectMinMax(h,[a,o,y,x]),r.closePath();break;case _i.moveTo:a=t[g++],o=t[g++],r.moveTo(a,o),d||s.updatePathMinMax(h,a,o);break;case _i.lineTo:a=t[g++],o=t[g++],r.lineTo(a,o),d||s.updatePathMinMax(h,a,o);break;case _i.curveTo:c=a,u=o,a=t[g+4],o=t[g+5],r.bezierCurveTo(t[g],t[g+1],t[g+2],t[g+3],a,o),s.updateCurvePathMinMax(h,c,u,t[g],t[g+1],t[g+2],t[g+3],a,o,f),g+=6;break;case _i.curveTo2:c=a,u=o,r.bezierCurveTo(a,o,t[g],t[g+1],t[g+2],t[g+3]),s.updateCurvePathMinMax(h,c,u,a,o,t[g],t[g+1],t[g+2],t[g+3],f),a=t[g+2],o=t[g+3],g+=4;break;case _i.curveTo3:c=a,u=o,a=t[g+2],o=t[g+3],r.bezierCurveTo(t[g],t[g+1],a,o,a,o),s.updateCurvePathMinMax(h,c,u,t[g],t[g+1],a,o,a,o,f),g+=4;break;case _i.closePath:r.closePath();break}d&&s.updateScalingPathMinMax(h,f),s.setCurrentPoint(a,o)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,i=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof i=="object"&&(i!=null&&i.getPattern)?(t.save(),t.strokeStyle=i.getPattern(t,this,Ki(t),nn.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,i=this.current.fillColor,r=this.current.patternFill;let s=!1;r&&(t.save(),t.fillStyle=i.getPattern(t,this,Ki(t),nn.FILL),s=!0);const a=this.current.getClippedPathBoundingBox();this.contentVisible&&a!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),s&&t.restore(),e&&this.consumePath(a)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=UM}eoClip(){this.pendingClip=Wb}beginText(){this.current.textMatrix=HS,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}const i=new Path2D,r=t.getTransform().invertSelf();for(const{transform:s,x:a,y:o,fontSize:c,path:u}of e)i.addPath(u,new DOMMatrix(s).preMultiplySelf(r).translate(a,o).scale(c,-c));t.clip(i),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var h;const i=this.commonObjs.get(e),r=this.current;if(!i)throw new Error(`Can't find font for ${e}`);if(r.fontMatrix=i.fontMatrix||W0,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&we("Invalid font matrix for font "+e),t<0?(t=-t,r.fontDirection=-1):r.fontDirection=1,this.current.font=i,this.current.fontSize=t,i.isType3Font)return;const s=i.loadedName||"sans-serif",a=((h=i.systemFontInfo)==null?void 0:h.css)||`"${s}", ${i.fallbackName}`;let o="normal";i.black?o="900":i.bold&&(o="bold");const c=i.italic?"italic":"normal";let u=t;t<jb?u=jb:t>zb&&(u=zb),this.current.fontSizeScale=t/u,this.ctx.font=`${c} ${o} ${u}px ${a}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,i,r,s,a){this.current.textMatrix=[e,t,i,r,s,a],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,i,r,s){const a=this.ctx,o=this.current,c=o.font,u=o.textRenderingMode,h=o.fontSize/o.fontSizeScale,d=u&Kt.FILL_STROKE_MASK,f=!!(u&Kt.ADD_TO_PATH_FLAG),p=o.patternFill&&!c.missingFile,g=o.patternStroke&&!c.missingFile;let w;if((c.disableFontFace||f||p||g)&&(w=c.getPathGenerator(this.commonObjs,e)),c.disableFontFace||p||g){if(a.save(),a.translate(t,i),a.scale(h,-h),d===Kt.FILL||d===Kt.FILL_STROKE)if(r){const S=a.getTransform();a.setTransform(...r),a.fill(A(this,Wi,Ay).call(this,w,S,r))}else a.fill(w);if(d===Kt.STROKE||d===Kt.FILL_STROKE)if(s){const S=a.getTransform();a.setTransform(...s),a.stroke(A(this,Wi,Ay).call(this,w,S,s))}else a.lineWidth/=h,a.stroke(w);a.restore()}else(d===Kt.FILL||d===Kt.FILL_STROKE)&&a.fillText(e,t,i),(d===Kt.STROKE||d===Kt.FILL_STROKE)&&a.strokeText(e,t,i);f&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Qe(a),x:t,y:i,fontSize:h,path:w})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let i=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){i=!0;break}return xe(this,"isFontSubpixelAAEnabled",i)}showText(e){const t=this.current,i=t.font;if(i.isType3Font)return this.showType3Text(e);const r=t.fontSize;if(r===0)return;const s=this.ctx,a=t.fontSizeScale,o=t.charSpacing,c=t.wordSpacing,u=t.fontDirection,h=t.textHScale*u,d=e.length,f=i.vertical,p=f?1:-1,g=i.defaultVMetrics,w=r*t.fontMatrix[0],S=t.textRenderingMode===Kt.FILL&&!i.disableFontFace&&!t.patternFill;s.save(),s.transform(...t.textMatrix),s.translate(t.x,t.y+t.textRise),u>0?s.scale(h,-1):s.scale(h,1);let v,y;if(t.patternFill){s.save();const R=t.fillColor.getPattern(s,this,Ki(s),nn.FILL);v=Qe(s),s.restore(),s.fillStyle=R}if(t.patternStroke){s.save();const R=t.strokeColor.getPattern(s,this,Ki(s),nn.STROKE);y=Qe(s),s.restore(),s.strokeStyle=R}let x=t.lineWidth;const E=t.textMatrixScale;if(E===0||x===0){const R=t.textRenderingMode&Kt.FILL_STROKE_MASK;(R===Kt.STROKE||R===Kt.FILL_STROKE)&&(x=this.getSinglePixelWidth())}else x/=E;if(a!==1&&(s.scale(a,a),x/=a),s.lineWidth=x,i.isInvalidPDFjsFont){const R=[];let M=0;for(const j of e)R.push(j.unicode),M+=j.width;s.fillText(R.join(""),0,0),t.x+=M*w*h,s.restore(),this.compose();return}let T=0,_;for(_=0;_<d;++_){const R=e[_];if(typeof R=="number"){T+=p*R*r/1e3;continue}let M=!1;const j=(R.isSpace?c:0)+o,z=R.fontChar,V=R.accent;let ue,pe,oe=R.width;if(f){const W=R.vmetric||g,X=-(R.vmetric?W[1]:oe*.5)*w,F=W[2]*w;oe=W?-W[0]:oe,ue=X/a,pe=(T+F)/a}else ue=T/a,pe=0;if(i.remeasure&&oe>0){const W=s.measureText(z).width*1e3/r*a;if(oe<W&&this.isFontSubpixelAAEnabled){const X=oe/W;M=!0,s.save(),s.scale(X,1),ue/=X}else oe!==W&&(ue+=(oe-W)/2e3*r/a)}if(this.contentVisible&&(R.isInFont||i.missingFile)){if(S&&!V)s.fillText(z,ue,pe);else if(this.paintChar(z,ue,pe,v,y),V){const W=ue+r*V.offset.x/a,X=pe-r*V.offset.y/a;this.paintChar(V.fontChar,W,X,v,y)}}const Ce=f?oe*w-j*u:oe*w+j*u;T+=Ce,M&&s.restore()}f?t.y-=T:t.x+=T*h,s.restore(),this.compose()}showType3Text(e){const t=this.ctx,i=this.current,r=i.font,s=i.fontSize,a=i.fontDirection,o=r.vertical?1:-1,c=i.charSpacing,u=i.wordSpacing,h=i.textHScale*a,d=i.fontMatrix||W0,f=e.length,p=i.textRenderingMode===Kt.INVISIBLE;let g,w,S,v;if(!(p||s===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...i.textMatrix),t.translate(i.x,i.y),t.scale(h,a),g=0;g<f;++g){if(w=e[g],typeof w=="number"){v=o*w*s/1e3,this.ctx.translate(v,0),i.x+=v*h;continue}const y=(w.isSpace?u:0)+c,x=r.charProcOperatorList[w.operatorListId];if(!x){we(`Type3 character "${w.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=w,this.save(),t.scale(s,s),t.transform(...d),this.executeOperatorList(x),this.restore()),S=ae.applyTransform([w.width,0],d)[0]*s+y,t.translate(S,0),i.x+=S*h}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,i,r,s,a){this.ctx.rect(i,r,s-i,a-r),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const i=e[1],r=this.baseTransform||Qe(this.ctx),s={createCanvasGraphics:a=>new Aw(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new vy(e,i,this.ctx,s,r)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,i){this.ctx.strokeStyle=this.current.strokeColor=ae.makeHexColor(e,t,i),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t,i){this.ctx.fillStyle=this.current.fillColor=ae.makeHexColor(e,t,i),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let i;return this.cachedPatterns.has(e)?i=this.cachedPatterns.get(e):(i=DM(this.getObject(e)),this.cachedPatterns.set(e,i)),t&&(i.matrix=t),i}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const i=this._getPattern(e);t.fillStyle=i.getPattern(t,this,Ki(t),nn.SHADING);const r=Ki(t);if(r){const{width:s,height:a}=t.canvas,[o,c,u,h]=ae.getAxialAlignedBoundingBox([0,0,s,a],r);this.ctx.fillRect(o,c,u-o,h-c)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){$e("Should not call beginInlineImage")}beginImageData(){$e("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=Qe(this.ctx),t)){const i=t[2]-t[0],r=t[3]-t[1];this.ctx.rect(t[0],t[1],i,r),this.current.updateRectMinMax(Qe(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||Jg("TODO: Support non-isolated groups."),e.knockout&&we("Knockout groups not supported.");const i=Qe(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let r=ae.getAxialAlignedBoundingBox(e.bbox,Qe(t));const s=[0,0,t.canvas.width,t.canvas.height];r=ae.intersect(r,s)||[0,0,0,0];const a=Math.floor(r[0]),o=Math.floor(r[1]),c=Math.max(Math.ceil(r[2])-a,1),u=Math.max(Math.ceil(r[3])-o,1);this.current.startNewPathAndClipBox([0,0,c,u]);let h="groupAt"+this.groupLevel;e.smask&&(h+="_smask_"+this.smaskCounter++%2);const d=this.cachedCanvases.getCanvas(h,c,u),f=d.context;f.translate(-a,-o),f.transform(...i),e.smask?this.smaskStack.push({canvas:d.canvas,context:f,offsetX:a,offsetY:o,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(a,o),t.save()),wu(t,f),this.ctx=f,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const r=Qe(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...r);const s=ae.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],r);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(s)}}beginAnnotation(e,t,i,r,s){if(A(this,Wi,wy).call(this),Ff(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const a=t[2]-t[0],o=t[3]-t[1];if(s&&this.annotationCanvasMap){i=i.slice(),i[4]-=t[0],i[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=a,t[3]=o;const[c,u]=ae.singularValueDecompose2dScale(Qe(this.ctx)),{viewportScale:h}=this,d=Math.ceil(a*this.outputScaleX*h),f=Math.ceil(o*this.outputScaleY*h);this.annotationCanvas=this.canvasFactory.create(d,f);const{canvas:p,context:g}=this.annotationCanvas;this.annotationCanvasMap.set(e,p),this.annotationCanvas.savedCtx=this.ctx,this.ctx=g,this.ctx.save(),this.ctx.setTransform(c,0,0,-u,0,o*u),Ff(this.ctx)}else Ff(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],a,o),this.ctx.clip(),this.ctx.beginPath()}this.current=new $b(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),A(this,Wi,by).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const i=this.ctx,r=this.processingType3;if(r&&(r.compiled===void 0&&(r.compiled=BM(e)),r.compiled)){r.compiled(i);return}const s=this._createMaskCanvas(e),a=s.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(a,s.offsetX,s.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,i=0,r=0,s,a){if(!this.contentVisible)return;e=this.getObject(e.data,e);const o=this.ctx;o.save();const c=Qe(o);o.transform(t,i,r,s,0,0);const u=this._createMaskCanvas(e);o.setTransform(1,0,0,1,u.offsetX-c[4],u.offsetY-c[5]);for(let h=0,d=a.length;h<d;h+=2){const f=ae.transform(c,[t,i,r,s,a[h],a[h+1]]),[p,g]=ae.applyTransform([0,0],f);o.drawImage(u.canvas,p,g)}o.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,i=this.current.fillColor,r=this.current.patternFill;for(const s of e){const{data:a,width:o,height:c,transform:u}=s,h=this.cachedCanvases.getCanvas("maskCanvas",o,c),d=h.context;d.save();const f=this.getObject(a,s);Gb(d,f),d.globalCompositeOperation="source-in",d.fillStyle=r?i.getPattern(d,this,Ki(t),nn.FILL):i,d.fillRect(0,0,o,c),d.restore(),t.save(),t.transform(...u),t.scale(1,-1),Of(t,h.canvas,0,0,o,c,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){we("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,i,r){if(!this.contentVisible)return;const s=this.getObject(e);if(!s){we("Dependent image isn't ready yet");return}const a=s.width,o=s.height,c=[];for(let u=0,h=r.length;u<h;u+=2)c.push({transform:[t,0,0,i,r[u],r[u+1]],x:0,y:0,w:a,h:o});this.paintInlineImageXObjectGroup(s,c)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:i,height:r}=e,s=this.cachedCanvases.getCanvas("inlineImage",i,r),a=s.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",s.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,i=e.height,r=this.ctx;if(this.save(),!sn){const{filter:o}=r;o!=="none"&&o!==""&&(r.filter="none")}r.scale(1/t,-1/i);let s;if(e.bitmap)s=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)s=e;else{const c=this.cachedCanvases.getCanvas("inlineImage",t,i).context;Ub(c,e),s=this.applyTransferMapsToCanvas(c)}const a=this._scaleImage(s,Ki(r));r.imageSmoothingEnabled=Vb(Qe(r),e.interpolate),Of(r,a.img,0,0,a.paintWidth,a.paintHeight,0,-i,t,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const i=this.ctx;let r;if(e.bitmap)r=e.bitmap;else{const s=e.width,a=e.height,c=this.cachedCanvases.getCanvas("inlineImage",s,a).context;Ub(c,e),r=this.applyTransferMapsToCanvas(c)}for(const s of t)i.save(),i.transform(...s.transform),i.scale(1,-1),Of(i,r,s.x,s.y,s.w,s.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const i=this.ctx;this.pendingClip&&(t||(this.pendingClip===Wb?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Qe(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),i=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(i,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:i,c:r,d:s}=this.ctx.getTransform();let a,o;if(i===0&&r===0){const c=Math.abs(t),u=Math.abs(s);if(c===u)if(e===0)a=o=1/c;else{const h=c*e;a=o=h<1?1/h:1}else if(e===0)a=1/c,o=1/u;else{const h=c*e,d=u*e;a=h<1?1/h:1,o=d<1?1/d:1}}else{const c=Math.abs(t*s-i*r),u=Math.hypot(t,i),h=Math.hypot(r,s);if(e===0)a=h/c,o=u/c;else{const d=e*c;a=h>d?h/d:1,o=u>d?u/d:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:i}=this.current,[r,s]=this.getScaleForStroking();if(t.lineWidth=i||1,r===1&&s===1){t.stroke();return}const a=t.getLineDash();if(e&&t.save(),t.scale(r,s),a.length>0){const o=Math.max(r,s);t.setLineDash(a.map(c=>c/o)),t.lineDashOffset/=o}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};Wi=new WeakSet,wy=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},by=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},Ay=function(e,t,i){const r=new Path2D;return r.addPath(e,new DOMMatrix(i).invertSelf().multiplySelf(t)),r};let jl=Aw;for(const n in _i)jl.prototype[n]!==void 0&&(jl.prototype[_i[n]]=jl.prototype[n]);var Jh,Zh;class es{static get workerPort(){return l(this,Jh)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");m(this,Jh,e)}static get workerSrc(){return l(this,Zh)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");m(this,Zh,e)}}Jh=new WeakMap,Zh=new WeakMap,b(es,Jh,null),b(es,Zh,"");var oo,ed;class GM{constructor({parsedData:e,rawData:t}){b(this,oo);b(this,ed);m(this,oo,e),m(this,ed,t)}getRaw(){return l(this,ed)}get(e){return l(this,oo).get(e)??null}getAll(){return cw(l(this,oo))}has(e){return l(this,oo).has(e)}}oo=new WeakMap,ed=new WeakMap;const pl=Symbol("INTERNAL");var td,nd,id,ic;class VM{constructor(e,{name:t,intent:i,usage:r,rbGroups:s}){b(this,td,!1);b(this,nd,!1);b(this,id,!1);b(this,ic,!0);m(this,td,!!(e&Xn.DISPLAY)),m(this,nd,!!(e&Xn.PRINT)),this.name=t,this.intent=i,this.usage=r,this.rbGroups=s}get visible(){if(l(this,id))return l(this,ic);if(!l(this,ic))return!1;const{print:e,view:t}=this.usage;return l(this,td)?(t==null?void 0:t.viewState)!=="OFF":l(this,nd)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,i=!1){e!==pl&&$e("Internal method `_setVisible` called."),m(this,id,i),m(this,ic,t)}}td=new WeakMap,nd=new WeakMap,id=new WeakMap,ic=new WeakMap;var Ds,Fe,rc,sc,rd,xy;class WM{constructor(e,t=Xn.DISPLAY){b(this,rd);b(this,Ds,null);b(this,Fe,new Map);b(this,rc,null);b(this,sc,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,m(this,sc,e.order);for(const i of e.groups)l(this,Fe).set(i.id,new VM(t,i));if(e.baseState==="OFF")for(const i of l(this,Fe).values())i._setVisible(pl,!1);for(const i of e.on)l(this,Fe).get(i)._setVisible(pl,!0);for(const i of e.off)l(this,Fe).get(i)._setVisible(pl,!1);m(this,rc,this.getHash())}}isVisible(e){if(l(this,Fe).size===0)return!0;if(!e)return Jg("Optional content group not defined."),!0;if(e.type==="OCG")return l(this,Fe).has(e.id)?l(this,Fe).get(e.id).visible:(we(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return A(this,rd,xy).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!l(this,Fe).has(t))return we(`Optional content group not found: ${t}`),!0;if(l(this,Fe).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!l(this,Fe).has(t))return we(`Optional content group not found: ${t}`),!0;if(!l(this,Fe).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!l(this,Fe).has(t))return we(`Optional content group not found: ${t}`),!0;if(!l(this,Fe).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!l(this,Fe).has(t))return we(`Optional content group not found: ${t}`),!0;if(l(this,Fe).get(t).visible)return!1}return!0}return we(`Unknown optional content policy ${e.policy}.`),!0}return we(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,i=!0){var s;const r=l(this,Fe).get(e);if(!r){we(`Optional content group not found: ${e}`);return}if(i&&t&&r.rbGroups.length)for(const a of r.rbGroups)for(const o of a)o!==e&&((s=l(this,Fe).get(o))==null||s._setVisible(pl,!1,!0));r._setVisible(pl,!!t,!0),m(this,Ds,null)}setOCGState({state:e,preserveRB:t}){let i;for(const r of e){switch(r){case"ON":case"OFF":case"Toggle":i=r;continue}const s=l(this,Fe).get(r);if(s)switch(i){case"ON":this.setVisibility(r,!0,t);break;case"OFF":this.setVisibility(r,!1,t);break;case"Toggle":this.setVisibility(r,!s.visible,t);break}}m(this,Ds,null)}get hasInitialVisibility(){return l(this,rc)===null||this.getHash()===l(this,rc)}getOrder(){return l(this,Fe).size?l(this,sc)?l(this,sc).slice():[...l(this,Fe).keys()]:null}getGroups(){return l(this,Fe).size>0?cw(l(this,Fe)):null}getGroup(e){return l(this,Fe).get(e)||null}getHash(){if(l(this,Ds)!==null)return l(this,Ds);const e=new vE;for(const[t,i]of l(this,Fe))e.update(`${t}:${i.visible}`);return m(this,Ds,e.hexdigest())}}Ds=new WeakMap,Fe=new WeakMap,rc=new WeakMap,sc=new WeakMap,rd=new WeakSet,xy=function(e){const t=e.length;if(t<2)return!0;const i=e[0];for(let r=1;r<t;r++){const s=e[r];let a;if(Array.isArray(s))a=A(this,rd,xy).call(this,s);else if(l(this,Fe).has(s))a=l(this,Fe).get(s).visible;else return we(`Optional content group not found: ${s}`),!0;switch(i){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return i==="And"};class XM{constructor(e,{disableRange:t=!1,disableStream:i=!1}){wt(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:s,progressiveDone:a,contentDispositionFilename:o}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,(s==null?void 0:s.length)>0){const c=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!i,this._isRangeSupported=!t,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((c,u)=>{this._onReceiveData({begin:c,chunk:u})}),e.addProgressListener((c,u)=>{this._onProgress({loaded:c,total:u})}),e.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const i=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const r=this._rangeReaders.some(function(s){return s._begin!==e?!1:(s._enqueue(i),!0)});wt(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,i,r,s;e.total===void 0?(i=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||i.call(t,{loaded:e.loaded}):(s=(r=this._fullRequestReader)==null?void 0:r.onProgress)==null||s.call(r,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){wt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new YM(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new KM(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeReaders.slice(0))i.cancel(e);this._pdfDataRangeTransport.abort()}}class YM{constructor(e,t,i=!1,r=null){this._stream=e,this._done=i||!1,this._filename=dw(r)?r:null,this._queuedChunks=t||[],this._loaded=0;for(const s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class KM{constructor(e,t,i){this._stream=e,this._begin=t,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function qM(n){let e=!0,t=i("filename\\*","i").exec(n);if(t){t=t[1];let h=o(t);return h=unescape(h),h=c(h),h=u(h),s(h)}if(t=a(n),t){const h=u(t);return s(h)}if(t=i("filename","i").exec(n),t){t=t[1];let h=o(t);return h=u(h),s(h)}function i(h,d){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function r(h,d){if(h){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const f=new TextDecoder(h,{fatal:!0}),p=Zg(d);d=f.decode(p),e=!1}catch{}}return d}function s(h){return e&&/[\x80-\xff]/.test(h)&&(h=r("utf-8",h),e&&(h=r("iso-8859-1",h))),h}function a(h){const d=[];let f;const p=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=p.exec(h))!==null;){let[,w,S,v]=f;if(w=parseInt(w,10),w in d){if(w===0)break;continue}d[w]=[S,v]}const g=[];for(let w=0;w<d.length&&w in d;++w){let[S,v]=d[w];v=o(v),S&&(v=unescape(v),w===0&&(v=c(v))),g.push(v)}return g.join("")}function o(h){if(h.startsWith('"')){const d=h.slice(1).split('\\"');for(let f=0;f<d.length;++f){const p=d[f].indexOf('"');p!==-1&&(d[f]=d[f].slice(0,p),d.length=f+1),d[f]=d[f].replaceAll(/\\(.)/g,"$1")}h=d.join('"')}return h}function c(h){const d=h.indexOf("'");if(d===-1)return h;const f=h.slice(0,d),g=h.slice(d+1).replace(/^[^']*'/,"");return r(f,g)}function u(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,f,p,g){if(p==="q"||p==="Q")return g=g.replaceAll("_"," "),g=g.replaceAll(/=([0-9a-fA-F]{2})/g,function(w,S){return String.fromCharCode(parseInt(S,16))}),r(f,g);try{g=atob(g)}catch{}return r(f,g)})}return""}function ME(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const i in e){const r=e[i];r!==void 0&&t.append(i,r)}return t}function nm(n){try{return new URL(n).origin}catch{}return null}function NE({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:i}){const r={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(n.get("Content-Length"),10);return!Number.isInteger(s)||(r.suggestedLength=s,s<=2*t)||i||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function IE(n){const e=n.get("Content-Disposition");if(e){let t=qM(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(dw(t))return t}return null}function im(n,e){return n===404||n===0&&e.startsWith("file:")?new Ah('Missing PDF "'+e+'".'):new sg(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n)}function DE(n){return n===200||n===206}function OE(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function FE(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(we(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class Xb{constructor(e){de(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=ME(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return wt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new QM(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new JM(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class QM{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const i=new Headers(e.headers),r=t.url;fetch(r,OE(i,this._withCredentials,this._abortController)).then(s=>{if(e._responseOrigin=nm(s.url),!DE(s.status))throw im(s.status,r);this._reader=s.body.getReader(),this._headersCapability.resolve();const a=s.headers,{allowRangeRequests:o,suggestedLength:c}=NE({responseHeaders:a,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=c||this._contentLength,this._filename=IE(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new fa("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:FE(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class JM{constructor(e,t,i){this._stream=e,this._reader=null,this._loaded=0;const r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const s=new Headers(e.headers);s.append("Range",`bytes=${t}-${i-1}`);const a=r.url;fetch(a,OE(s,this._withCredentials,this._abortController)).then(o=>{const c=nm(o.url);if(c!==e._responseOrigin)throw new Error(`Expected range response-origin "${c}" to match "${e._responseOrigin}".`);if(!DE(o.status))throw im(o.status,a);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:FE(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const Wm=200,Xm=206;function ZM(n){const e=n.response;return typeof e!="string"?e:Zg(e).buffer}class eN{constructor({url:e,httpHeaders:t,withCredentials:i}){de(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=ME(this.isHttp,t),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,i=this.currXhrId++,r=this.pendingRequests[i]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[s,a]of this.headers)t.setRequestHeader(s,a);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.expectedStatus=Xm):r.expectedStatus=Wm,t.responseType="arraybuffer",wt(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,i),t.onprogress=this.onProgress.bind(this,i),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),i}onProgress(e,t){var r;const i=this.pendingRequests[e];i&&((r=i.onProgress)==null||r.call(i,t))}onStateChange(e,t){const i=this.pendingRequests[e];if(!i)return;const r=i.xhr;if(r.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),r.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],r.status===0&&this.isHttp){i.onError(r.status);return}const s=r.status||Wm;if(!(s===Wm&&i.expectedStatus===Xm)&&s!==i.expectedStatus){i.onError(r.status);return}const o=ZM(r);if(s===Xm){const c=r.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);u?i.onDone({begin:parseInt(u[1],10),chunk:o}):(we('Missing or invalid "Content-Range" header.'),i.onError(0))}else o?i.onDone({begin:0,chunk:o}):i.onError(r.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class tN{constructor(e){this._source=e,this._manager=new eN(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return wt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new nN(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const i=new iN(this._manager,e,t);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class nN{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=nm(t.responseURL);const i=t.getAllResponseHeaders(),r=new Headers(i?i.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(o=>{const[c,...u]=o.split(": ");return[c,u.join(": ")]}):[]),{allowRangeRequests:s,suggestedLength:a}=NE({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=IE(r),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=im(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class iN{constructor(e,t,i){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:i,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=nm((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=im(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const rN=/^[a-z][a-z0-9\-+.]+:/i;function sN(n){if(rN.test(n))return new URL(n);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(n))}class aN{constructor(e){this.source=e,this.url=sN(e.url),wt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return wt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new oN(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new lN(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class oN{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const i=process.getBuiltinModule("fs");i.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(i.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=new Ah(`Missing PDF "${this._url}".`)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new fa("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class lN{constructor(e,t,i){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=e.source;this._isStreamingSupported=!r.disableStream;const s=process.getBuiltinModule("fs");this._setReadableStream(s.createReadStream(this._url,{start:t,end:i-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const cN=1e5,bn=30,uN=.8;var Qb,Os,En,sd,ad,lo,jr,od,ld,co,ac,oc,Fs,lc,cd,cc,uo,ud,hd,ho,fo,dd,js,uc,hs,jE,zE,Sy,ei,cp,Ey,BE,HE;const St=class St{constructor({textContentSource:e,container:t,viewport:i}){b(this,hs);b(this,Os,Promise.withResolvers());b(this,En,null);b(this,sd,!1);b(this,ad,!!((Qb=globalThis.FontInspector)!=null&&Qb.enabled));b(this,lo,null);b(this,jr,null);b(this,od,0);b(this,ld,0);b(this,co,null);b(this,ac,null);b(this,oc,0);b(this,Fs,0);b(this,lc,Object.create(null));b(this,cd,[]);b(this,cc,null);b(this,uo,[]);b(this,ud,new WeakMap);b(this,hd,null);var c;if(e instanceof ReadableStream)m(this,cc,e);else if(typeof e=="object")m(this,cc,new ReadableStream({start(u){u.enqueue(e),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');m(this,En,m(this,ac,t)),m(this,Fs,i.scale*(globalThis.devicePixelRatio||1)),m(this,oc,i.rotation),m(this,jr,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:s,pageX:a,pageY:o}=i.rawDims;m(this,hd,[1,0,0,-1,-a,o+s]),m(this,ld,r),m(this,od,s),A(c=St,ei,BE).call(c),Jo(t,i),l(this,Os).promise.finally(()=>{l(St,uc).delete(this),m(this,jr,null),m(this,lc,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=gn.platform;return xe(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{l(this,co).read().then(({value:t,done:i})=>{if(i){l(this,Os).resolve();return}l(this,lo)??m(this,lo,t.lang),Object.assign(l(this,lc),t.styles),A(this,hs,jE).call(this,t.items),e()},l(this,Os).reject)};return m(this,co,l(this,cc).getReader()),l(St,uc).add(this),e(),l(this,Os).promise}update({viewport:e,onBefore:t=null}){var s;const i=e.scale*(globalThis.devicePixelRatio||1),r=e.rotation;if(r!==l(this,oc)&&(t==null||t(),m(this,oc,r),Jo(l(this,ac),{rotation:r})),i!==l(this,Fs)){t==null||t(),m(this,Fs,i);const a={div:null,properties:null,ctx:A(s=St,ei,cp).call(s,l(this,lo))};for(const o of l(this,uo))a.properties=l(this,ud).get(o),a.div=o,A(this,hs,Sy).call(this,a)}}cancel(){var t;const e=new fa("TextLayer task cancelled.");(t=l(this,co))==null||t.cancel(e).catch(()=>{}),m(this,co,null),l(this,Os).reject(e)}get textDivs(){return l(this,uo)}get textContentItemsStr(){return l(this,cd)}static cleanup(){if(!(l(this,uc).size>0)){l(this,ho).clear();for(const{canvas:e}of l(this,fo).values())e.remove();l(this,fo).clear()}}};Os=new WeakMap,En=new WeakMap,sd=new WeakMap,ad=new WeakMap,lo=new WeakMap,jr=new WeakMap,od=new WeakMap,ld=new WeakMap,co=new WeakMap,ac=new WeakMap,oc=new WeakMap,Fs=new WeakMap,lc=new WeakMap,cd=new WeakMap,cc=new WeakMap,uo=new WeakMap,ud=new WeakMap,hd=new WeakMap,ho=new WeakMap,fo=new WeakMap,dd=new WeakMap,js=new WeakMap,uc=new WeakMap,hs=new WeakSet,jE=function(e){var r,s;if(l(this,sd))return;(s=l(this,jr)).ctx??(s.ctx=A(r=St,ei,cp).call(r,l(this,lo)));const t=l(this,uo),i=l(this,cd);for(const a of e){if(t.length>cN){we("Ignoring additional textDivs for performance reasons."),m(this,sd,!0);return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const o=l(this,En);m(this,En,document.createElement("span")),l(this,En).classList.add("markedContent"),a.id!==null&&l(this,En).setAttribute("id",`${a.id}`),o.append(l(this,En))}else a.type==="endMarkedContent"&&m(this,En,l(this,En).parentNode);continue}i.push(a.str),A(this,hs,zE).call(this,a)}},zE=function(e){var w;const t=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};l(this,uo).push(t);const r=ae.transform(l(this,hd),e.transform);let s=Math.atan2(r[1],r[0]);const a=l(this,lc)[e.fontName];a.vertical&&(s+=Math.PI/2);let o=l(this,ad)&&a.fontSubstitution||a.fontFamily;o=St.fontFamilyMap.get(o)||o;const c=Math.hypot(r[2],r[3]),u=c*A(w=St,ei,HE).call(w,o,l(this,lo));let h,d;s===0?(h=r[4],d=r[5]-u):(h=r[4]+u*Math.sin(s),d=r[5]-u*Math.cos(s));const f="calc(var(--scale-factor)*",p=t.style;l(this,En)===l(this,ac)?(p.left=`${(100*h/l(this,ld)).toFixed(2)}%`,p.top=`${(100*d/l(this,od)).toFixed(2)}%`):(p.left=`${f}${h.toFixed(2)}px)`,p.top=`${f}${d.toFixed(2)}px)`),p.fontSize=`${f}${(l(St,js)*c).toFixed(2)}px)`,p.fontFamily=o,i.fontSize=c,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,l(this,ad)&&(t.dataset.fontName=a.fontSubstitutionLoadedName||e.fontName),s!==0&&(i.angle=s*(180/Math.PI));let g=!1;if(e.str.length>1)g=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const S=Math.abs(e.transform[0]),v=Math.abs(e.transform[3]);S!==v&&Math.max(S,v)/Math.min(S,v)>1.5&&(g=!0)}if(g&&(i.canvasWidth=a.vertical?e.height:e.width),l(this,ud).set(t,i),l(this,jr).div=t,l(this,jr).properties=i,A(this,hs,Sy).call(this,l(this,jr)),i.hasText&&l(this,En).append(t),i.hasEOL){const S=document.createElement("br");S.setAttribute("role","presentation"),l(this,En).append(S)}},Sy=function(e){var o;const{div:t,properties:i,ctx:r}=e,{style:s}=t;let a="";if(l(St,js)>1&&(a=`scale(${1/l(St,js)})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:c}=s,{canvasWidth:u,fontSize:h}=i;A(o=St,ei,Ey).call(o,r,h*l(this,Fs),c);const{width:d}=r.measureText(t.textContent);d>0&&(a=`scaleX(${u*l(this,Fs)/d}) ${a}`)}i.angle!==0&&(a=`rotate(${i.angle}deg) ${a}`),a.length>0&&(s.transform=a)},ei=new WeakSet,cp=function(e=null){let t=l(this,fo).get(e||(e=""));if(!t){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=e,document.body.append(i),t=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),l(this,fo).set(e,t),l(this,dd).set(t,{size:0,family:""})}return t},Ey=function(e,t,i){const r=l(this,dd).get(e);t===r.size&&i===r.family||(e.font=`${t}px ${i}`,r.size=t,r.family=i)},BE=function(){if(l(this,js)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),m(this,js,e.getBoundingClientRect().height),e.remove()},HE=function(e,t){const i=l(this,ho).get(e);if(i)return i;const r=A(this,ei,cp).call(this,t);r.canvas.width=r.canvas.height=bn,A(this,ei,Ey).call(this,r,bn,e);const s=r.measureText("");let a=s.fontBoundingBoxAscent,o=Math.abs(s.fontBoundingBoxDescent);if(a){const h=a/(a+o);return l(this,ho).set(e,h),r.canvas.width=r.canvas.height=0,h}r.strokeStyle="red",r.clearRect(0,0,bn,bn),r.strokeText("g",0,0);let c=r.getImageData(0,0,bn,bn).data;o=0;for(let h=c.length-1-3;h>=0;h-=4)if(c[h]>0){o=Math.ceil(h/4/bn);break}r.clearRect(0,0,bn,bn),r.strokeText("A",0,bn),c=r.getImageData(0,0,bn,bn).data,a=0;for(let h=0,d=c.length;h<d;h+=4)if(c[h]>0){a=bn-Math.floor(h/4/bn);break}r.canvas.width=r.canvas.height=0;const u=a?a/(a+o):uN;return l(this,ho).set(e,u),u},b(St,ei),b(St,ho,new Map),b(St,fo,new Map),b(St,dd,new WeakMap),b(St,js,null),b(St,uc,new Set);let xh=St;class Sh{static textContent(e){const t=[],i={items:t,styles:Object.create(null)};function r(s){var c;if(!s)return;let a=null;const o=s.name;if(o==="#text")a=s.value;else if(Sh.shouldBuildText(o))(c=s==null?void 0:s.attributes)!=null&&c.textContent?a=s.attributes.textContent:s.value&&(a=s.value);else return;if(a!==null&&t.push({str:a}),!!s.children)for(const u of s.children)r(u)}return r(e),i}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const hN=65536,dN=100,fN=5e3,pN=sn?kM:_M,gN=sn?RM:CE,mN=sn?TM:CM,yN=sn?PM:PE;function vN(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new _y,{docId:t}=e,i=n.url?wN(n.url):null,r=n.data?bN(n.data):null,s=n.httpHeaders||null,a=n.withCredentials===!0,o=n.password??null,c=n.range instanceof $E?n.range:null,u=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:hN;let h=n.worker instanceof zl?n.worker:null;const d=n.verbosity,f=typeof n.docBaseUrl=="string"&&!tm(n.docBaseUrl)?n.docBaseUrl:null,p=typeof n.cMapUrl=="string"?n.cMapUrl:null,g=n.cMapPacked!==!1,w=n.CMapReaderFactory||gN,S=typeof n.standardFontDataUrl=="string"?n.standardFontDataUrl:null,v=n.StandardFontDataFactory||yN,y=n.stopAtErrors!==!0,x=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,E=n.isEvalSupported!==!1,T=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!sn,_=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!sn&&(gn.platform.isFirefox||!globalThis.chrome),R=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,M=typeof n.disableFontFace=="boolean"?n.disableFontFace:sn,j=n.fontExtraProperties===!0,z=n.enableXfa===!0,V=n.ownerDocument||globalThis.document,ue=n.disableRange===!0,pe=n.disableStream===!0,oe=n.disableAutoFetch===!0,Ce=n.pdfBug===!0,W=n.CanvasFactory||pN,X=n.FilterFactory||mN,F=n.enableHWA===!0,P=c?c.length:n.length??NaN,L=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!sn&&!M,D=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:w===CE&&v===PE&&p&&S&&Tu(p,document.baseURI)&&Tu(S,document.baseURI),U=null;iM(d);const O={canvasFactory:new W({ownerDocument:V,enableHWA:F}),filterFactory:new X({docId:t,ownerDocument:V}),cMapReaderFactory:D?null:new w({baseUrl:p,isCompressed:g}),standardFontDataFactory:D?null:new v({baseUrl:S})};if(!h){const ie={verbosity:d,port:es.workerPort};h=ie.port?zl.fromPort(ie):new zl(ie),e._worker=h}const $={docId:t,apiVersion:"4.10.38",data:r,password:o,disableAutoFetch:oe,rangeChunkSize:u,length:P,docBaseUrl:f,enableXfa:z,evaluatorOptions:{maxImageSize:x,disableFontFace:M,ignoreErrors:y,isEvalSupported:E,isOffscreenCanvasSupported:T,isImageDecoderSupported:_,canvasMaxAreaInBytes:R,fontExtraProperties:j,useSystemFonts:L,cMapUrl:D?p:null,standardFontDataUrl:D?S:null}},he={disableFontFace:M,fontExtraProperties:j,ownerDocument:V,pdfBug:Ce,styleElement:U,loadingParams:{disableAutoFetch:oe,enableXfa:z}};return h.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const ie=h.messageHandler.sendWithPromise("GetDocRequest",$,r?[r.buffer]:null);let te;if(c)te=new XM(c,{disableRange:ue,disableStream:pe});else if(!r){if(!i)throw new Error("getDocument - no `url` parameter provided.");let Te;if(sn)if(Tu(i)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");Te=Xb}else Te=aN;else Te=Tu(i)?Xb:tN;te=new Te({url:i,length:P,httpHeaders:s,withCredentials:a,rangeChunkSize:u,disableRange:ue,disableStream:pe})}return ie.then(Te=>{if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const Nn=new Lu(t,Te,h.port),In=new EN(Nn,e,te,he,O);e._transport=In,Nn.send("Ready",null)})}).catch(e._capability.reject),e}function wN(n){if(n instanceof URL)return n.href;try{return new URL(n,window.location).href}catch{if(sn&&typeof n=="string")return n}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function bN(n){if(sn&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return Zg(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Yb(n){return typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0}var Ag;const xg=class xg{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${on(xg,Ag)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,t,i,r;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(s){throw(i=this._worker)!=null&&i.port&&delete this._worker._pendingDestroy,s}this._transport=null,(r=this._worker)==null||r.destroy(),this._worker=null}};Ag=new WeakMap,b(xg,Ag,0);let _y=xg;class $E{constructor(e,t,i=!1,r=null){this.length=e,this.initialData=t,this.progressiveDone=i,this.contentDispositionFilename=r,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const i of this._rangeListeners)i(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const i of this._progressListeners)i(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){$e("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class AN{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return xe(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var zs,zr,pi,gl,up;class xN{constructor(e,t,i,r=!1){b(this,pi);b(this,zs,null);b(this,zr,!1);this._pageIndex=e,this._pageInfo=t,this._transport=i,this._stats=r?new Ib:null,this._pdfBug=r,this.commonObjs=i.commonObjs,this.objs=new UE,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:i=0,offsetY:r=0,dontFlip:s=!1}={}){return new sf({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:i,offsetY:r,dontFlip:s})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return xe(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:i="display",annotationMode:r=xs.ENABLE,transform:s=null,background:a=null,optionalContentConfigPromise:o=null,annotationCanvasMap:c=null,pageColors:u=null,printAnnotationStorage:h=null,isEditing:d=!1}){var E,T;(E=this._stats)==null||E.time("Overall");const f=this._transport.getRenderingIntent(i,r,h,d),{renderingIntent:p,cacheKey:g}=f;m(this,zr,!1),A(this,pi,up).call(this),o||(o=this._transport.getOptionalContentConfig(p));let w=this._intentStates.get(g);w||(w=Object.create(null),this._intentStates.set(g,w)),w.streamReaderCancelTimeout&&(clearTimeout(w.streamReaderCancelTimeout),w.streamReaderCancelTimeout=null);const S=!!(p&Xn.PRINT);w.displayReadyCapability||(w.displayReadyCapability=Promise.withResolvers(),w.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(T=this._stats)==null||T.time("Page Request"),this._pumpOperatorList(f));const v=_=>{var R;w.renderTasks.delete(y),(this._maybeCleanupAfterRender||S)&&m(this,zr,!0),A(this,pi,gl).call(this,!S),_?(y.capability.reject(_),this._abortOperatorList({intentState:w,reason:_ instanceof Error?_:new Error(_)})):y.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(R=globalThis.Stats)!=null&&R.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},y=new Ty({callback:v,params:{canvasContext:e,viewport:t,transform:s,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:w.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!S,pdfBug:this._pdfBug,pageColors:u});(w.renderTasks||(w.renderTasks=new Set)).add(y);const x=y.task;return Promise.all([w.displayReadyCapability.promise,o]).then(([_,R])=>{var M;if(this.destroyed){v();return}if((M=this._stats)==null||M.time("Rendering"),!(R.renderingIntent&p))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");y.initializeGraphics({transparency:_,optionalContentConfig:R}),y.operatorListChanged()}).catch(v),x}getOperatorList({intent:e="display",annotationMode:t=xs.ENABLE,printAnnotationStorage:i=null,isEditing:r=!1}={}){var u;function s(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(c))}const a=this._transport.getRenderingIntent(e,t,i,r,!0);let o=this._intentStates.get(a.cacheKey);o||(o=Object.create(null),this._intentStates.set(a.cacheKey,o));let c;return o.opListReadCapability||(c=Object.create(null),c.operatorListChanged=s,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||(o.renderTasks=new Set)).add(c),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(a)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>Sh.textContent(i));const t=this.streamTextContent(e);return new Promise(function(i,r){function s(){a.read().then(function({value:c,done:u}){if(u){i(o);return}o.lang??(o.lang=c.lang),Object.assign(o.styles,c.styles),o.items.push(...c.items),s()},r)}const a=t.getReader(),o={items:[],styles:Object.create(null),lang:null};s()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const i of t.renderTasks)e.push(i.completed),i.cancel();return this.objs.clear(),m(this,zr,!1),A(this,pi,up).call(this),Promise.all(e)}cleanup(e=!1){m(this,zr,!0);const t=A(this,pi,gl).call(this,!1);return e&&t&&this._stats&&(this._stats=new Ib),t}_startRenderPage(e,t){var r,s;const i=this._intentStates.get(t);i&&((r=this._stats)==null||r.timeEnd("Page Request"),(s=i.displayReadyCapability)==null||s.resolve(e))}_renderPageChunk(e,t){for(let i=0,r=e.length;i<r;i++)t.operatorList.fnArray.push(e.fnArray[i]),t.operatorList.argsArray.push(e.argsArray[i]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const i of t.renderTasks)i.operatorListChanged();e.lastChunk&&A(this,pi,gl).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:i,modifiedIds:r}){const{map:s,transfer:a}=i,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:s,modifiedIds:r},a).getReader(),u=this._intentStates.get(t);u.streamReader=c;const h=()=>{c.read().then(({value:d,done:f})=>{if(f){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(d,u),h())},d=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const f of u.renderTasks)f.operatorListChanged();A(this,pi,gl).call(this,!0)}if(u.displayReadyCapability)u.displayReadyCapability.reject(d);else if(u.opListReadCapability)u.opListReadCapability.reject(d);else throw d}})};h()}_abortOperatorList({intentState:e,reason:t,force:i=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!i){if(e.renderTasks.size>0)return;if(t instanceof hw){let r=dN;t.extraDelay>0&&t.extraDelay<1e3&&(r+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},r);return}}if(e.streamReader.cancel(new fa(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[r,s]of this._intentStates)if(s===e){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}zs=new WeakMap,zr=new WeakMap,pi=new WeakSet,gl=function(e=!1){if(A(this,pi,up).call(this),!l(this,zr)||this.destroyed)return!1;if(e)return m(this,zs,setTimeout(()=>{m(this,zs,null),A(this,pi,gl).call(this,!1)},fN)),!1;for(const{renderTasks:t,operatorList:i}of this._intentStates.values())if(t.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),m(this,zr,!1),!0},up=function(){l(this,zs)&&(clearTimeout(l(this,zs)),m(this,zs,null))};var Br,Sg;class SN{constructor(){b(this,Br,new Map);b(this,Sg,Promise.resolve())}postMessage(e,t){const i={data:structuredClone(e,t?{transfer:t}:null)};l(this,Sg).then(()=>{for(const[r]of l(this,Br))r.call(this,i)})}addEventListener(e,t,i=null){let r=null;if((i==null?void 0:i.signal)instanceof AbortSignal){const{signal:s}=i;if(s.aborted){we("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(e,t);r=()=>s.removeEventListener("abort",a),s.addEventListener("abort",a)}l(this,Br).set(t,r)}removeEventListener(e,t){const i=l(this,Br).get(t);i==null||i(),l(this,Br).delete(t)}terminate(){for(const[,e]of l(this,Br))e==null||e();l(this,Br).clear()}}Br=new WeakMap,Sg=new WeakMap;var Eg,po,go,hc,hp,dc,dp;const qe=class qe{constructor({name:e=null,port:t=null,verbosity:i=rM()}={}){b(this,hc);var r;if(this.name=e,this.destroyed=!1,this.verbosity=i,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if((r=l(qe,go))!=null&&r.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(l(qe,go)||m(qe,go,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new Lu("main","worker",e),this._messageHandler.on("ready",function(){}),A(this,hc,hp).call(this)}_initialize(){if(l(qe,po)||l(qe,dc,dp)){this._setupFakeWorker();return}let{workerSrc:e}=qe;try{qe._isSameOrigin(window.location.href,e)||(e=qe._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),i=new Lu("main","worker",t),r=()=>{s.abort(),i.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},s=new AbortController;t.addEventListener("error",()=>{this._webWorker||r()},{signal:s.signal}),i.on("test",o=>{if(s.abort(),this.destroyed||!o){r();return}this._messageHandler=i,this._port=t,this._webWorker=t,A(this,hc,hp).call(this)}),i.on("ready",o=>{if(s.abort(),this.destroyed){r();return}try{a()}catch{this._setupFakeWorker()}});const a=()=>{const o=new Uint8Array;i.send("test",o,[o.buffer])};a();return}catch{Jg("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){l(qe,po)||(we("Setting up fake worker."),m(qe,po,!0)),qe._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new SN;this._port=t;const i=`fake${on(qe,Eg)._++}`,r=new Lu(i+"_worker",i,t);e.setup(r,t),this._messageHandler=new Lu(i,i+"_worker",t),A(this,hc,hp).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var e,t,i;this.destroyed=!0,(e=this._webWorker)==null||e.terminate(),this._webWorker=null,(t=l(qe,go))==null||t.delete(this._port),this._port=null,(i=this._messageHandler)==null||i.destroy(),this._messageHandler=null}static fromPort(e){var i;if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const t=(i=l(this,go))==null?void 0:i.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new qe(e)}static get workerSrc(){if(es.workerSrc)return es.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return xe(this,"_setupFakeWorkerGlobal",(async()=>l(this,dc,dp)?l(this,dc,dp):(await import(this.workerSrc)).WorkerMessageHandler)())}};Eg=new WeakMap,po=new WeakMap,go=new WeakMap,hc=new WeakSet,hp=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},dc=new WeakSet,dp=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},b(qe,dc),b(qe,Eg,0),b(qe,po,!1),b(qe,go),sn&&(m(qe,po,!0),es.workerSrc||(es.workerSrc="./pdf.worker.mjs")),qe._isSameOrigin=(e,t)=>{let i;try{if(i=new URL(e),!i.origin||i.origin==="null")return!1}catch{return!1}const r=new URL(t,i);return i.origin===r.origin},qe._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};let zl=qe;var Hr,lr,fc,pc,$r,mo,Ou;class EN{constructor(e,t,i,r,s){b(this,mo);b(this,Hr,new Map);b(this,lr,new Map);b(this,fc,new Map);b(this,pc,new Map);b(this,$r,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new UE,this.fontLoader=new SM({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return xe(this,"annotationStorage",new gw)}getRenderingIntent(e,t=xs.ENABLE,i=null,r=!1,s=!1){let a=Xn.DISPLAY,o=py;switch(e){case"any":a=Xn.ANY;break;case"display":break;case"print":a=Xn.PRINT;break;default:we(`getRenderingIntent - invalid intent: ${e}`)}const c=a&Xn.PRINT&&i instanceof bE?i:this.annotationStorage;switch(t){case xs.DISABLE:a+=Xn.ANNOTATIONS_DISABLE;break;case xs.ENABLE:break;case xs.ENABLE_FORMS:a+=Xn.ANNOTATIONS_FORMS;break;case xs.ENABLE_STORAGE:a+=Xn.ANNOTATIONS_STORAGE,o=c.serializable;break;default:we(`getRenderingIntent - invalid annotationMode: ${t}`)}r&&(a+=Xn.IS_EDITING),s&&(a+=Xn.OPLIST);const{ids:u,hash:h}=c.modifiedIds,d=[a,o.hash,h];return{renderingIntent:a,cacheKey:d.join("_"),annotationStorageSerializable:o,modifiedIds:u}}destroy(){var i;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(i=l(this,$r))==null||i.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of l(this,lr).values())e.push(r._destroy());l(this,lr).clear(),l(this,fc).clear(),l(this,pc).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var r,s;this.commonObjs.clear(),this.fontLoader.clear(),l(this,Hr).clear(),this.filterFactory.destroy(),xh.cleanup(),(r=this._networkStream)==null||r.cancelAllRequests(new fa("Worker was terminated.")),(s=this.messageHandler)==null||s.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(i,r)=>{wt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=s=>{this._lastProgress={loaded:s.loaded,total:s.total}},r.onPull=()=>{this._fullReader.read().then(function({value:s,done:a}){if(a){r.close();return}wt(s instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{r.error(s)})},r.onCancel=s=>{this._fullReader.cancel(s),r.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("ReaderHeadersReady",async i=>{var o;await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:s,contentLength:a}=this._fullReader;return(!r||!s)&&(this._lastProgress&&((o=t.onProgress)==null||o.call(t,this._lastProgress)),this._fullReader.onProgress=c=>{var u;(u=t.onProgress)==null||u.call(t,{loaded:c.loaded,total:c.total})}),{isStreamingSupported:r,isRangeSupported:s,contentLength:a}}),e.on("GetRangeReader",(i,r)=>{wt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const s=this._networkStream.getRangeReader(i.begin,i.end);if(!s){r.close();return}r.onPull=()=>{s.read().then(function({value:a,done:o}){if(o){r.close();return}wt(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{r.error(a)})},r.onCancel=a=>{s.cancel(a),r.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,t._capability.resolve(new AN(i,this))}),e.on("DocException",i=>{t._capability.reject(An(i))}),e.on("PasswordRequest",i=>{m(this,$r,Promise.withResolvers());try{if(!t.onPassword)throw An(i);const r=s=>{s instanceof Error?l(this,$r).reject(s):l(this,$r).resolve({password:s})};t.onPassword(r,i.code)}catch(r){l(this,$r).reject(r)}return l(this,$r).promise}),e.on("DataLoaded",i=>{var r;(r=t.onProgress)==null||r.call(t,{loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),e.on("StartRenderPage",i=>{if(this.destroyed)return;l(this,lr).get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),e.on("commonobj",([i,r,s])=>{var a;if(this.destroyed||this.commonObjs.has(i))return null;switch(r){case"Font":const{disableFontFace:o,fontExtraProperties:c,pdfBug:u}=this._params;if("error"in s){const p=s.error;we(`Error during font loading: ${p}`),this.commonObjs.resolve(i,p);break}const h=u&&((a=globalThis.FontInspector)!=null&&a.enabled)?(p,g)=>globalThis.FontInspector.fontAdded(p,g):null,d=new EM(s,{disableFontFace:o,fontExtraProperties:c,inspectFont:h});this.fontLoader.bind(d).catch(()=>e.sendWithPromise("FontFallback",{id:i})).finally(()=>{!c&&d.data&&(d.data=null),this.commonObjs.resolve(i,d)});break;case"CopyLocalImage":const{imageRef:f}=s;wt(f,"The imageRef must be defined.");for(const p of l(this,lr).values())for(const[,g]of p.objs)if((g==null?void 0:g.ref)===f)return g.dataLen?(this.commonObjs.resolve(i,structuredClone(g)),g.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,s);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),e.on("obj",([i,r,s,a])=>{var c;if(this.destroyed)return;const o=l(this,lr).get(r);if(!o.objs.has(i)){if(o._intentStates.size===0){(c=a==null?void 0:a.bitmap)==null||c.close();return}switch(s){case"Image":o.objs.resolve(i,a),(a==null?void 0:a.dataLen)>ZL&&(o._maybeCleanupAfterRender=!0);break;case"Pattern":o.objs.resolve(i,a);break;default:throw new Error(`Got unknown object type ${s}`)}}}),e.on("DocProgress",i=>{var r;this.destroyed||(r=t.onProgress)==null||r.call(t,{loaded:i.loaded,total:i.total})}),e.on("FetchBuiltInCMap",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(i)}),e.on("FetchStandardFontData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var i;this.annotationStorage.size<=0&&we("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((i=this._fullReader)==null?void 0:i.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,i=l(this,fc).get(t);if(i)return i;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(s=>{if(this.destroyed)throw new Error("Transport destroyed");s.refStr&&l(this,pc).set(s.refStr,e);const a=new xN(t,s,this,this._params.pdfBug);return l(this,lr).set(t,a),a});return l(this,fc).set(t,r),r}getPageIndex(e){return Yb(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return A(this,mo,Ou).call(this,"GetFieldObjects")}hasJSActions(){return A(this,mo,Ou).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return A(this,mo,Ou).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return A(this,mo,Ou).call(this,"GetOptionalContentConfig").then(t=>new WM(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=l(this,Hr).get(e);if(t)return t;const i=this.messageHandler.sendWithPromise(e,null).then(r=>{var s,a;return{info:r[0],metadata:r[1]?new GM(r[1]):null,contentDispositionFilename:((s=this._fullReader)==null?void 0:s.filename)??null,contentLength:((a=this._fullReader)==null?void 0:a.contentLength)??null}});return l(this,Hr).set(e,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of l(this,lr).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),l(this,Hr).clear(),this.filterFactory.destroy(!0),xh.cleanup()}}cachedPageNumber(e){if(!Yb(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return l(this,pc).get(t)??null}}Hr=new WeakMap,lr=new WeakMap,fc=new WeakMap,pc=new WeakMap,$r=new WeakMap,mo=new WeakSet,Ou=function(e,t=null){const i=l(this,Hr).get(e);if(i)return i;const r=this.messageHandler.sendWithPromise(e,t);return l(this,Hr).set(e,r),r};const bu=Symbol("INITIAL_DATA");var jn,fd,Cy;class UE{constructor(){b(this,fd);b(this,jn,Object.create(null))}get(e,t=null){if(t){const r=A(this,fd,Cy).call(this,e);return r.promise.then(()=>t(r.data)),null}const i=l(this,jn)[e];if(!i||i.data===bu)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return i.data}has(e){const t=l(this,jn)[e];return!!t&&t.data!==bu}delete(e){const t=l(this,jn)[e];return!t||t.data===bu?!1:(delete l(this,jn)[e],!0)}resolve(e,t=null){const i=A(this,fd,Cy).call(this,e);i.data=t,i.resolve()}clear(){var e;for(const t in l(this,jn)){const{data:i}=l(this,jn)[t];(e=i==null?void 0:i.bitmap)==null||e.close()}m(this,jn,Object.create(null))}*[Symbol.iterator](){for(const e in l(this,jn)){const{data:t}=l(this,jn)[e];t!==bu&&(yield[e,t])}}}jn=new WeakMap,fd=new WeakSet,Cy=function(e){var t;return(t=l(this,jn))[e]||(t[e]={...Promise.withResolvers(),data:bu})};var Bs;class _N{constructor(e){b(this,Bs,null);m(this,Bs,e),this.onContinue=null}get promise(){return l(this,Bs).capability.promise}cancel(e=0){l(this,Bs).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=l(this,Bs).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=l(this,Bs);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}Bs=new WeakMap;var Hs,yo;const Na=class Na{constructor({callback:e,params:t,objs:i,commonObjs:r,annotationCanvasMap:s,operatorList:a,pageIndex:o,canvasFactory:c,filterFactory:u,useRequestAnimationFrame:h=!1,pdfBug:d=!1,pageColors:f=null}){b(this,Hs,null);this.callback=e,this.params=t,this.objs=i,this.commonObjs=r,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=c,this.filterFactory=u,this._pdfBug=d,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=h===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new _N(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var o,c;if(this.cancelled)return;if(this._canvas){if(l(Na,yo).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");l(Na,yo).add(this._canvas)}this._pdfBug&&((o=globalThis.StepperManager)!=null&&o.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:r,transform:s,background:a}=this.params;this.gfx=new jl(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:s,viewport:r,transparency:e,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,(c=this.graphicsReadyCallback)==null||c.call(this)}cancel(e=null,t=0){var i;this.running=!1,this.cancelled=!0,(i=this.gfx)==null||i.endDrawing(),l(this,Hs)&&(window.cancelAnimationFrame(l(this,Hs)),m(this,Hs,null)),l(Na,yo).delete(this._canvas),this.callback(e||new hw(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?m(this,Hs,window.requestAnimationFrame(()=>{m(this,Hs,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),l(Na,yo).delete(this._canvas),this.callback())))}};Hs=new WeakMap,yo=new WeakMap,b(Na,yo,new WeakSet);let Ty=Na;const CN="4.10.38",TN="f9bea397f";function Kb(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function Au(n){return Math.max(0,Math.min(255,255*n))}class qb{static CMYK_G([e,t,i,r]){return["G",1-Math.min(1,.3*e+.59*i+.11*t+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Au(e),[e,e,e]}static G_HTML([e]){const t=Kb(e);return`#${t}${t}${t}`}static RGB_G([e,t,i]){return["G",.3*e+.59*t+.11*i]}static RGB_rgb(e){return e.map(Au)}static RGB_HTML(e){return`#${e.map(Kb).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,i,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,i+r),1-Math.min(1,t+r)]}static CMYK_rgb([e,t,i,r]){return[Au(1-Math.min(1,e+r)),Au(1-Math.min(1,i+r)),Au(1-Math.min(1,t+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,i]){const r=1-e,s=1-t,a=1-i,o=Math.min(r,s,a);return["CMYK",r,s,a,o]}}class kN{create(e,t,i=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),i||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${t}`),r}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){$e("Abstract method `_createSVG` called.")}}class yw extends kN{_createSVG(e){return document.createElementNS(xr,e)}}class GE{static setupStorage(e,t,i,r,s){const a=r.getValue(t,{value:null});switch(i.name){case"textarea":if(a.value!==null&&(e.textContent=a.value),s==="print")break;e.addEventListener("input",o=>{r.setValue(t,{value:o.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(a.value===i.attributes.xfaOn?e.setAttribute("checked",!0):a.value===i.attributes.xfaOff&&e.removeAttribute("checked"),s==="print")break;e.addEventListener("change",o=>{r.setValue(t,{value:o.target.checked?o.target.getAttribute("xfaOn"):o.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&e.setAttribute("value",a.value),s==="print")break;e.addEventListener("input",o=>{r.setValue(t,{value:o.target.value})})}break;case"select":if(a.value!==null){e.setAttribute("value",a.value);for(const o of i.children)o.attributes.value===a.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}e.addEventListener("input",o=>{const c=o.target.options,u=c.selectedIndex===-1?"":c[c.selectedIndex].value;r.setValue(t,{value:u})});break}}static setAttributes({html:e,element:t,storage:i=null,intent:r,linkService:s}){const{attributes:a}=t,o=e instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${r}`);for(const[c,u]of Object.entries(a))if(u!=null)switch(c){case"class":u.length&&e.setAttribute(c,u.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",u);break;case"style":Object.assign(e.style,u);break;case"textContent":e.textContent=u;break;default:(!o||c!=="href"&&c!=="newWindow")&&e.setAttribute(c,u)}o&&s.addLinkAttributes(e,a.href,a.newWindow),i&&a.dataId&&this.setupStorage(e,a.dataId,t,i)}static render(e){var d,f;const t=e.annotationStorage,i=e.linkService,r=e.xfaHtml,s=e.intent||"display",a=document.createElement(r.name);r.attributes&&this.setAttributes({html:a,element:r,intent:s,linkService:i});const o=s!=="richText",c=e.div;if(c.append(a),e.viewport){const p=`matrix(${e.viewport.transform.join(",")})`;c.style.transform=p}o&&c.setAttribute("class","xfaLayer xfaFont");const u=[];if(r.children.length===0){if(r.value){const p=document.createTextNode(r.value);a.append(p),o&&Sh.shouldBuildText(r.name)&&u.push(p)}return{textDivs:u}}const h=[[r,-1,a]];for(;h.length>0;){const[p,g,w]=h.at(-1);if(g+1===p.children.length){h.pop();continue}const S=p.children[++h.at(-1)[1]];if(S===null)continue;const{name:v}=S;if(v==="#text"){const x=document.createTextNode(S.value);u.push(x),w.append(x);continue}const y=(d=S==null?void 0:S.attributes)!=null&&d.xmlns?document.createElementNS(S.attributes.xmlns,v):document.createElement(v);if(w.append(y),S.attributes&&this.setAttributes({html:y,element:S,storage:t,intent:s,linkService:i}),((f=S.children)==null?void 0:f.length)>0)h.push([S,-1,y]);else if(S.value){const x=document.createTextNode(S.value);o&&Sh.shouldBuildText(v)&&u.push(x),y.append(x)}}for(const p of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:u}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const of=1e3,RN=9,el=new WeakSet;function ua(n){return{width:n[2]-n[0],height:n[3]-n[1]}}class PN{static create(e){switch(e.data.annotationType){case xt.LINK:return new VE(e);case xt.TEXT:return new LN(e);case xt.WIDGET:switch(e.data.fieldType){case"Tx":return new MN(e);case"Btn":return e.data.radioButton?new YE(e):e.data.checkBox?new IN(e):new DN(e);case"Ch":return new ON(e);case"Sig":return new NN(e)}return new rl(e);case xt.POPUP:return new Ry(e);case xt.FREETEXT:return new ZE(e);case xt.LINE:return new jN(e);case xt.SQUARE:return new zN(e);case xt.CIRCLE:return new BN(e);case xt.POLYLINE:return new e_(e);case xt.CARET:return new $N(e);case xt.INK:return new vw(e);case xt.POLYGON:return new HN(e);case xt.HIGHLIGHT:return new t_(e);case xt.UNDERLINE:return new UN(e);case xt.SQUIGGLY:return new GN(e);case xt.STRIKEOUT:return new VN(e);case xt.STAMP:return new n_(e);case xt.FILEATTACHMENT:return new WN(e);default:return new pt(e)}}}var vo,gc,mc,pd,ky;const xw=class xw{constructor(e,{isRenderable:t=!1,ignoreBorder:i=!1,createQuadrilaterals:r=!1}={}){b(this,pd);b(this,vo,null);b(this,gc,!1);b(this,mc,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(i)),r&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:i}){return!!(e!=null&&e.str||t!=null&&t.str||i!=null&&i.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return xw._hasPopupData(this.data)}updateEdited(e){var i;if(!this.container)return;l(this,vo)||m(this,vo,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&A(this,pd,ky).call(this,t),(i=l(this,mc))==null||i.popup.updateEdited(e)}resetEdited(){var e;l(this,vo)&&(A(this,pd,ky).call(this,l(this,vo).rect),(e=l(this,mc))==null||e.popup.resetEdited(),m(this,vo,null))}_createContainer(e){const{data:t,parent:{page:i,viewport:r}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",t.id),this instanceof rl||(s.tabIndex=of);const{style:a}=s;if(a.zIndex=this.parent.zIndex++,t.alternativeText&&(s.title=t.alternativeText),t.noRotate&&s.classList.add("norotate"),!t.rect||this instanceof Ry){const{rotation:w}=t;return!t.hasOwnCanvas&&w!==0&&this.setRotation(w,s),s}const{width:o,height:c}=ua(t.rect);if(!e&&t.borderStyle.width>0){a.borderWidth=`${t.borderStyle.width}px`;const w=t.borderStyle.horizontalCornerRadius,S=t.borderStyle.verticalCornerRadius;if(w>0||S>0){const y=`calc(${w}px * var(--scale-factor)) / calc(${S}px * var(--scale-factor))`;a.borderRadius=y}else if(this instanceof YE){const y=`calc(${o}px * var(--scale-factor)) / calc(${c}px * var(--scale-factor))`;a.borderRadius=y}switch(t.borderStyle.style){case vu.SOLID:a.borderStyle="solid";break;case vu.DASHED:a.borderStyle="dashed";break;case vu.BEVELED:we("Unimplemented border style: beveled");break;case vu.INSET:we("Unimplemented border style: inset");break;case vu.UNDERLINE:a.borderBottomStyle="solid";break}const v=t.borderColor||null;v?(m(this,gc,!0),a.borderColor=ae.makeHexColor(v[0]|0,v[1]|0,v[2]|0)):a.borderWidth=0}const u=ae.normalizeRect([t.rect[0],i.view[3]-t.rect[1]+i.view[1],t.rect[2],i.view[3]-t.rect[3]+i.view[1]]),{pageWidth:h,pageHeight:d,pageX:f,pageY:p}=r.rawDims;a.left=`${100*(u[0]-f)/h}%`,a.top=`${100*(u[1]-p)/d}%`;const{rotation:g}=t;return t.hasOwnCanvas||g===0?(a.width=`${100*o/h}%`,a.height=`${100*c/d}%`):this.setRotation(g,s),s}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:r}=this.parent.viewport.rawDims,{width:s,height:a}=ua(this.data.rect);let o,c;e%180===0?(o=100*s/i,c=100*a/r):(o=100*a/i,c=100*s/r),t.style.width=`${o}%`,t.style.height=`${c}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,i,r)=>{const s=r.detail[t],a=s[0],o=s.slice(1);r.target.style[i]=qb[`${a}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[i]:qb[`${a}_rgb`](o)})};return xe(this,"_commonActions",{display:t=>{const{display:i}=t.detail,r=i%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:i===1||i===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:i}=t.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const i=t.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(e,t){const i=this._commonActions;for(const r of Object.keys(t.detail)){const s=e[r]||i[r];s==null||s(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const i=this._commonActions;for(const[r,s]of Object.entries(t)){const a=i[r];if(a){const o={detail:{[r]:s},target:e};a(o),delete t[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,i,r,s]=this.data.rect.map(w=>Math.fround(w));if(e.length===8){const[w,S,v,y]=e.subarray(2,6);if(r===w&&s===S&&t===v&&i===y)return}const{style:a}=this.container;let o;if(l(this,gc)){const{borderColor:w,borderWidth:S}=a;a.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${w}" stroke-width="${S}">`],this.container.classList.add("hasBorder")}const c=r-t,u=s-i,{svgFactory:h}=this,d=h.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0);const f=h.createElement("defs");d.append(f);const p=h.createElement("clipPath"),g=`clippath_${this.data.id}`;p.setAttribute("id",g),p.setAttribute("clipPathUnits","objectBoundingBox"),f.append(p);for(let w=2,S=e.length;w<S;w+=8){const v=e[w],y=e[w+1],x=e[w+2],E=e[w+3],T=h.createElement("rect"),_=(x-t)/c,R=(s-y)/u,M=(v-x)/c,j=(y-E)/u;T.setAttribute("x",_),T.setAttribute("y",R),T.setAttribute("width",M),T.setAttribute("height",j),p.append(T),o==null||o.push(`<rect vector-effect="non-scaling-stroke" x="${_}" y="${R}" width="${M}" height="${j}"/>`)}l(this,gc)&&(o.push("</g></svg>')"),a.backgroundImage=o.join("")),this.container.append(d),this.container.style.clipPath=`url(#${g})`}_createPopup(){const{data:e}=this,t=m(this,mc,new Ry({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){$e("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const i=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:s,id:a,exportValues:o}of r){if(s===-1||a===t)continue;const c=typeof o=="string"?o:null,u=document.querySelector(`[data-element-id="${a}"]`);if(u&&!el.has(u)){we(`_getElementsByName - element not allowed: ${a}`);continue}i.push({id:a,exportValue:c,domElement:u})}return i}for(const r of document.getElementsByName(e)){const{exportValue:s}=r,a=r.getAttribute("data-element-id");a!==t&&el.has(r)&&i.push({id:a,exportValue:s,domElement:r})}return i}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var i;(i=this.linkService.eventBus)==null||i.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}};vo=new WeakMap,gc=new WeakMap,mc=new WeakMap,pd=new WeakSet,ky=function(e){const{container:{style:t},data:{rect:i,rotation:r},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:a,pageX:o,pageY:c}}}}=this;i==null||i.splice(0,4,...e);const{width:u,height:h}=ua(e);t.left=`${100*(e[0]-o)/s}%`,t.top=`${100*(a-e[3]+c)/a}%`,r===0?(t.width=`${100*u/s}%`,t.height=`${100*h/a}%`):this.setRotation(r)};let pt=xw;var qn,Ta,WE,XE;class VE extends pt{constructor(t,i=null){super(t,{isRenderable:!0,ignoreBorder:!!(i!=null&&i.ignoreBorder),createQuadrilaterals:!0});b(this,qn);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:i}=this,r=document.createElement("a");r.setAttribute("data-element-id",t.id);let s=!1;return t.url?(i.addLinkAttributes(r,t.url,t.newWindow),s=!0):t.action?(this._bindNamedAction(r,t.action),s=!0):t.attachment?(A(this,qn,WE).call(this,r,t.attachment,t.attachmentDest),s=!0):t.setOCGState?(A(this,qn,XE).call(this,r,t.setOCGState),s=!0):t.dest?(this._bindLink(r,t.dest),s=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,t),s=!0),t.resetForm?(this._bindResetFormAction(r,t.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(r,""),s=!0)),this.container.classList.add("linkAnnotation"),s&&this.container.append(r),this.container}_bindLink(t,i){t.href=this.linkService.getDestinationHash(i),t.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&A(this,qn,Ta).call(this)}_bindNamedAction(t,i){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(i),!1),A(this,qn,Ta).call(this)}_bindJSAction(t,i){t.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const s of Object.keys(i.actions)){const a=r.get(s);a&&(t[a]=()=>{var o;return(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:s}}),!1})}t.onclick||(t.onclick=()=>!1),A(this,qn,Ta).call(this)}_bindResetFormAction(t,i){const r=t.onclick;if(r||(t.href=this.linkService.getAnchorUrl("")),A(this,qn,Ta).call(this),!this._fieldObjects){we('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(t.onclick=()=>!1);return}t.onclick=()=>{var d;r==null||r();const{fields:s,refs:a,include:o}=i,c=[];if(s.length!==0||a.length!==0){const f=new Set(a);for(const p of s){const g=this._fieldObjects[p]||[];for(const{id:w}of g)f.add(w)}for(const p of Object.values(this._fieldObjects))for(const g of p)f.has(g.id)===o&&c.push(g)}else for(const f of Object.values(this._fieldObjects))c.push(...f);const u=this.annotationStorage,h=[];for(const f of c){const{id:p}=f;switch(h.push(p),f.type){case"text":{const w=f.defaultValue||"";u.setValue(p,{value:w});break}case"checkbox":case"radiobutton":{const w=f.defaultValue===f.exportValues;u.setValue(p,{value:w});break}case"combobox":case"listbox":{const w=f.defaultValue||"";u.setValue(p,{value:w});break}default:continue}const g=document.querySelector(`[data-element-id="${p}"]`);if(g){if(!el.has(g)){we(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;g.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}})),!1}}}qn=new WeakSet,Ta=function(){this.container.setAttribute("data-internal-link","")},WE=function(t,i,r=null){t.href=this.linkService.getAnchorUrl(""),i.description&&(t.title=i.description),t.onclick=()=>{var s;return(s=this.downloadManager)==null||s.openOrDownloadData(i.content,i.filename,r),!1},A(this,qn,Ta).call(this)},XE=function(t,i){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(i),!1),A(this,qn,Ta).call(this)};class LN extends pt{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class rl extends pt{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return gn.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,i,r,s){i.includes("mouse")?e.addEventListener(i,a=>{var o;(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:s(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):e.addEventListener(i,a=>{var o;if(i==="blur"){if(!t.focused||!a.relatedTarget)return;t.focused=!1}else if(i==="focus"){if(t.focused)return;t.focused=!0}s&&((o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:s(a)}}))})}_setEventListeners(e,t,i,r){var s,a,o;for(const[c,u]of i)(u==="Action"||(s=this.data.actions)!=null&&s[u])&&((u==="Focus"||u==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,c,u,r),u==="Focus"&&!((a=this.data.actions)!=null&&a.Blur)?this._setEventListener(e,t,"blur","Blur",null):u==="Blur"&&!((o=this.data.actions)!=null&&o.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":ae.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||RN,s=e.style;let a;const o=2,c=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-o),h=Math.round(u/(Hm*r))||1,d=u/h;a=Math.min(r,c(d/Hm))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-o);a=Math.min(r,c(u/Hm))}s.fontSize=`calc(${a}px * var(--scale-factor))`,s.color=ae.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(s.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class MN extends rl{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,i,r){const s=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=i),s.setValue(a.id,{[r]:i})}render(){var r,s;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const a=e.getValue(t,{value:this.data.fieldValue});let o=a.value||"";const c=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;c&&o.length>c&&(o=o.slice(0,c));let u=a.formattedValue||((r=this.data.textContent)==null?void 0:r.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const h={userValue:o,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=u??o,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type="text",i.setAttribute("value",u??o),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),el.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=of,this._setRequired(i,this.data.required),c&&(i.maxLength=c),i.addEventListener("input",f=>{e.setValue(t,{value:f.target.value}),this.setPropertyOnSiblings(i,"value",f.target.value,"value"),h.formattedValue=null}),i.addEventListener("resetform",f=>{const p=this.data.defaultFieldValue??"";i.value=h.userValue=p,h.formattedValue=null});let d=f=>{const{formattedValue:p}=h;p!=null&&(f.target.value=p),f.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",p=>{var w;if(h.focused)return;const{target:g}=p;h.userValue&&(g.value=h.userValue),h.lastCommittedValue=g.value,h.commitKey=1,(w=this.data.actions)!=null&&w.Focus||(h.focused=!0)}),i.addEventListener("updatefromsandbox",p=>{this.showElementAndHideCanvas(p.target);const g={value(w){h.userValue=w.detail.value??"",e.setValue(t,{value:h.userValue.toString()}),w.target.value=h.userValue},formattedValue(w){const{formattedValue:S}=w.detail;h.formattedValue=S,S!=null&&w.target!==document.activeElement&&(w.target.value=S),e.setValue(t,{formattedValue:S})},selRange(w){w.target.setSelectionRange(...w.detail.selRange)},charLimit:w=>{var x;const{charLimit:S}=w.detail,{target:v}=w;if(S===0){v.removeAttribute("maxLength");return}v.setAttribute("maxLength",S);let y=h.userValue;!y||y.length<=S||(y=y.slice(0,S),v.value=h.userValue=y,e.setValue(t,{value:y}),(x=this.linkService.eventBus)==null||x.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:y,willCommit:!0,commitKey:1,selStart:v.selectionStart,selEnd:v.selectionEnd}}))}};this._dispatchEventFromSandbox(g,p)}),i.addEventListener("keydown",p=>{var S;h.commitKey=1;let g=-1;if(p.key==="Escape"?g=0:p.key==="Enter"&&!this.data.multiLine?g=2:p.key==="Tab"&&(h.commitKey=3),g===-1)return;const{value:w}=p.target;h.lastCommittedValue!==w&&(h.lastCommittedValue=w,h.userValue=w,(S=this.linkService.eventBus)==null||S.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:w,willCommit:!0,commitKey:g,selStart:p.target.selectionStart,selEnd:p.target.selectionEnd}}))});const f=d;d=null,i.addEventListener("blur",p=>{var w,S;if(!h.focused||!p.relatedTarget)return;(w=this.data.actions)!=null&&w.Blur||(h.focused=!1);const{value:g}=p.target;h.userValue=g,h.lastCommittedValue!==g&&((S=this.linkService.eventBus)==null||S.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:g,willCommit:!0,commitKey:h.commitKey,selStart:p.target.selectionStart,selEnd:p.target.selectionEnd}})),f(p)}),(s=this.data.actions)!=null&&s.Keystroke&&i.addEventListener("beforeinput",p=>{var T;h.lastCommittedValue=null;const{data:g,target:w}=p,{value:S,selectionStart:v,selectionEnd:y}=w;let x=v,E=y;switch(p.inputType){case"deleteWordBackward":{const _=S.substring(0,v).match(/\w*[^\w]*$/);_&&(x-=_[0].length);break}case"deleteWordForward":{const _=S.substring(v).match(/^[^\w]*\w*/);_&&(E+=_[0].length);break}case"deleteContentBackward":v===y&&(x-=1);break;case"deleteContentForward":v===y&&(E+=1);break}p.preventDefault(),(T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:S,change:g||"",willCommit:!1,selStart:x,selEnd:E}})}),this._setEventListeners(i,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],p=>p.target.value)}if(d&&i.addEventListener("blur",d),this.data.comb){const p=(this.data.rect[2]-this.data.rect[0])/c;i.classList.add("comb"),i.style.letterSpacing=`calc(${p}px * var(--scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class NN extends rl{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class IN extends rl{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,i=t.id;let r=e.getValue(i,{value:t.exportValue===t.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",e.setValue(i,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const s=document.createElement("input");return el.add(s),s.setAttribute("data-element-id",i),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=t.fieldName,r&&s.setAttribute("checked",!0),s.setAttribute("exportValue",t.exportValue),s.tabIndex=of,s.addEventListener("change",a=>{const{name:o,checked:c}=a.target;for(const u of this._getElementsByName(o,i)){const h=c&&u.exportValue===t.exportValue;u.domElement&&(u.domElement.checked=h),e.setValue(u.id,{value:h})}e.setValue(i,{value:c})}),s.addEventListener("resetform",a=>{const o=t.defaultFieldValue||"Off";a.target.checked=o===t.exportValue}),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",a=>{const o={value(c){c.target.checked=c.detail.value!=="Off",e.setValue(i,{value:c.target.checked})}};this._dispatchEventFromSandbox(o,a)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class YE extends rl{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,i=t.id;let r=e.getValue(i,{value:t.fieldValue===t.buttonValue}).value;if(typeof r=="string"&&(r=r!==t.buttonValue,e.setValue(i,{value:r})),r)for(const a of this._getElementsByName(t.fieldName,i))e.setValue(a.id,{value:!1});const s=document.createElement("input");if(el.add(s),s.setAttribute("data-element-id",i),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=t.fieldName,r&&s.setAttribute("checked",!0),s.tabIndex=of,s.addEventListener("change",a=>{const{name:o,checked:c}=a.target;for(const u of this._getElementsByName(o,i))e.setValue(u.id,{value:!1});e.setValue(i,{value:c})}),s.addEventListener("resetform",a=>{const o=t.defaultFieldValue;a.target.checked=o!=null&&o===t.buttonValue}),this.enableScripting&&this.hasJSActions){const a=t.buttonValue;s.addEventListener("updatefromsandbox",o=>{const c={value:u=>{const h=a===u.detail.value;for(const d of this._getElementsByName(u.target.name)){const f=h&&d.id===i;d.domElement&&(d.domElement.checked=f),e.setValue(d.id,{value:f})}}};this._dispatchEventFromSandbox(c,o)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class DN extends VE{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),e}}class ON extends rl{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,i=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");el.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=of;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",h=>{const d=this.data.defaultFieldValue;for(const f of r.options)f.selected=f.value===d});for(const h of this.data.options){const d=document.createElement("option");d.textContent=h.displayValue,d.value=h.exportValue,i.value.includes(h.exportValue)&&(d.setAttribute("selected",!0),s=!1),r.append(d)}let a=null;if(s){const h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),r.prepend(h),a=()=>{h.remove(),r.removeEventListener("input",a),a=null},r.addEventListener("input",a)}const o=h=>{const d=h?"value":"textContent",{options:f,multiple:p}=r;return p?Array.prototype.filter.call(f,g=>g.selected).map(g=>g[d]):f.selectedIndex===-1?null:f[f.selectedIndex][d]};let c=o(!1);const u=h=>{const d=h.target.options;return Array.prototype.map.call(d,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",h=>{const d={value(f){a==null||a();const p=f.detail.value,g=new Set(Array.isArray(p)?p:[p]);for(const w of r.options)w.selected=g.has(w.value);e.setValue(t,{value:o(!0)}),c=o(!1)},multipleSelection(f){r.multiple=!0},remove(f){const p=r.options,g=f.detail.remove;p[g].selected=!1,r.remove(g),p.length>0&&Array.prototype.findIndex.call(p,S=>S.selected)===-1&&(p[0].selected=!0),e.setValue(t,{value:o(!0),items:u(f)}),c=o(!1)},clear(f){for(;r.length!==0;)r.remove(0);e.setValue(t,{value:null,items:[]}),c=o(!1)},insert(f){const{index:p,displayValue:g,exportValue:w}=f.detail.insert,S=r.children[p],v=document.createElement("option");v.textContent=g,v.value=w,S?S.before(v):r.append(v),e.setValue(t,{value:o(!0),items:u(f)}),c=o(!1)},items(f){const{items:p}=f.detail;for(;r.length!==0;)r.remove(0);for(const g of p){const{displayValue:w,exportValue:S}=g,v=document.createElement("option");v.textContent=w,v.value=S,r.append(v)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:o(!0),items:u(f)}),c=o(!1)},indices(f){const p=new Set(f.detail.indices);for(const g of f.target.options)g.selected=p.has(g.index);e.setValue(t,{value:o(!0)}),c=o(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(d,h)}),r.addEventListener("input",h=>{var p;const d=o(!0),f=o(!1);e.setValue(t,{value:d}),h.preventDefault(),(p=this.linkService.eventBus)==null||p.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:c,change:f,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],h=>h.target.value)):r.addEventListener("input",function(h){e.setValue(t,{value:o(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Ry extends pt{constructor(e){const{data:t,elements:i}=e;super(e,{isRenderable:pt._hasPopupData(t)}),this.elements=i,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new FN({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const i of this.elements)i.popup=e,i.container.ariaHasPopup="dialog",t.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(i=>`${uw}${i}`).join(",")),this.container}}var yc,_g,Cg,vc,wo,ct,Ur,wc,gd,md,bc,Gr,Pi,Vr,yd,Wr,vd,bo,Ao,He,fp,Py,KE,qE,QE,JE,pp,gp,Ly;class FN{constructor({container:e,color:t,elements:i,titleObj:r,modificationDate:s,contentsObj:a,richText:o,parent:c,rect:u,parentRect:h,open:d}){b(this,He);b(this,yc,A(this,He,QE).bind(this));b(this,_g,A(this,He,Ly).bind(this));b(this,Cg,A(this,He,gp).bind(this));b(this,vc,A(this,He,pp).bind(this));b(this,wo,null);b(this,ct,null);b(this,Ur,null);b(this,wc,null);b(this,gd,null);b(this,md,null);b(this,bc,null);b(this,Gr,!1);b(this,Pi,null);b(this,Vr,null);b(this,yd,null);b(this,Wr,null);b(this,vd,null);b(this,bo,null);b(this,Ao,!1);var f;m(this,ct,e),m(this,vd,r),m(this,Ur,a),m(this,Wr,o),m(this,md,c),m(this,wo,t),m(this,yd,u),m(this,bc,h),m(this,gd,i),m(this,wc,fw.toDateObject(s)),this.trigger=i.flatMap(p=>p.getElementsToTriggerPopup());for(const p of this.trigger)p.addEventListener("click",l(this,vc)),p.addEventListener("mouseenter",l(this,Cg)),p.addEventListener("mouseleave",l(this,_g)),p.classList.add("popupTriggerArea");for(const p of i)(f=p.container)==null||f.addEventListener("keydown",l(this,yc));l(this,ct).hidden=!0,d&&A(this,He,pp).call(this)}render(){if(l(this,Pi))return;const e=m(this,Pi,document.createElement("div"));if(e.className="popup",l(this,wo)){const s=e.style.outlineColor=ae.makeHexColor(...l(this,wo));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`:e.style.backgroundColor=ae.makeHexColor(...l(this,wo).map(o=>Math.floor(.7*(255-o)+o)))}const t=document.createElement("span");t.className="header";const i=document.createElement("h1");if(t.append(i),{dir:i.dir,str:i.textContent}=l(this,vd),e.append(t),l(this,wc)){const s=document.createElement("span");s.classList.add("popupDate"),s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:l(this,wc).valueOf()})),t.append(s)}const r=l(this,He,fp);if(r)GE.render({xfaHtml:r,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const s=this._formatContents(l(this,Ur));e.append(s)}l(this,ct).append(e)}_formatContents({str:e,dir:t}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=t;const r=e.split(/(?:\r\n?|\n)/);for(let s=0,a=r.length;s<a;++s){const o=r[s];i.append(document.createTextNode(o)),s<a-1&&i.append(document.createElement("br"))}return i}updateEdited({rect:e,popupContent:t}){var i;l(this,bo)||m(this,bo,{contentsObj:l(this,Ur),richText:l(this,Wr)}),e&&m(this,Vr,null),t&&(m(this,Wr,A(this,He,qE).call(this,t)),m(this,Ur,null)),(i=l(this,Pi))==null||i.remove(),m(this,Pi,null)}resetEdited(){var e;l(this,bo)&&({contentsObj:on(this,Ur)._,richText:on(this,Wr)._}=l(this,bo),m(this,bo,null),(e=l(this,Pi))==null||e.remove(),m(this,Pi,null),m(this,Vr,null))}forceHide(){m(this,Ao,this.isVisible),l(this,Ao)&&(l(this,ct).hidden=!0)}maybeShow(){l(this,Ao)&&(l(this,Pi)||A(this,He,gp).call(this),m(this,Ao,!1),l(this,ct).hidden=!1)}get isVisible(){return l(this,ct).hidden===!1}}yc=new WeakMap,_g=new WeakMap,Cg=new WeakMap,vc=new WeakMap,wo=new WeakMap,ct=new WeakMap,Ur=new WeakMap,wc=new WeakMap,gd=new WeakMap,md=new WeakMap,bc=new WeakMap,Gr=new WeakMap,Pi=new WeakMap,Vr=new WeakMap,yd=new WeakMap,Wr=new WeakMap,vd=new WeakMap,bo=new WeakMap,Ao=new WeakMap,He=new WeakSet,fp=function(){const e=l(this,Wr),t=l(this,Ur);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&l(this,Wr).html||null},Py=function(){var e,t,i;return((i=(t=(e=l(this,He,fp))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:i.fontSize)||0},KE=function(){var e,t,i;return((i=(t=(e=l(this,He,fp))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:i.color)||null},qE=function(e){const t=[],i={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},r={style:{color:l(this,He,KE),fontSize:l(this,He,Py)?`calc(${l(this,He,Py)}px * var(--scale-factor))`:""}};for(const s of e.split(`
`))t.push({name:"span",value:s,attributes:r});return i},QE=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&l(this,Gr))&&A(this,He,pp).call(this)},JE=function(){if(l(this,Vr)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:i,pageX:r,pageY:s}}}=l(this,md);let a=!!l(this,bc),o=a?l(this,bc):l(this,yd);for(const g of l(this,gd))if(!o||ae.intersect(g.data.rect,o)!==null){o=g.data.rect,a=!0;break}const c=ae.normalizeRect([o[0],e[3]-o[1]+e[1],o[2],e[3]-o[3]+e[1]]),h=a?o[2]-o[0]+5:0,d=c[0]+h,f=c[1];m(this,Vr,[100*(d-r)/t,100*(f-s)/i]);const{style:p}=l(this,ct);p.left=`${l(this,Vr)[0]}%`,p.top=`${l(this,Vr)[1]}%`},pp=function(){m(this,Gr,!l(this,Gr)),l(this,Gr)?(A(this,He,gp).call(this),l(this,ct).addEventListener("click",l(this,vc)),l(this,ct).addEventListener("keydown",l(this,yc))):(A(this,He,Ly).call(this),l(this,ct).removeEventListener("click",l(this,vc)),l(this,ct).removeEventListener("keydown",l(this,yc)))},gp=function(){l(this,Pi)||this.render(),this.isVisible?l(this,Gr)&&l(this,ct).classList.add("focused"):(A(this,He,JE).call(this),l(this,ct).hidden=!1,l(this,ct).style.zIndex=parseInt(l(this,ct).style.zIndex)+1e3)},Ly=function(){l(this,ct).classList.remove("focused"),!(l(this,Gr)||!this.isVisible)&&(l(this,ct).hidden=!0,l(this,ct).style.zIndex=parseInt(l(this,ct).style.zIndex)-1e3)};class ZE extends pt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=ve.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const i=document.createElement("span");i.textContent=t,e.append(i)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var wd;class jN extends pt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});b(this,wd,null)}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:i,height:r}=ua(t.rect),s=this.svgFactory.create(i,r,!0),a=m(this,wd,this.svgFactory.createElement("svg:line"));return a.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),a.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),a.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),a.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),a.setAttribute("stroke-width",t.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,wd)}addHighlightArea(){this.container.classList.add("highlightArea")}}wd=new WeakMap;var bd;class zN extends pt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});b(this,bd,null)}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:i,height:r}=ua(t.rect),s=this.svgFactory.create(i,r,!0),a=t.borderStyle.width,o=m(this,bd,this.svgFactory.createElement("svg:rect"));return o.setAttribute("x",a/2),o.setAttribute("y",a/2),o.setAttribute("width",i-a),o.setAttribute("height",r-a),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),s.append(o),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,bd)}addHighlightArea(){this.container.classList.add("highlightArea")}}bd=new WeakMap;var Ad;class BN extends pt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});b(this,Ad,null)}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:i,height:r}=ua(t.rect),s=this.svgFactory.create(i,r,!0),a=t.borderStyle.width,o=m(this,Ad,this.svgFactory.createElement("svg:ellipse"));return o.setAttribute("cx",i/2),o.setAttribute("cy",r/2),o.setAttribute("rx",i/2-a/2),o.setAttribute("ry",r/2-a/2),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),s.append(o),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,Ad)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ad=new WeakMap;var xd;class e_ extends pt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});b(this,xd,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:i,borderStyle:r,popupRef:s}}=this;if(!i)return this.container;const{width:a,height:o}=ua(t),c=this.svgFactory.create(a,o,!0);let u=[];for(let d=0,f=i.length;d<f;d+=2){const p=i[d]-t[0],g=t[3]-i[d+1];u.push(`${p},${g}`)}u=u.join(" ");const h=m(this,xd,this.svgFactory.createElement(this.svgElementName));return h.setAttribute("points",u),h.setAttribute("stroke-width",r.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),c.append(h),this.container.append(c),!s&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,xd)}addHighlightArea(){this.container.classList.add("highlightArea")}}xd=new WeakMap;class HN extends e_{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class $N extends pt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Sd,xo,Ed,My;class vw extends pt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});b(this,Ed);b(this,Sd,null);b(this,xo,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?ve.HIGHLIGHT:ve.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:i,inkLists:r,borderStyle:s,popupRef:a}}=this,{transform:o,width:c,height:u}=A(this,Ed,My).call(this,i,t),h=this.svgFactory.create(c,u,!0),d=m(this,Sd,this.svgFactory.createElement("svg:g"));h.append(d),d.setAttribute("stroke-width",s.width||1),d.setAttribute("stroke-linecap","round"),d.setAttribute("stroke-linejoin","round"),d.setAttribute("stroke-miterlimit",10),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),d.setAttribute("transform",o);for(let f=0,p=r.length;f<p;f++){const g=this.svgFactory.createElement(this.svgElementName);l(this,xo).push(g),g.setAttribute("points",r[f].join(",")),d.append(g)}return!a&&this.hasPopupData&&this._createPopup(),this.container.append(h),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:i,points:r,rect:s}=t,a=l(this,Sd);if(i>=0&&a.setAttribute("stroke-width",i||1),r)for(let o=0,c=l(this,xo).length;o<c;o++)l(this,xo)[o].setAttribute("points",r[o].join(","));if(s){const{transform:o,width:c,height:u}=A(this,Ed,My).call(this,this.data.rotation,s);a.parentElement.setAttribute("viewBox",`0 0 ${c} ${u}`),a.setAttribute("transform",o)}}getElementsToTriggerPopup(){return l(this,xo)}addHighlightArea(){this.container.classList.add("highlightArea")}}Sd=new WeakMap,xo=new WeakMap,Ed=new WeakSet,My=function(t,i){switch(t){case 90:return{transform:`rotate(90) translate(${-i[0]},${i[1]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};case 180:return{transform:`rotate(180) translate(${-i[2]},${i[1]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]};case 270:return{transform:`rotate(270) translate(${-i[2]},${i[3]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};default:return{transform:`translate(${-i[0]},${i[3]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]}}};class t_ extends pt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=ve.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class UN extends pt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class GN extends pt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class VN extends pt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class n_ extends pt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=ve.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var _d,Cd,Ny;class WN extends pt{constructor(t){var r;super(t,{isRenderable:!0});b(this,Cd);b(this,_d,null);const{file:i}=this.data;this.filename=i.filename,this.content=i.content,(r=this.linkService.eventBus)==null||r.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:i}=this;let r;i.hasAppearance||i.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(i.name)?"paperclip":"pushpin"}.svg`,i.fillAlpha&&i.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(i.fillAlpha*100)}%);`)),r.addEventListener("dblclick",A(this,Cd,Ny).bind(this)),m(this,_d,r);const{isMac:s}=gn.platform;return t.addEventListener("keydown",a=>{a.key==="Enter"&&(s?a.metaKey:a.ctrlKey)&&A(this,Cd,Ny).call(this)}),!i.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),t.append(r),t}getElementsToTriggerPopup(){return l(this,_d)}addHighlightArea(){this.container.classList.add("highlightArea")}}_d=new WeakMap,Cd=new WeakSet,Ny=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var Td,So,Eo,kd,tl,i_,Iy;class XN{constructor({div:e,accessibilityManager:t,annotationCanvasMap:i,annotationEditorUIManager:r,page:s,viewport:a,structTreeLayer:o}){b(this,tl);b(this,Td,null);b(this,So,null);b(this,Eo,new Map);b(this,kd,null);this.div=e,m(this,Td,t),m(this,So,i),m(this,kd,o||null),this.page=s,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=r}hasEditableAnnotations(){return l(this,Eo).size>0}async render(e){var a;const{annotations:t}=e,i=this.div;Jo(i,this.viewport);const r=new Map,s={data:null,layer:i,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new yw,annotationStorage:e.annotationStorage||new gw,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const o of t){if(o.noHTML)continue;const c=o.annotationType===xt.POPUP;if(c){const d=r.get(o.id);if(!d)continue;s.elements=d}else{const{width:d,height:f}=ua(o.rect);if(d<=0||f<=0)continue}s.data=o;const u=PN.create(s);if(!u.isRenderable)continue;if(!c&&o.popupRef){const d=r.get(o.popupRef);d?d.push(u):r.set(o.popupRef,[u])}const h=u.render();o.hidden&&(h.style.visibility="hidden"),await A(this,tl,i_).call(this,h,o.id),u._isEditable&&(l(this,Eo).set(u.data.id,u),(a=this._annotationEditorUIManager)==null||a.renderAnnotationElement(u))}A(this,tl,Iy).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,Jo(t,{rotation:e.rotation}),A(this,tl,Iy).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(l(this,Eo).values())}getEditableAnnotation(e){return l(this,Eo).get(e)}}Td=new WeakMap,So=new WeakMap,Eo=new WeakMap,kd=new WeakMap,tl=new WeakSet,i_=async function(e,t){var a,o;const i=e.firstChild||e,r=i.id=`${uw}${t}`,s=await((a=l(this,kd))==null?void 0:a.getAriaAttributes(r));if(s)for(const[c,u]of s)i.setAttribute(c,u);this.div.append(e),(o=l(this,Td))==null||o.moveElementInDOM(this.div,e,i,!1)},Iy=function(){if(!l(this,So))return;const e=this.div;for(const[t,i]of l(this,So)){const r=e.querySelector(`[data-annotation-id="${t}"]`);if(!r)continue;i.className="annotationContent";const{firstChild:s}=r;s?s.nodeName==="CANVAS"?s.replaceWith(i):s.classList.contains("annotationContent")?s.after(i):s.before(i):r.append(i)}l(this,So).clear()};const jf=/\r\n?|\n/g;var Li,zn,Rd,_o,Bn,bt,r_,s_,a_,mp,ss,yp,vp,o_,Oy,l_;const Ge=class Ge extends rt{constructor(t){super({...t,name:"freeTextEditor"});b(this,bt);b(this,Li);b(this,zn,"");b(this,Rd,`${this.id}-editor`);b(this,_o,null);b(this,Bn);m(this,Li,t.color||Ge._defaultColor||rt._defaultLineColor),m(this,Bn,t.fontSize||Ge._defaultFontSize)}static get _keyboardManager(){const t=Ge.prototype,i=a=>a.isEmpty(),r=Zo.TRANSLATE_SMALL,s=Zo.TRANSLATE_BIG;return xe(this,"_keyboardManager",new af([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[r,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[s,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:i}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,r],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,s],checker:i}]]))}static initialize(t,i){rt.initialize(t,i);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,i){switch(t){case _e.FREETEXT_SIZE:Ge._defaultFontSize=i;break;case _e.FREETEXT_COLOR:Ge._defaultColor=i;break}}updateParams(t,i){switch(t){case _e.FREETEXT_SIZE:A(this,bt,r_).call(this,i);break;case _e.FREETEXT_COLOR:A(this,bt,s_).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[_e.FREETEXT_SIZE,Ge._defaultFontSize],[_e.FREETEXT_COLOR,Ge._defaultColor||rt._defaultLineColor]]}get propertiesToUpdate(){return[[_e.FREETEXT_SIZE,l(this,Bn)],[_e.FREETEXT_COLOR,l(this,Li)]]}_translateEmpty(t,i){this._uiManager.translateSelectedEditors(t,i,!0)}getInitialTranslation(){const t=this.parentScale;return[-Ge._internalPadding*t,-(Ge._internalPadding+l(this,Bn))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(ve.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),m(this,_o,new AbortController);const t=this._uiManager.combinedSignal(l(this,_o));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t})}disableEditMode(){var t;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",l(this,Rd)),this._isDraggable=!0,(t=l(this,_o))==null||t.abort(),m(this,_o,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var i;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(i=this._initialOptions)!=null&&i.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=l(this,zn),i=m(this,zn,A(this,bt,a_).call(this).trimEnd());if(t===i)return;const r=s=>{if(m(this,zn,s),!s){this.remove();return}A(this,bt,vp).call(this),this._uiManager.rebuild(this),A(this,bt,mp).call(this)};this.addCommands({cmd:()=>{r(i)},undo:()=>{r(t)},mustExec:!1}),A(this,bt,mp).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Ge._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,i;this.width&&(t=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",l(this,Rd)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${l(this,Bn)}px * var(--scale-factor))`,r.color=l(this,Li),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),ag(this,this.div,["dblclick","keydown"]),this.width){const[s,a]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[c,u]=this.getInitialTranslation();[c,u]=this.pageTranslationToScreen(c,u);const[h,d]=this.pageDimensions,[f,p]=this.pageTranslation;let g,w;switch(this.rotation){case 0:g=t+(o[0]-f)/h,w=i+this.height-(o[1]-p)/d;break;case 90:g=t+(o[0]-f)/h,w=i-(o[1]-p)/d,[c,u]=[u,-c];break;case 180:g=t-this.width+(o[0]-f)/h,w=i-(o[1]-p)/d,[c,u]=[-c,-u];break;case 270:g=t+(o[0]-f-this.height*d)/h,w=i+(o[1]-p-this.width*h)/d,[c,u]=[-u,c];break}this.setAt(g*s,w*a,c,u)}else this.setAt(t*s,i*a,this.width*s,this.height*a);A(this,bt,vp).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var g,w,S;const i=t.clipboardData||window.clipboardData,{types:r}=i;if(r.length===1&&r[0]==="text/plain")return;t.preventDefault();const s=A(g=Ge,ss,Oy).call(g,i.getData("text")||"").replaceAll(jf,`
`);if(!s)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const o=a.getRangeAt(0);if(!s.includes(`
`)){o.insertNode(document.createTextNode(s)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:c,startOffset:u}=o,h=[],d=[];if(c.nodeType===Node.TEXT_NODE){const v=c.parentElement;if(d.push(c.nodeValue.slice(u).replaceAll(jf,"")),v!==this.editorDiv){let y=h;for(const x of this.editorDiv.childNodes){if(x===v){y=d;continue}y.push(A(w=Ge,ss,yp).call(w,x))}}h.push(c.nodeValue.slice(0,u).replaceAll(jf,""))}else if(c===this.editorDiv){let v=h,y=0;for(const x of this.editorDiv.childNodes)y++===u&&(v=d),v.push(A(S=Ge,ss,yp).call(S,x))}m(this,zn,`${h.join(`
`)}${s}${d.join(`
`)}`),A(this,bt,vp).call(this);const f=new Range;let p=h.reduce((v,y)=>v+y.length,0);for(const{firstChild:v}of this.editorDiv.childNodes)if(v.nodeType===Node.TEXT_NODE){const y=v.nodeValue.length;if(p<=y){f.setStart(v,p),f.setEnd(v,p);break}p-=y}a.removeAllRanges(),a.addRange(f)}get contentDiv(){return this.editorDiv}static async deserialize(t,i,r){var o;let s=null;if(t instanceof ZE){const{data:{defaultAppearanceData:{fontSize:c,fontColor:u},rect:h,rotation:d,id:f,popupRef:p},textContent:g,textPosition:w,parent:{page:{pageNumber:S}}}=t;if(!g||g.length===0)return null;s=t={annotationType:ve.FREETEXT,color:Array.from(u),fontSize:c,value:g.join(`
`),position:w,pageIndex:S-1,rect:h.slice(0),rotation:d,id:f,deleted:!1,popupRef:p}}const a=await super.deserialize(t,i,r);return m(a,Bn,t.fontSize),m(a,Li,ae.makeHexColor(...t.color)),m(a,zn,A(o=Ge,ss,Oy).call(o,t.value)),a.annotationElementId=t.id||null,a._initialData=s,a}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Ge._internalPadding*this.parentScale,r=this.getRect(i,i),s=rt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:l(this,Li)),a={annotationType:ve.FREETEXT,color:s,fontSize:l(this,Bn),value:A(this,bt,o_).call(this),pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?a:this.annotationElementId&&!A(this,bt,l_).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(t){const i=super.renderAnnotationElement(t);if(this.deleted)return i;const{style:r}=i;r.fontSize=`calc(${l(this,Bn)}px * var(--scale-factor))`,r.color=l(this,Li),i.replaceChildren();for(const a of l(this,zn).split(`
`)){const o=document.createElement("div");o.append(a?document.createTextNode(a):document.createElement("br")),i.append(o)}const s=Ge._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(s,s),popupContent:l(this,zn)}),i}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};Li=new WeakMap,zn=new WeakMap,Rd=new WeakMap,_o=new WeakMap,Bn=new WeakMap,bt=new WeakSet,r_=function(t){const i=s=>{this.editorDiv.style.fontSize=`calc(${s}px * var(--scale-factor))`,this.translate(0,-(s-l(this,Bn))*this.parentScale),m(this,Bn,s),A(this,bt,mp).call(this)},r=l(this,Bn);this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:_e.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},s_=function(t){const i=s=>{m(this,Li,this.editorDiv.style.color=s)},r=l(this,Li);this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:_e.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},a_=function(){var r;const t=[];this.editorDiv.normalize();let i=null;for(const s of this.editorDiv.childNodes)(i==null?void 0:i.nodeType)===Node.TEXT_NODE&&s.nodeName==="BR"||(t.push(A(r=Ge,ss,yp).call(r,s)),i=s);return t.join(`
`)},mp=function(){const[t,i]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:s,div:a}=this,o=a.style.display,c=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",s.div.append(this.div),r=a.getBoundingClientRect(),a.remove(),a.style.display=o,a.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=r.width/t,this.height=r.height/i):(this.width=r.height/t,this.height=r.width/i),this.fixAndSetPosition()},ss=new WeakSet,yp=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(jf,"")},vp=function(){if(this.editorDiv.replaceChildren(),!!l(this,zn))for(const t of l(this,zn).split(`
`)){const i=document.createElement("div");i.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(i)}},o_=function(){return l(this,zn).replaceAll(""," ")},Oy=function(t){return t.replaceAll(" ","")},l_=function(t){const{value:i,fontSize:r,color:s,pageIndex:a}=this._initialData;return this._hasBeenMoved||t.value!==i||t.fontSize!==r||t.color.some((o,c)=>o!==s[c])||t.pageIndex!==a},b(Ge,ss),de(Ge,"_freeTextDefaultContent",""),de(Ge,"_internalPadding",0),de(Ge,"_defaultColor",null),de(Ge,"_defaultFontSize",10),de(Ge,"_type","freetext"),de(Ge,"_editorType",ve.FREETEXT);let Dy=Ge;class q{toSVGPath(){$e("Abstract method `toSVGPath` must be implemented.")}get box(){$e("Abstract getter `box` must be implemented.")}serialize(e,t){$e("Abstract method `serialize` must be implemented.")}static _rescale(e,t,i,r,s,a){a||(a=new Float32Array(e.length));for(let o=0,c=e.length;o<c;o+=2)a[o]=t+e[o]*r,a[o+1]=i+e[o+1]*s;return a}static _rescaleAndSwap(e,t,i,r,s,a){a||(a=new Float32Array(e.length));for(let o=0,c=e.length;o<c;o+=2)a[o]=t+e[o+1]*r,a[o+1]=i+e[o]*s;return a}static _translate(e,t,i,r){r||(r=new Float32Array(e.length));for(let s=0,a=e.length;s<a;s+=2)r[s]=t+e[s],r[s+1]=i+e[s+1];return r}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,i,r,s){switch(s){case 90:return[1-t/i,e/r];case 180:return[1-e/i,1-t/r];case 270:return[t/i,1-e/r];default:return[e/i,t/r]}}static _normalizePagePoint(e,t,i){switch(i){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,i,r,s,a){return[(e+5*i)/6,(t+5*r)/6,(5*i+s)/6,(5*r+a)/6,(i+s)/2,(r+a)/2]}}de(q,"PRECISION",1e-4);var Hn,Mi,Ac,xc,cr,Ae,Co,To,Pd,Ld,Sc,Ec,$s,Md,Tg,kg,kt,Fu,c_,u_,h_,d_,f_,p_;const Tr=class Tr{constructor({x:e,y:t},i,r,s,a,o=0){b(this,kt);b(this,Hn);b(this,Mi,[]);b(this,Ac);b(this,xc);b(this,cr,[]);b(this,Ae,new Float32Array(18));b(this,Co);b(this,To);b(this,Pd);b(this,Ld);b(this,Sc);b(this,Ec);b(this,$s,[]);m(this,Hn,i),m(this,Ec,s*r),m(this,xc,a),l(this,Ae).set([NaN,NaN,NaN,NaN,e,t],6),m(this,Ac,o),m(this,Ld,l(Tr,Md)*r),m(this,Pd,l(Tr,kg)*r),m(this,Sc,r),l(this,$s).push(e,t)}isEmpty(){return isNaN(l(this,Ae)[8])}add({x:e,y:t}){var j;m(this,Co,e),m(this,To,t);const[i,r,s,a]=l(this,Hn);let[o,c,u,h]=l(this,Ae).subarray(8,12);const d=e-u,f=t-h,p=Math.hypot(d,f);if(p<l(this,Pd))return!1;const g=p-l(this,Ld),w=g/p,S=w*d,v=w*f;let y=o,x=c;o=u,c=h,u+=S,h+=v,(j=l(this,$s))==null||j.push(e,t);const E=-v/g,T=S/g,_=E*l(this,Ec),R=T*l(this,Ec);return l(this,Ae).set(l(this,Ae).subarray(2,8),0),l(this,Ae).set([u+_,h+R],4),l(this,Ae).set(l(this,Ae).subarray(14,18),12),l(this,Ae).set([u-_,h-R],16),isNaN(l(this,Ae)[6])?(l(this,cr).length===0&&(l(this,Ae).set([o+_,c+R],2),l(this,cr).push(NaN,NaN,NaN,NaN,(o+_-i)/s,(c+R-r)/a),l(this,Ae).set([o-_,c-R],14),l(this,Mi).push(NaN,NaN,NaN,NaN,(o-_-i)/s,(c-R-r)/a)),l(this,Ae).set([y,x,o,c,u,h],6),!this.isEmpty()):(l(this,Ae).set([y,x,o,c,u,h],6),Math.abs(Math.atan2(x-c,y-o)-Math.atan2(v,S))<Math.PI/2?([o,c,u,h]=l(this,Ae).subarray(2,6),l(this,cr).push(NaN,NaN,NaN,NaN,((o+u)/2-i)/s,((c+h)/2-r)/a),[o,c,y,x]=l(this,Ae).subarray(14,18),l(this,Mi).push(NaN,NaN,NaN,NaN,((y+o)/2-i)/s,((x+c)/2-r)/a),!0):([y,x,o,c,u,h]=l(this,Ae).subarray(0,6),l(this,cr).push(((y+5*o)/6-i)/s,((x+5*c)/6-r)/a,((5*o+u)/6-i)/s,((5*c+h)/6-r)/a,((o+u)/2-i)/s,((c+h)/2-r)/a),[u,h,o,c,y,x]=l(this,Ae).subarray(12,18),l(this,Mi).push(((y+5*o)/6-i)/s,((x+5*c)/6-r)/a,((5*o+u)/6-i)/s,((5*c+h)/6-r)/a,((o+u)/2-i)/s,((c+h)/2-r)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const e=l(this,cr),t=l(this,Mi);if(isNaN(l(this,Ae)[6])&&!this.isEmpty())return A(this,kt,c_).call(this);const i=[];i.push(`M${e[4]} ${e[5]}`);for(let r=6;r<e.length;r+=6)isNaN(e[r])?i.push(`L${e[r+4]} ${e[r+5]}`):i.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);A(this,kt,h_).call(this,i);for(let r=t.length-6;r>=6;r-=6)isNaN(t[r])?i.push(`L${t[r+4]} ${t[r+5]}`):i.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);return A(this,kt,u_).call(this,i),i.join(" ")}newFreeDrawOutline(e,t,i,r,s,a){return new g_(e,t,i,r,s,a)}getOutlines(){var d;const e=l(this,cr),t=l(this,Mi),i=l(this,Ae),[r,s,a,o]=l(this,Hn),c=new Float32Array((((d=l(this,$s))==null?void 0:d.length)??0)+2);for(let f=0,p=c.length-2;f<p;f+=2)c[f]=(l(this,$s)[f]-r)/a,c[f+1]=(l(this,$s)[f+1]-s)/o;if(c[c.length-2]=(l(this,Co)-r)/a,c[c.length-1]=(l(this,To)-s)/o,isNaN(i[6])&&!this.isEmpty())return A(this,kt,d_).call(this,c);const u=new Float32Array(l(this,cr).length+24+l(this,Mi).length);let h=e.length;for(let f=0;f<h;f+=2){if(isNaN(e[f])){u[f]=u[f+1]=NaN;continue}u[f]=e[f],u[f+1]=e[f+1]}h=A(this,kt,p_).call(this,u,h);for(let f=t.length-6;f>=6;f-=6)for(let p=0;p<6;p+=2){if(isNaN(t[f+p])){u[h]=u[h+1]=NaN,h+=2;continue}u[h]=t[f+p],u[h+1]=t[f+p+1],h+=2}return A(this,kt,f_).call(this,u,h),this.newFreeDrawOutline(u,c,l(this,Hn),l(this,Sc),l(this,Ac),l(this,xc))}};Hn=new WeakMap,Mi=new WeakMap,Ac=new WeakMap,xc=new WeakMap,cr=new WeakMap,Ae=new WeakMap,Co=new WeakMap,To=new WeakMap,Pd=new WeakMap,Ld=new WeakMap,Sc=new WeakMap,Ec=new WeakMap,$s=new WeakMap,Md=new WeakMap,Tg=new WeakMap,kg=new WeakMap,kt=new WeakSet,Fu=function(){const e=l(this,Ae).subarray(4,6),t=l(this,Ae).subarray(16,18),[i,r,s,a]=l(this,Hn);return[(l(this,Co)+(e[0]-t[0])/2-i)/s,(l(this,To)+(e[1]-t[1])/2-r)/a,(l(this,Co)+(t[0]-e[0])/2-i)/s,(l(this,To)+(t[1]-e[1])/2-r)/a]},c_=function(){const[e,t,i,r]=l(this,Hn),[s,a,o,c]=A(this,kt,Fu).call(this);return`M${(l(this,Ae)[2]-e)/i} ${(l(this,Ae)[3]-t)/r} L${(l(this,Ae)[4]-e)/i} ${(l(this,Ae)[5]-t)/r} L${s} ${a} L${o} ${c} L${(l(this,Ae)[16]-e)/i} ${(l(this,Ae)[17]-t)/r} L${(l(this,Ae)[14]-e)/i} ${(l(this,Ae)[15]-t)/r} Z`},u_=function(e){const t=l(this,Mi);e.push(`L${t[4]} ${t[5]} Z`)},h_=function(e){const[t,i,r,s]=l(this,Hn),a=l(this,Ae).subarray(4,6),o=l(this,Ae).subarray(16,18),[c,u,h,d]=A(this,kt,Fu).call(this);e.push(`L${(a[0]-t)/r} ${(a[1]-i)/s} L${c} ${u} L${h} ${d} L${(o[0]-t)/r} ${(o[1]-i)/s}`)},d_=function(e){const t=l(this,Ae),[i,r,s,a]=l(this,Hn),[o,c,u,h]=A(this,kt,Fu).call(this),d=new Float32Array(36);return d.set([NaN,NaN,NaN,NaN,(t[2]-i)/s,(t[3]-r)/a,NaN,NaN,NaN,NaN,(t[4]-i)/s,(t[5]-r)/a,NaN,NaN,NaN,NaN,o,c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,(t[16]-i)/s,(t[17]-r)/a,NaN,NaN,NaN,NaN,(t[14]-i)/s,(t[15]-r)/a],0),this.newFreeDrawOutline(d,e,l(this,Hn),l(this,Sc),l(this,Ac),l(this,xc))},f_=function(e,t){const i=l(this,Mi);return e.set([NaN,NaN,NaN,NaN,i[4],i[5]],t),t+=6},p_=function(e,t){const i=l(this,Ae).subarray(4,6),r=l(this,Ae).subarray(16,18),[s,a,o,c]=l(this,Hn),[u,h,d,f]=A(this,kt,Fu).call(this);return e.set([NaN,NaN,NaN,NaN,(i[0]-s)/o,(i[1]-a)/c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,(r[0]-s)/o,(r[1]-a)/c],t),t+=24},b(Tr,Md,8),b(Tr,Tg,2),b(Tr,kg,l(Tr,Md)+l(Tr,Tg));let cg=Tr;var _c,ko,Xr,Nd,$n,Id,dt,Rg,m_;class g_ extends q{constructor(t,i,r,s,a,o){super();b(this,Rg);b(this,_c);b(this,ko,new Float32Array(4));b(this,Xr);b(this,Nd);b(this,$n);b(this,Id);b(this,dt);m(this,dt,t),m(this,$n,i),m(this,_c,r),m(this,Id,s),m(this,Xr,a),m(this,Nd,o),this.lastPoint=[NaN,NaN],A(this,Rg,m_).call(this,o);const[c,u,h,d]=l(this,ko);for(let f=0,p=t.length;f<p;f+=2)t[f]=(t[f]-c)/h,t[f+1]=(t[f+1]-u)/d;for(let f=0,p=i.length;f<p;f+=2)i[f]=(i[f]-c)/h,i[f+1]=(i[f+1]-u)/d}toSVGPath(){const t=[`M${l(this,dt)[4]} ${l(this,dt)[5]}`];for(let i=6,r=l(this,dt).length;i<r;i+=6){if(isNaN(l(this,dt)[i])){t.push(`L${l(this,dt)[i+4]} ${l(this,dt)[i+5]}`);continue}t.push(`C${l(this,dt)[i]} ${l(this,dt)[i+1]} ${l(this,dt)[i+2]} ${l(this,dt)[i+3]} ${l(this,dt)[i+4]} ${l(this,dt)[i+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,i,r,s],a){const o=r-t,c=s-i;let u,h;switch(a){case 0:u=q._rescale(l(this,dt),t,s,o,-c),h=q._rescale(l(this,$n),t,s,o,-c);break;case 90:u=q._rescaleAndSwap(l(this,dt),t,i,o,c),h=q._rescaleAndSwap(l(this,$n),t,i,o,c);break;case 180:u=q._rescale(l(this,dt),r,i,-o,c),h=q._rescale(l(this,$n),r,i,-o,c);break;case 270:u=q._rescaleAndSwap(l(this,dt),r,s,-o,-c),h=q._rescaleAndSwap(l(this,$n),r,s,-o,-c);break}return{outline:Array.from(u),points:[Array.from(h)]}}get box(){return l(this,ko)}newOutliner(t,i,r,s,a,o=0){return new cg(t,i,r,s,a,o)}getNewOutline(t,i){const[r,s,a,o]=l(this,ko),[c,u,h,d]=l(this,_c),f=a*h,p=o*d,g=r*h+c,w=s*d+u,S=this.newOutliner({x:l(this,$n)[0]*f+g,y:l(this,$n)[1]*p+w},l(this,_c),l(this,Id),t,l(this,Nd),i??l(this,Xr));for(let v=2;v<l(this,$n).length;v+=2)S.add({x:l(this,$n)[v]*f+g,y:l(this,$n)[v+1]*p+w});return S.getOutlines()}}_c=new WeakMap,ko=new WeakMap,Xr=new WeakMap,Nd=new WeakMap,$n=new WeakMap,Id=new WeakMap,dt=new WeakMap,Rg=new WeakSet,m_=function(t){const i=l(this,dt);let r=i[4],s=i[5],a=r,o=s,c=r,u=s,h=r,d=s;const f=t?Math.max:Math.min;for(let g=6,w=i.length;g<w;g+=6){if(isNaN(i[g]))a=Math.min(a,i[g+4]),o=Math.min(o,i[g+5]),c=Math.max(c,i[g+4]),u=Math.max(u,i[g+5]),d<i[g+5]?(h=i[g+4],d=i[g+5]):d===i[g+5]&&(h=f(h,i[g+4]));else{const S=ae.bezierBoundingBox(r,s,...i.slice(g,g+6));a=Math.min(a,S[0]),o=Math.min(o,S[1]),c=Math.max(c,S[2]),u=Math.max(u,S[3]),d<S[3]?(h=S[2],d=S[3]):d===S[3]&&(h=f(h,S[2]))}r=i[g+4],s=i[g+5]}const p=l(this,ko);p[0]=a-l(this,Xr),p[1]=o-l(this,Xr),p[2]=c-a+2*l(this,Xr),p[3]=u-o+2*l(this,Xr),this.lastPoint=[h,d]};var Dd,Od,Us,Ni,yn,y_,wp,v_,w_,jy;class Fy{constructor(e,t=0,i=0,r=!0){b(this,yn);b(this,Dd);b(this,Od);b(this,Us,[]);b(this,Ni,[]);let s=1/0,a=-1/0,o=1/0,c=-1/0;const h=10**-4;for(const{x:v,y,width:x,height:E}of e){const T=Math.floor((v-t)/h)*h,_=Math.ceil((v+x+t)/h)*h,R=Math.floor((y-t)/h)*h,M=Math.ceil((y+E+t)/h)*h,j=[T,R,M,!0],z=[_,R,M,!1];l(this,Us).push(j,z),s=Math.min(s,T),a=Math.max(a,_),o=Math.min(o,R),c=Math.max(c,M)}const d=a-s+2*i,f=c-o+2*i,p=s-i,g=o-i,w=l(this,Us).at(r?-1:-2),S=[w[0],w[2]];for(const v of l(this,Us)){const[y,x,E]=v;v[0]=(y-p)/d,v[1]=(x-g)/f,v[2]=(E-g)/f}m(this,Dd,new Float32Array([p,g,d,f])),m(this,Od,S)}getOutlines(){l(this,Us).sort((t,i)=>t[0]-i[0]||t[1]-i[1]||t[2]-i[2]);const e=[];for(const t of l(this,Us))t[3]?(e.push(...A(this,yn,jy).call(this,t)),A(this,yn,v_).call(this,t)):(A(this,yn,w_).call(this,t),e.push(...A(this,yn,jy).call(this,t)));return A(this,yn,y_).call(this,e)}}Dd=new WeakMap,Od=new WeakMap,Us=new WeakMap,Ni=new WeakMap,yn=new WeakSet,y_=function(e){const t=[],i=new Set;for(const a of e){const[o,c,u]=a;t.push([o,c,a],[o,u,a])}t.sort((a,o)=>a[1]-o[1]||a[0]-o[0]);for(let a=0,o=t.length;a<o;a+=2){const c=t[a][2],u=t[a+1][2];c.push(u),u.push(c),i.add(c),i.add(u)}const r=[];let s;for(;i.size>0;){const a=i.values().next().value;let[o,c,u,h,d]=a;i.delete(a);let f=o,p=c;for(s=[o,u],r.push(s);;){let g;if(i.has(h))g=h;else if(i.has(d))g=d;else break;i.delete(g),[o,c,u,h,d]=g,f!==o&&(s.push(f,p,o,p===c?c:u),f=o),p=p===c?u:c}s.push(f,p)}return new YN(r,l(this,Dd),l(this,Od))},wp=function(e){const t=l(this,Ni);let i=0,r=t.length-1;for(;i<=r;){const s=i+r>>1,a=t[s][0];if(a===e)return s;a<e?i=s+1:r=s-1}return r+1},v_=function([,e,t]){const i=A(this,yn,wp).call(this,e);l(this,Ni).splice(i,0,[e,t])},w_=function([,e,t]){const i=A(this,yn,wp).call(this,e);for(let r=i;r<l(this,Ni).length;r++){const[s,a]=l(this,Ni)[r];if(s!==e)break;if(s===e&&a===t){l(this,Ni).splice(r,1);return}}for(let r=i-1;r>=0;r--){const[s,a]=l(this,Ni)[r];if(s!==e)break;if(s===e&&a===t){l(this,Ni).splice(r,1);return}}},jy=function(e){const[t,i,r]=e,s=[[t,i,r]],a=A(this,yn,wp).call(this,r);for(let o=0;o<a;o++){const[c,u]=l(this,Ni)[o];for(let h=0,d=s.length;h<d;h++){const[,f,p]=s[h];if(!(u<=f||p<=c)){if(f>=c){if(p>u)s[h][1]=u;else{if(d===1)return[];s.splice(h,1),h--,d--}continue}s[h][2]=c,p>u&&s.push([t,u,p])}}}return s};var Fd,Cc;class YN extends q{constructor(t,i,r){super();b(this,Fd);b(this,Cc);m(this,Cc,t),m(this,Fd,i),this.lastPoint=r}toSVGPath(){const t=[];for(const i of l(this,Cc)){let[r,s]=i;t.push(`M${r} ${s}`);for(let a=2;a<i.length;a+=2){const o=i[a],c=i[a+1];o===r?(t.push(`V${c}`),s=c):c===s&&(t.push(`H${o}`),r=o)}t.push("Z")}return t.join(" ")}serialize([t,i,r,s],a){const o=[],c=r-t,u=s-i;for(const h of l(this,Cc)){const d=new Array(h.length);for(let f=0;f<h.length;f+=2)d[f]=t+h[f]*c,d[f+1]=s-h[f+1]*u;o.push(d)}return o}get box(){return l(this,Fd)}get classNamesForOutlining(){return["highlightOutline"]}}Fd=new WeakMap,Cc=new WeakMap;class zy extends cg{newFreeDrawOutline(e,t,i,r,s,a){return new KN(e,t,i,r,s,a)}}class KN extends g_{newOutliner(e,t,i,r,s,a=0){return new zy(e,t,i,r,s,a)}}var Ii,Ro,Tc,_t,jd,kc,zd,Bd,Gs,Di,Rc,Hd,Be,By,Hy,$y,ka,b_,ys;const xn=class xn{constructor({editor:e=null,uiManager:t=null}){b(this,Be);b(this,Ii,null);b(this,Ro,null);b(this,Tc);b(this,_t,null);b(this,jd,!1);b(this,kc,!1);b(this,zd,null);b(this,Bd);b(this,Gs,null);b(this,Di,null);b(this,Rc);var i;e?(m(this,kc,!1),m(this,Rc,_e.HIGHLIGHT_COLOR),m(this,zd,e)):(m(this,kc,!0),m(this,Rc,_e.HIGHLIGHT_DEFAULT_COLOR)),m(this,Di,(e==null?void 0:e._uiManager)||t),m(this,Bd,l(this,Di)._eventBus),m(this,Tc,(e==null?void 0:e.color)||((i=l(this,Di))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98"),l(xn,Hd)||m(xn,Hd,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return xe(this,"_keyboardManager",new af([[["Escape","mac+Escape"],xn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],xn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],xn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],xn.prototype._moveToPrevious],[["Home","mac+Home"],xn.prototype._moveToBeginning],[["End","mac+End"],xn.prototype._moveToEnd]]))}renderButton(){const e=m(this,Ii,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=l(this,Di)._signal;e.addEventListener("click",A(this,Be,ka).bind(this),{signal:t}),e.addEventListener("keydown",A(this,Be,$y).bind(this),{signal:t});const i=m(this,Ro,document.createElement("span"));return i.className="swatch",i.setAttribute("aria-hidden",!0),i.style.backgroundColor=l(this,Tc),e.append(i),e}renderMainDropdown(){const e=m(this,_t,A(this,Be,By).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===l(this,Ii)){A(this,Be,ka).call(this,e);return}const t=e.target.getAttribute("data-color");t&&A(this,Be,Hy).call(this,t,e)}_moveToNext(e){var t,i;if(!l(this,Be,ys)){A(this,Be,ka).call(this,e);return}if(e.target===l(this,Ii)){(t=l(this,_t).firstChild)==null||t.focus();return}(i=e.target.nextSibling)==null||i.focus()}_moveToPrevious(e){var t,i;if(e.target===((t=l(this,_t))==null?void 0:t.firstChild)||e.target===l(this,Ii)){l(this,Be,ys)&&this._hideDropdownFromKeyboard();return}l(this,Be,ys)||A(this,Be,ka).call(this,e),(i=e.target.previousSibling)==null||i.focus()}_moveToBeginning(e){var t;if(!l(this,Be,ys)){A(this,Be,ka).call(this,e);return}(t=l(this,_t).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!l(this,Be,ys)){A(this,Be,ka).call(this,e);return}(t=l(this,_t).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=l(this,_t))==null||e.classList.add("hidden"),(t=l(this,Gs))==null||t.abort(),m(this,Gs,null)}_hideDropdownFromKeyboard(){var e;if(!l(this,kc)){if(!l(this,Be,ys)){(e=l(this,zd))==null||e.unselect();return}this.hideDropdown(),l(this,Ii).focus({preventScroll:!0,focusVisible:l(this,jd)})}}updateColor(e){if(l(this,Ro)&&(l(this,Ro).style.backgroundColor=e),!l(this,_t))return;const t=l(this,Di).highlightColors.values();for(const i of l(this,_t).children)i.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;(e=l(this,Ii))==null||e.remove(),m(this,Ii,null),m(this,Ro,null),(t=l(this,_t))==null||t.remove(),m(this,_t,null)}};Ii=new WeakMap,Ro=new WeakMap,Tc=new WeakMap,_t=new WeakMap,jd=new WeakMap,kc=new WeakMap,zd=new WeakMap,Bd=new WeakMap,Gs=new WeakMap,Di=new WeakMap,Rc=new WeakMap,Hd=new WeakMap,Be=new WeakSet,By=function(){const e=document.createElement("div"),t=l(this,Di)._signal;e.addEventListener("contextmenu",Vi,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[i,r]of l(this,Di).highlightColors){const s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",r),s.title=i,s.setAttribute("data-l10n-id",l(xn,Hd)[i]);const a=document.createElement("span");s.append(a),a.className="swatch",a.style.backgroundColor=r,s.setAttribute("aria-selected",r===l(this,Tc)),s.addEventListener("click",A(this,Be,Hy).bind(this,r),{signal:t}),e.append(s)}return e.addEventListener("keydown",A(this,Be,$y).bind(this),{signal:t}),e},Hy=function(e,t){t.stopPropagation(),l(this,Bd).dispatch("switchannotationeditorparams",{source:this,type:l(this,Rc),value:e})},$y=function(e){xn._keyboardManager.exec(this,e)},ka=function(e){if(l(this,Be,ys)){this.hideDropdown();return}if(m(this,jd,e.detail===0),l(this,Gs)||(m(this,Gs,new AbortController),window.addEventListener("pointerdown",A(this,Be,b_).bind(this),{signal:l(this,Di).combinedSignal(l(this,Gs))})),l(this,_t)){l(this,_t).classList.remove("hidden");return}const t=m(this,_t,A(this,Be,By).call(this));l(this,Ii).append(t)},b_=function(e){var t;(t=l(this,_t))!=null&&t.contains(e.target)||this.hideDropdown()},ys=function(){return l(this,_t)&&!l(this,_t).classList.contains("hidden")},b(xn,Hd,null);let ug=xn;var Pc,$d,Yr,Po,Lc,_n,Ud,Gd,Lo,li,Un,Bt,Mc,Kr,en,Nc,ci,Vd,ye,Uy,bp,A_,x_,S_,Gy,Ra,gi,ml,E_,Ap,ju,__,C_,T_,k_,R_;const De=class De extends rt{constructor(t){super({...t,name:"highlightEditor"});b(this,ye);b(this,Pc,null);b(this,$d,0);b(this,Yr);b(this,Po,null);b(this,Lc,null);b(this,_n,null);b(this,Ud,null);b(this,Gd,0);b(this,Lo,null);b(this,li,null);b(this,Un,null);b(this,Bt,!1);b(this,Mc,null);b(this,Kr);b(this,en,null);b(this,Nc,"");b(this,ci);b(this,Vd,"");this.color=t.color||De._defaultColor,m(this,ci,t.thickness||De._defaultThickness),m(this,Kr,t.opacity||De._defaultOpacity),m(this,Yr,t.boxes||null),m(this,Vd,t.methodOfCreation||""),m(this,Nc,t.text||""),this._isDraggable=!1,t.highlightId>-1?(m(this,Bt,!0),A(this,ye,bp).call(this,t),A(this,ye,Ra).call(this)):l(this,Yr)&&(m(this,Pc,t.anchorNode),m(this,$d,t.anchorOffset),m(this,Ud,t.focusNode),m(this,Gd,t.focusOffset),A(this,ye,Uy).call(this),A(this,ye,Ra).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const t=De.prototype;return xe(this,"_keyboardManager",new af([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:l(this,Bt)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:l(this,ci),methodOfCreation:l(this,Vd)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,i){var r;rt.initialize(t,i),De._defaultColor||(De._defaultColor=((r=i.highlightColors)==null?void 0:r.values().next().value)||"#fff066")}static updateDefaultParams(t,i){switch(t){case _e.HIGHLIGHT_DEFAULT_COLOR:De._defaultColor=i;break;case _e.HIGHLIGHT_THICKNESS:De._defaultThickness=i;break}}translateInPage(t,i){}get toolbarPosition(){return l(this,Mc)}updateParams(t,i){switch(t){case _e.HIGHLIGHT_COLOR:A(this,ye,A_).call(this,i);break;case _e.HIGHLIGHT_THICKNESS:A(this,ye,x_).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[_e.HIGHLIGHT_DEFAULT_COLOR,De._defaultColor],[_e.HIGHLIGHT_THICKNESS,De._defaultThickness]]}get propertiesToUpdate(){return[[_e.HIGHLIGHT_COLOR,this.color||De._defaultColor],[_e.HIGHLIGHT_THICKNESS,l(this,ci)||De._defaultThickness],[_e.HIGHLIGHT_FREE,l(this,Bt)]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(m(this,Lc,new ug({editor:this})),t.addColorPicker(l(this,Lc))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(A(this,ye,ju).call(this))}getBaseTranslation(){return[0,0]}getRect(t,i){return super.getRect(t,i,A(this,ye,ju).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){A(this,ye,Gy).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(A(this,ye,Ra).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let i=!1;this.parent&&!t?A(this,ye,Gy).call(this):t&&(A(this,ye,Ra).call(this,t),i=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),i&&this.select()}rotate(t){var s,a,o;const{drawLayer:i}=this.parent;let r;l(this,Bt)?(t=(t-this.rotation+360)%360,r=A(s=De,gi,ml).call(s,l(this,li).box,t)):r=A(a=De,gi,ml).call(a,[this.x,this.y,this.width,this.height],t),i.updateProperties(l(this,Un),{bbox:r,root:{"data-main-rotation":t}}),i.updateProperties(l(this,en),{bbox:A(o=De,gi,ml).call(o,l(this,_n).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();l(this,Nc)&&(t.setAttribute("aria-label",l(this,Nc)),t.setAttribute("role","mark")),l(this,Bt)?t.classList.add("free"):this.div.addEventListener("keydown",A(this,ye,E_).bind(this),{signal:this._uiManager._signal});const i=m(this,Lo,document.createElement("div"));t.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",i.style.clipPath=l(this,Po);const[r,s]=this.parentDimensions;return this.setDims(this.width*r,this.height*s),ag(this,l(this,Lo),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(l(this,en),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(l(this,en),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:A(this,ye,Ap).call(this,!0);break;case 1:case 3:A(this,ye,Ap).call(this,!1);break}}select(){var t;super.select(),l(this,en)&&((t=this.parent)==null||t.drawLayer.updateProperties(l(this,en),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),l(this,en)&&((t=this.parent)==null||t.drawLayer.updateProperties(l(this,en),{rootClass:{selected:!1}}),l(this,Bt)||A(this,ye,Ap).call(this,!1))}get _mustFixPosition(){return!l(this,Bt)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(l(this,Un),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(l(this,en),{rootClass:{hidden:!t}}))}static startHighlighting(t,i,{target:r,x:s,y:a}){const{x:o,y:c,width:u,height:h}=r.getBoundingClientRect(),d=new AbortController,f=t.combinedSignal(d),p=g=>{d.abort(),A(this,gi,k_).call(this,t,g)};window.addEventListener("blur",p,{signal:f}),window.addEventListener("pointerup",p,{signal:f}),window.addEventListener("pointerdown",Qn,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",Vi,{signal:f}),r.addEventListener("pointermove",A(this,gi,T_).bind(this,t),{signal:f}),this._freeHighlight=new zy({x:s,y:a},[o,c,u,h],t.scale,this._defaultThickness/2,i,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,i,r){var w,S,v,y;let s=null;if(t instanceof t_){const{data:{quadPoints:x,rect:E,rotation:T,id:_,color:R,opacity:M,popupRef:j},parent:{page:{pageNumber:z}}}=t;s=t={annotationType:ve.HIGHLIGHT,color:Array.from(R),opacity:M,quadPoints:x,boxes:null,pageIndex:z-1,rect:E.slice(0),rotation:T,id:_,deleted:!1,popupRef:j}}else if(t instanceof vw){const{data:{inkLists:x,rect:E,rotation:T,id:_,color:R,borderStyle:{rawWidth:M},popupRef:j},parent:{page:{pageNumber:z}}}=t;s=t={annotationType:ve.HIGHLIGHT,color:Array.from(R),thickness:M,inkLists:x,boxes:null,pageIndex:z-1,rect:E.slice(0),rotation:T,id:_,deleted:!1,popupRef:j}}const{color:a,quadPoints:o,inkLists:c,opacity:u}=t,h=await super.deserialize(t,i,r);h.color=ae.makeHexColor(...a),m(h,Kr,u||1),c&&m(h,ci,t.thickness),h.annotationElementId=t.id||null,h._initialData=s;const[d,f]=h.pageDimensions,[p,g]=h.pageTranslation;if(o){const x=m(h,Yr,[]);for(let E=0;E<o.length;E+=8)x.push({x:(o[E]-p)/d,y:1-(o[E+1]-g)/f,width:(o[E+2]-o[E])/d,height:(o[E+1]-o[E+5])/f});A(w=h,ye,Uy).call(w),A(S=h,ye,Ra).call(S),h.rotate(h.rotation)}else if(c){m(h,Bt,!0);const x=c[0],E={x:x[0]-p,y:f-(x[1]-g)},T=new zy(E,[0,0,d,f],1,l(h,ci)/2,!0,.001);for(let M=0,j=x.length;M<j;M+=2)E.x=x[M]-p,E.y=f-(x[M+1]-g),T.add(E);const{id:_,clipPathId:R}=i.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:h.color,"fill-opacity":h._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:T.toSVGPath()}},!0,!0);A(v=h,ye,bp).call(v,{highlightOutlines:T.getOutlines(),highlightId:_,clipPathId:R}),A(y=h,ye,Ra).call(y)}return h}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const i=this.getRect(0,0),r=rt._colorManager.convert(this.color),s={annotationType:ve.HIGHLIGHT,color:r,opacity:l(this,Kr),thickness:l(this,ci),quadPoints:A(this,ye,__).call(this),outlines:A(this,ye,C_).call(this,i),pageIndex:this.pageIndex,rect:i,rotation:A(this,ye,ju).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!A(this,ye,R_).call(this,s)?null:(s.id=this.annotationElementId,s)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Pc=new WeakMap,$d=new WeakMap,Yr=new WeakMap,Po=new WeakMap,Lc=new WeakMap,_n=new WeakMap,Ud=new WeakMap,Gd=new WeakMap,Lo=new WeakMap,li=new WeakMap,Un=new WeakMap,Bt=new WeakMap,Mc=new WeakMap,Kr=new WeakMap,en=new WeakMap,Nc=new WeakMap,ci=new WeakMap,Vd=new WeakMap,ye=new WeakSet,Uy=function(){const t=new Fy(l(this,Yr),.001);m(this,li,t.getOutlines()),[this.x,this.y,this.width,this.height]=l(this,li).box;const i=new Fy(l(this,Yr),.0025,.001,this._uiManager.direction==="ltr");m(this,_n,i.getOutlines());const{lastPoint:r}=l(this,_n);m(this,Mc,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height])},bp=function({highlightOutlines:t,highlightId:i,clipPathId:r}){var d,f;if(m(this,li,t),m(this,_n,t.getNewOutline(l(this,ci)/2+1.5,.0025)),i>=0)m(this,Un,i),m(this,Po,r),this.parent.drawLayer.finalizeDraw(i,{bbox:t.box,path:{d:t.toSVGPath()}}),m(this,en,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:l(this,_n).box,path:{d:l(this,_n).toSVGPath()}},!0));else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(l(this,Un),{bbox:A(d=De,gi,ml).call(d,l(this,li).box,(p-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(l(this,en),{bbox:A(f=De,gi,ml).call(f,l(this,_n).box,p),path:{d:l(this,_n).toSVGPath()}})}const[a,o,c,u]=t.box;switch(this.rotation){case 0:this.x=a,this.y=o,this.width=c,this.height=u;break;case 90:{const[p,g]=this.parentDimensions;this.x=o,this.y=1-a,this.width=c*g/p,this.height=u*p/g;break}case 180:this.x=1-a,this.y=1-o,this.width=c,this.height=u;break;case 270:{const[p,g]=this.parentDimensions;this.x=1-o,this.y=a,this.width=c*g/p,this.height=u*p/g;break}}const{lastPoint:h}=l(this,_n);m(this,Mc,[(h[0]-a)/c,(h[1]-o)/u])},A_=function(t){const i=(a,o)=>{var c,u;this.color=a,m(this,Kr,o),(c=this.parent)==null||c.drawLayer.updateProperties(l(this,Un),{root:{fill:a,"fill-opacity":o}}),(u=l(this,Lc))==null||u.updateColor(a)},r=this.color,s=l(this,Kr);this.addCommands({cmd:i.bind(this,t,De._defaultOpacity),undo:i.bind(this,r,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:_e.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},x_=function(t){const i=l(this,ci),r=s=>{m(this,ci,s),A(this,ye,S_).call(this,s)};this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:_e.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},S_=function(t){if(!l(this,Bt))return;A(this,ye,bp).call(this,{highlightOutlines:l(this,li).getNewOutline(t/2)}),this.fixAndSetPosition();const[i,r]=this.parentDimensions;this.setDims(this.width*i,this.height*r)},Gy=function(){l(this,Un)===null||!this.parent||(this.parent.drawLayer.remove(l(this,Un)),m(this,Un,null),this.parent.drawLayer.remove(l(this,en)),m(this,en,null))},Ra=function(t=this.parent){l(this,Un)===null&&({id:on(this,Un)._,clipPathId:on(this,Po)._}=t.drawLayer.draw({bbox:l(this,li).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":l(this,Kr)},rootClass:{highlight:!0,free:l(this,Bt)},path:{d:l(this,li).toSVGPath()}},!1,!0),m(this,en,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:l(this,Bt)},bbox:l(this,_n).box,path:{d:l(this,_n).toSVGPath()}},l(this,Bt))),l(this,Lo)&&(l(this,Lo).style.clipPath=l(this,Po)))},gi=new WeakSet,ml=function([t,i,r,s],a){switch(a){case 90:return[1-i-s,t,s,r];case 180:return[1-t-r,1-i-s,r,s];case 270:return[i,1-t-r,s,r]}return[t,i,r,s]},E_=function(t){De._keyboardManager.exec(this,t)},Ap=function(t){if(!l(this,Pc))return;const i=window.getSelection();t?i.setPosition(l(this,Pc),l(this,$d)):i.setPosition(l(this,Ud),l(this,Gd))},ju=function(){return l(this,Bt)?this.rotation:0},__=function(){if(l(this,Bt))return null;const[t,i]=this.pageDimensions,[r,s]=this.pageTranslation,a=l(this,Yr),o=new Float32Array(a.length*8);let c=0;for(const{x:u,y:h,width:d,height:f}of a){const p=u*t+r,g=(1-h)*i+s;o[c]=o[c+4]=p,o[c+1]=o[c+3]=g,o[c+2]=o[c+6]=p+d*t,o[c+5]=o[c+7]=g-f*i,c+=8}return o},C_=function(t){return l(this,li).serialize(t,A(this,ye,ju).call(this))},T_=function(t,i){this._freeHighlight.add(i)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},k_=function(t,i){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(i,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},R_=function(t){const{color:i}=this._initialData;return t.color.some((r,s)=>r!==i[s])},b(De,gi),de(De,"_defaultColor",null),de(De,"_defaultOpacity",1),de(De,"_defaultThickness",12),de(De,"_type","highlight"),de(De,"_editorType",ve.HIGHLIGHT),de(De,"_freeHighlightId",-1),de(De,"_freeHighlight",null),de(De,"_freeHighlightClipId","");let hg=De;var Mo;class qN{constructor(){b(this,Mo,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,i]of Object.entries(e))this.updateProperty(t,i)}updateSVGProperty(e,t){l(this,Mo)[e]=t}toSVGProperties(){const e=l(this,Mo);return m(this,Mo,Object.create(null)),{root:e}}reset(){m(this,Mo,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){$e("Not implemented")}}Mo=new WeakMap;var Gn,Ic,Mt,No,Io,Vs,Ws,Xs,Do,Le,Wy,Xy,Yy,zu,P_,xp,Bu,yl;const ee=class ee extends rt{constructor(t){super(t);b(this,Le);b(this,Gn,null);b(this,Ic);de(this,"_drawId",null);m(this,Ic,t.mustBeCommitted||!1),t.drawOutlines&&(A(this,Le,Wy).call(this,t),A(this,Le,zu).call(this))}static _mergeSVGProperties(t,i){const r=new Set(Object.keys(t));for(const[s,a]of Object.entries(i))r.has(s)?Object.assign(t[s],a):t[s]=a;return t}static getDefaultDrawingOptions(t){$e("Not implemented")}static get typesMap(){$e("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,i){const r=this.typesMap.get(t);r&&this._defaultDrawingOptions.updateProperty(r,i),this._currentParent&&(l(ee,Mt).updateProperty(r,i),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,i){const r=this.constructor.typesMap.get(t);r&&this._updateProperty(t,r,i)}static get defaultPropertiesToUpdate(){const t=[],i=this._defaultDrawingOptions;for(const[r,s]of this.typesMap)t.push([r,i[s]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:i}=this;for(const[r,s]of this.constructor.typesMap)t.push([r,i[s]]);return t}_updateProperty(t,i,r){const s=this._drawingOptions,a=s[i],o=c=>{var h;s.updateProperty(i,c);const u=l(this,Gn).updateProperty(i,c);u&&A(this,Le,Bu).call(this,u),(h=this.parent)==null||h.drawLayer.updateProperties(this._drawId,s.toSVGProperties())};this.addCommands({cmd:o.bind(this,r),undo:o.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,ee._mergeSVGProperties(l(this,Gn).getPathResizingSVGProperties(A(this,Le,xp).call(this)),{bbox:A(this,Le,yl).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,ee._mergeSVGProperties(l(this,Gn).getPathResizedSVGProperties(A(this,Le,xp).call(this)),{bbox:A(this,Le,yl).call(this)}))}_onTranslating(t,i){var r;(r=this.parent)==null||r.drawLayer.updateProperties(this._drawId,{bbox:A(this,Le,yl).call(this,t,i)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,ee._mergeSVGProperties(l(this,Gn).getPathTranslatedSVGProperties(A(this,Le,xp).call(this),this.parentDimensions),{bbox:A(this,Le,yl).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,l(this,Ic)&&(m(this,Ic,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){A(this,Le,Yy).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(A(this,Le,zu).call(this),A(this,Le,Bu).call(this,l(this,Gn).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let i=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),A(this,Le,Yy).call(this)):t&&(this._uiManager.addShouldRescale(this),A(this,Le,zu).call(this,t),i=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),i&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,ee._mergeSVGProperties({bbox:A(this,Le,yl).call(this)},l(this,Gn).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&A(this,Le,Bu).call(this,l(this,Gn).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;const t=super.render();t.classList.add("draw");const i=document.createElement("div");t.append(i),i.setAttribute("aria-hidden","true"),i.className="internal";const[r,s]=this.parentDimensions;return this.setDims(this.width*r,this.height*s),this._uiManager.addShouldRescale(this),this.disableEditing(),t}static createDrawerInstance(t,i,r,s,a){$e("Not implemented")}static startDrawing(t,i,r,s){var S;const{target:a,offsetX:o,offsetY:c,pointerId:u,pointerType:h}=s;if(l(ee,Ws)&&l(ee,Ws)!==h)return;const{viewport:{rotation:d}}=t,{width:f,height:p}=a.getBoundingClientRect(),g=m(ee,No,new AbortController),w=t.combinedSignal(g);if(l(ee,Vs)||m(ee,Vs,u),l(ee,Ws)??m(ee,Ws,h),window.addEventListener("pointerup",v=>{var y;l(ee,Vs)===v.pointerId?this._endDraw(v):(y=l(ee,Xs))==null||y.delete(v.pointerId)},{signal:w}),window.addEventListener("pointercancel",v=>{var y;l(ee,Vs)===v.pointerId?this._currentParent.endDrawingSession():(y=l(ee,Xs))==null||y.delete(v.pointerId)},{signal:w}),window.addEventListener("pointerdown",v=>{l(ee,Ws)===v.pointerType&&((l(ee,Xs)||m(ee,Xs,new Set)).add(v.pointerId),l(ee,Mt).isCancellable()&&(l(ee,Mt).removeLastElement(),l(ee,Mt).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:w}),window.addEventListener("contextmenu",Vi,{signal:w}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:w}),a.addEventListener("touchmove",v=>{v.timeStamp===l(ee,Do)&&Qn(v)},{signal:w}),t.toggleDrawing(),(S=i._editorUndoBar)==null||S.hide(),l(ee,Mt)){t.drawLayer.updateProperties(this._currentDrawId,l(ee,Mt).startNew(o,c,f,p,d));return}i.updateUIForDefaultProperties(this),m(ee,Mt,this.createDrawerInstance(o,c,f,p,d)),m(ee,Io,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(l(ee,Io).toSVGProperties(),l(ee,Mt).defaultSVGProperties),!0,!1)}static _drawMove(t){var a;if(m(ee,Do,-1),!l(ee,Mt))return;const{offsetX:i,offsetY:r,pointerId:s}=t;if(l(ee,Vs)===s){if(((a=l(ee,Xs))==null?void 0:a.size)>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,l(ee,Mt).add(i,r)),m(ee,Do,t.timeStamp),Qn(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,m(ee,Mt,null),m(ee,Io,null),m(ee,Ws,null),m(ee,Do,NaN)),l(ee,No)&&(l(ee,No).abort(),m(ee,No,null),m(ee,Vs,NaN),m(ee,Xs,null))}static _endDraw(t){const i=this._currentParent;if(i){if(i.toggleDrawing(!0),this._cleanup(!1),t&&i.drawLayer.updateProperties(this._currentDrawId,l(ee,Mt).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const r=l(ee,Mt),s=this._currentDrawId,a=r.getLastElement();i.addCommands({cmd:()=>{i.drawLayer.updateProperties(s,r.setLastElement(a))},undo:()=>{i.drawLayer.updateProperties(s,r.removeLastElement())},mustExec:!1,type:_e.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const i=this._currentParent;if(!i)return null;if(i.toggleDrawing(!0),i.cleanUndoStack(_e.DRAW_STEP),!l(ee,Mt).isEmpty()){const{pageDimensions:[r,s],scale:a}=i,o=i.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:l(ee,Mt).getOutlines(r*a,s*a,a,this._INNER_MARGIN),drawingOptions:l(ee,Io),mustBeCommitted:!t});return this._cleanup(!0),o}return i.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,i,r,s,a,o){$e("Not implemented")}static async deserialize(t,i,r){var d,f;const{rawDims:{pageWidth:s,pageHeight:a,pageX:o,pageY:c}}=i.viewport,u=this.deserializeDraw(o,c,s,a,this._INNER_MARGIN,t),h=await super.deserialize(t,i,r);return h.createDrawingOptions(t),A(d=h,Le,Wy).call(d,{drawOutlines:u}),A(f=h,Le,zu).call(f),h.onScaleChanging(),h.rotate(),h}serializeDraw(t){const[i,r]=this.pageTranslation,[s,a]=this.pageDimensions;return l(this,Gn).serialize([i,r,s,a],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Gn=new WeakMap,Ic=new WeakMap,Mt=new WeakMap,No=new WeakMap,Io=new WeakMap,Vs=new WeakMap,Ws=new WeakMap,Xs=new WeakMap,Do=new WeakMap,Le=new WeakSet,Wy=function({drawOutlines:t,drawId:i,drawingOptions:r}){m(this,Gn,t),this._drawingOptions||(this._drawingOptions=r),i>=0?(this._drawId=i,this.parent.drawLayer.finalizeDraw(i,t.defaultProperties)):this._drawId=A(this,Le,Xy).call(this,t,this.parent),A(this,Le,Bu).call(this,t.box)},Xy=function(t,i){const{id:r}=i.drawLayer.draw(ee._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return r},Yy=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},zu=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=A(this,Le,Xy).call(this,l(this,Gn),t)}},P_=function([t,i,r,s]){const{parentDimensions:[a,o],rotation:c}=this;switch(c){case 90:return[i,1-t,r*(o/a),s*(a/o)];case 180:return[1-t,1-i,r,s];case 270:return[1-i,t,r*(o/a),s*(a/o)];default:return[t,i,r,s]}},xp=function(){const{x:t,y:i,width:r,height:s,parentDimensions:[a,o],rotation:c}=this;switch(c){case 90:return[1-i,t,r*(a/o),s*(o/a)];case 180:return[1-t,1-i,r,s];case 270:return[i,1-t,r*(a/o),s*(o/a)];default:return[t,i,r,s]}},Bu=function(t){if([this.x,this.y,this.width,this.height]=A(this,Le,P_).call(this,t),this.div){this.fixAndSetPosition();const[i,r]=this.parentDimensions;this.setDims(this.width*i,this.height*r)}this._onResized()},yl=function(){const{x:t,y:i,width:r,height:s,rotation:a,parentRotation:o,parentDimensions:[c,u]}=this;switch((a*4+o)/90){case 1:return[1-i-s,t,s,r];case 2:return[1-t-r,1-i-s,r,s];case 3:return[i,1-t-r,s,r];case 4:return[t,i-r*(c/u),s*(u/c),r*(c/u)];case 5:return[1-i,t,r*(c/u),s*(u/c)];case 6:return[1-t-s*(u/c),1-i,s*(u/c),r*(c/u)];case 7:return[i-r*(c/u),1-t-s*(u/c),r*(c/u),s*(u/c)];case 8:return[t-r,i-s,r,s];case 9:return[1-i,t-r,s,r];case 10:return[1-t,1-i,r,s];case 11:return[i-s,1-t,s,r];case 12:return[t-s*(u/c),i,s*(u/c),r*(c/u)];case 13:return[1-i-r*(c/u),t-s*(u/c),r*(c/u),s*(u/c)];case 14:return[1-t,1-i-r*(c/u),s*(u/c),r*(c/u)];case 15:return[i,1-t,r*(c/u),s*(u/c)];default:return[t,i,r,s]}},de(ee,"_currentDrawId",-1),de(ee,"_currentParent",null),b(ee,Mt,null),b(ee,No,null),b(ee,Io,null),b(ee,Vs,NaN),b(ee,Ws,null),b(ee,Xs,null),b(ee,Do,NaN),de(ee,"_INNER_MARGIN",3);let Vy=ee;var ur,Nt,It,Oo,Dc,un,Ht,ui,Fo,jo,zo,Oc,Sp;class QN{constructor(e,t,i,r,s,a){b(this,Oc);b(this,ur,new Float64Array(6));b(this,Nt);b(this,It);b(this,Oo);b(this,Dc);b(this,un);b(this,Ht,"");b(this,ui,0);b(this,Fo,new dg);b(this,jo);b(this,zo);m(this,jo,i),m(this,zo,r),m(this,Oo,s),m(this,Dc,a),[e,t]=A(this,Oc,Sp).call(this,e,t);const o=m(this,Nt,[NaN,NaN,NaN,NaN,e,t]);m(this,un,[e,t]),m(this,It,[{line:o,points:l(this,un)}]),l(this,ur).set(o,0)}updateProperty(e,t){e==="stroke-width"&&m(this,Dc,t)}isEmpty(){return!l(this,It)||l(this,It).length===0}isCancellable(){return l(this,un).length<=10}add(e,t){[e,t]=A(this,Oc,Sp).call(this,e,t);const[i,r,s,a]=l(this,ur).subarray(2,6),o=e-s,c=t-a;return Math.hypot(l(this,jo)*o,l(this,zo)*c)<=2?null:(l(this,un).push(e,t),isNaN(i)?(l(this,ur).set([s,a,e,t],2),l(this,Nt).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(l(this,ur)[0])&&l(this,Nt).splice(6,6),l(this,ur).set([i,r,s,a,e,t],0),l(this,Nt).push(...q.createBezierPoints(i,r,s,a,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const i=this.add(e,t);return i||(l(this,un).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,i,r,s){m(this,jo,i),m(this,zo,r),m(this,Oo,s),[e,t]=A(this,Oc,Sp).call(this,e,t);const a=m(this,Nt,[NaN,NaN,NaN,NaN,e,t]);m(this,un,[e,t]);const o=l(this,It).at(-1);return o&&(o.line=new Float32Array(o.line),o.points=new Float32Array(o.points)),l(this,It).push({line:a,points:l(this,un)}),l(this,ur).set(a,0),m(this,ui,0),this.toSVGPath(),null}getLastElement(){return l(this,It).at(-1)}setLastElement(e){return l(this,It)?(l(this,It).push(e),m(this,Nt,e.line),m(this,un,e.points),m(this,ui,0),{path:{d:this.toSVGPath()}}):l(this,Fo).setLastElement(e)}removeLastElement(){if(!l(this,It))return l(this,Fo).removeLastElement();l(this,It).pop(),m(this,Ht,"");for(let e=0,t=l(this,It).length;e<t;e++){const{line:i,points:r}=l(this,It)[e];m(this,Nt,i),m(this,un,r),m(this,ui,0),this.toSVGPath()}return{path:{d:l(this,Ht)}}}toSVGPath(){const e=q.svgRound(l(this,Nt)[4]),t=q.svgRound(l(this,Nt)[5]);if(l(this,un).length===2)return m(this,Ht,`${l(this,Ht)} M ${e} ${t} Z`),l(this,Ht);if(l(this,un).length<=6){const r=l(this,Ht).lastIndexOf("M");m(this,Ht,`${l(this,Ht).slice(0,r)} M ${e} ${t}`),m(this,ui,6)}if(l(this,un).length===4){const r=q.svgRound(l(this,Nt)[10]),s=q.svgRound(l(this,Nt)[11]);return m(this,Ht,`${l(this,Ht)} L ${r} ${s}`),m(this,ui,12),l(this,Ht)}const i=[];l(this,ui)===0&&(i.push(`M ${e} ${t}`),m(this,ui,6));for(let r=l(this,ui),s=l(this,Nt).length;r<s;r+=6){const[a,o,c,u,h,d]=l(this,Nt).slice(r,r+6).map(q.svgRound);i.push(`C${a} ${o} ${c} ${u} ${h} ${d}`)}return m(this,Ht,l(this,Ht)+i.join(" ")),m(this,ui,l(this,Nt).length),l(this,Ht)}getOutlines(e,t,i,r){const s=l(this,It).at(-1);return s.line=new Float32Array(s.line),s.points=new Float32Array(s.points),l(this,Fo).build(l(this,It),e,t,i,l(this,Oo),l(this,Dc),r),m(this,ur,null),m(this,Nt,null),m(this,It,null),m(this,Ht,null),l(this,Fo)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}ur=new WeakMap,Nt=new WeakMap,It=new WeakMap,Oo=new WeakMap,Dc=new WeakMap,un=new WeakMap,Ht=new WeakMap,ui=new WeakMap,Fo=new WeakMap,jo=new WeakMap,zo=new WeakMap,Oc=new WeakSet,Sp=function(e,t){return q._normalizePoint(e,t,l(this,jo),l(this,zo),l(this,Oo))};var hn,Wd,Xd,Vn,hr,dr,Fc,jc,zc,Gt,Er,L_,M_,N_;const Sw=class Sw extends q{constructor(){super(...arguments);b(this,Gt);b(this,hn);b(this,Wd,0);b(this,Xd);b(this,Vn);b(this,hr);b(this,dr);b(this,Fc);b(this,jc);b(this,zc)}build(t,i,r,s,a,o,c){m(this,hr,i),m(this,dr,r),m(this,Fc,s),m(this,jc,a),m(this,zc,o),m(this,Xd,c??0),m(this,Vn,t),A(this,Gt,M_).call(this)}setLastElement(t){return l(this,Vn).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return l(this,Vn).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:i}of l(this,Vn)){if(t.push(`M${q.svgRound(i[4])} ${q.svgRound(i[5])}`),i.length===6){t.push("Z");continue}if(i.length===12){t.push(`L${q.svgRound(i[10])} ${q.svgRound(i[11])}`);continue}for(let r=6,s=i.length;r<s;r+=6){const[a,o,c,u,h,d]=i.subarray(r,r+6).map(q.svgRound);t.push(`C${a} ${o} ${c} ${u} ${h} ${d}`)}}return t.join("")}serialize([t,i,r,s],a){const o=[],c=[],[u,h,d,f]=A(this,Gt,L_).call(this);let p,g,w,S,v,y,x,E,T;switch(l(this,jc)){case 0:T=q._rescale,p=t,g=i+s,w=r,S=-s,v=t+u*r,y=i+(1-h-f)*s,x=t+(u+d)*r,E=i+(1-h)*s;break;case 90:T=q._rescaleAndSwap,p=t,g=i,w=r,S=s,v=t+h*r,y=i+u*s,x=t+(h+f)*r,E=i+(u+d)*s;break;case 180:T=q._rescale,p=t+r,g=i,w=-r,S=s,v=t+(1-u-d)*r,y=i+h*s,x=t+(1-u)*r,E=i+(h+f)*s;break;case 270:T=q._rescaleAndSwap,p=t+r,g=i+s,w=-r,S=-s,v=t+(1-h-f)*r,y=i+(1-u-d)*s,x=t+(1-h)*r,E=i+(1-u)*s;break}for(const{line:_,points:R}of l(this,Vn))o.push(T(_,p,g,w,S,a?new Array(_.length):null)),c.push(T(R,p,g,w,S,a?new Array(R.length):null));return{lines:o,points:c,rect:[v,y,x,E]}}static deserialize(t,i,r,s,a,{paths:{lines:o,points:c},rotation:u,thickness:h}){const d=[];let f,p,g,w,S;switch(u){case 0:S=q._rescale,f=-t/r,p=i/s+1,g=1/r,w=-1/s;break;case 90:S=q._rescaleAndSwap,f=-i/s,p=-t/r,g=1/s,w=1/r;break;case 180:S=q._rescale,f=t/r+1,p=-i/s,g=-1/r,w=1/s;break;case 270:S=q._rescaleAndSwap,f=i/s+1,p=t/r+1,g=-1/s,w=-1/r;break}if(!o){o=[];for(const y of c){const x=y.length;if(x===2){o.push(new Float32Array([NaN,NaN,NaN,NaN,y[0],y[1]]));continue}if(x===4){o.push(new Float32Array([NaN,NaN,NaN,NaN,y[0],y[1],NaN,NaN,NaN,NaN,y[2],y[3]]));continue}const E=new Float32Array(3*(x-2));o.push(E);let[T,_,R,M]=y.subarray(0,4);E.set([NaN,NaN,NaN,NaN,T,_],0);for(let j=4;j<x;j+=2){const z=y[j],V=y[j+1];E.set(q.createBezierPoints(T,_,R,M,z,V),(j-2)*3),[T,_,R,M]=[R,M,z,V]}}}for(let y=0,x=o.length;y<x;y++)d.push({line:S(o[y].map(E=>E??NaN),f,p,g,w),points:S(c[y].map(E=>E??NaN),f,p,g,w)});const v=new Sw;return v.build(d,r,s,1,u,h,a),v}get box(){return l(this,hn)}updateProperty(t,i){return t==="stroke-width"?A(this,Gt,N_).call(this,i):null}updateParentDimensions([t,i],r){const[s,a]=A(this,Gt,Er).call(this);m(this,hr,t),m(this,dr,i),m(this,Fc,r);const[o,c]=A(this,Gt,Er).call(this),u=o-s,h=c-a,d=l(this,hn);return d[0]-=u,d[1]-=h,d[2]+=2*u,d[3]+=2*h,d}updateRotation(t){return m(this,Wd,t),{path:{transform:this.rotationTransform}}}get viewBox(){return l(this,hn).map(q.svgRound).join(" ")}get defaultProperties(){const[t,i]=l(this,hn);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${q.svgRound(t)} ${q.svgRound(i)}`}}}get rotationTransform(){const[,,t,i]=l(this,hn);let r=0,s=0,a=0,o=0,c=0,u=0;switch(l(this,Wd)){case 90:s=i/t,a=-t/i,c=t;break;case 180:r=-1,o=-1,c=t,u=i;break;case 270:s=-i/t,a=t/i,u=i;break;default:return""}return`matrix(${r} ${s} ${a} ${o} ${q.svgRound(c)} ${q.svgRound(u)})`}getPathResizingSVGProperties([t,i,r,s]){const[a,o]=A(this,Gt,Er).call(this),[c,u,h,d]=l(this,hn);if(Math.abs(h-a)<=q.PRECISION||Math.abs(d-o)<=q.PRECISION){const S=t+r/2-(c+h/2),v=i+s/2-(u+d/2);return{path:{"transform-origin":`${q.svgRound(t)} ${q.svgRound(i)}`,transform:`${this.rotationTransform} translate(${S} ${v})`}}}const f=(r-2*a)/(h-2*a),p=(s-2*o)/(d-2*o),g=h/r,w=d/s;return{path:{"transform-origin":`${q.svgRound(c)} ${q.svgRound(u)}`,transform:`${this.rotationTransform} scale(${g} ${w}) translate(${q.svgRound(a)} ${q.svgRound(o)}) scale(${f} ${p}) translate(${q.svgRound(-a)} ${q.svgRound(-o)})`}}}getPathResizedSVGProperties([t,i,r,s]){const[a,o]=A(this,Gt,Er).call(this),c=l(this,hn),[u,h,d,f]=c;if(c[0]=t,c[1]=i,c[2]=r,c[3]=s,Math.abs(d-a)<=q.PRECISION||Math.abs(f-o)<=q.PRECISION){const v=t+r/2-(u+d/2),y=i+s/2-(h+f/2);for(const{line:x,points:E}of l(this,Vn))q._translate(x,v,y,x),q._translate(E,v,y,E);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${q.svgRound(t)} ${q.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const p=(r-2*a)/(d-2*a),g=(s-2*o)/(f-2*o),w=-p*(u+a)+t+a,S=-g*(h+o)+i+o;if(p!==1||g!==1||w!==0||S!==0)for(const{line:v,points:y}of l(this,Vn))q._rescale(v,w,S,p,g,v),q._rescale(y,w,S,p,g,y);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${q.svgRound(t)} ${q.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,i],r){const[s,a]=r,o=l(this,hn),c=t-o[0],u=i-o[1];if(l(this,hr)===s&&l(this,dr)===a)for(const{line:h,points:d}of l(this,Vn))q._translate(h,c,u,h),q._translate(d,c,u,d);else{const h=l(this,hr)/s,d=l(this,dr)/a;m(this,hr,s),m(this,dr,a);for(const{line:f,points:p}of l(this,Vn))q._rescale(f,c,u,h,d,f),q._rescale(p,c,u,h,d,p);o[2]*=h,o[3]*=d}return o[0]=t,o[1]=i,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${q.svgRound(t)} ${q.svgRound(i)}`}}}get defaultSVGProperties(){const t=l(this,hn);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${q.svgRound(t[0])} ${q.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}};hn=new WeakMap,Wd=new WeakMap,Xd=new WeakMap,Vn=new WeakMap,hr=new WeakMap,dr=new WeakMap,Fc=new WeakMap,jc=new WeakMap,zc=new WeakMap,Gt=new WeakSet,Er=function(t=l(this,zc)){const i=l(this,Xd)+t/2*l(this,Fc);return l(this,jc)%180===0?[i/l(this,hr),i/l(this,dr)]:[i/l(this,dr),i/l(this,hr)]},L_=function(){const[t,i,r,s]=l(this,hn),[a,o]=A(this,Gt,Er).call(this,0);return[t+a,i+o,r-2*a,s-2*o]},M_=function(){const t=m(this,hn,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:s}of l(this,Vn)){if(s.length<=12){for(let c=4,u=s.length;c<u;c+=6){const[h,d]=s.subarray(c,c+2);t[0]=Math.min(t[0],h),t[1]=Math.min(t[1],d),t[2]=Math.max(t[2],h),t[3]=Math.max(t[3],d)}continue}let a=s[4],o=s[5];for(let c=6,u=s.length;c<u;c+=6){const[h,d,f,p,g,w]=s.subarray(c,c+6);ae.bezierBoundingBox(a,o,h,d,f,p,g,w,t),a=g,o=w}}const[i,r]=A(this,Gt,Er).call(this);t[0]=Math.min(1,Math.max(0,t[0]-i)),t[1]=Math.min(1,Math.max(0,t[1]-r)),t[2]=Math.min(1,Math.max(0,t[2]+i)),t[3]=Math.min(1,Math.max(0,t[3]+r)),t[2]-=t[0],t[3]-=t[1]},N_=function(t){const[i,r]=A(this,Gt,Er).call(this);m(this,zc,t);const[s,a]=A(this,Gt,Er).call(this),[o,c]=[s-i,a-r],u=l(this,hn);return u[0]-=o,u[1]-=c,u[2]+=2*o,u[3]+=2*c,u};let dg=Sw;var Bc;const Ew=class Ew extends qN{constructor(t){super();b(this,Bc);m(this,Bc,t),super.updateProperties({fill:"none",stroke:rt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,i){t==="stroke-width"&&(i??(i=this["stroke-width"]),i*=l(this,Bc).realScale),super.updateSVGProperty(t,i)}clone(){const t=new Ew(l(this,Bc));return t.updateAll(this),t}};Bc=new WeakMap;let Ky=Ew;var Pg,I_;const Ll=class Ll extends Vy{constructor(t){super({...t,name:"inkEditor"});b(this,Pg);this._willKeepAspectRatio=!0}static initialize(t,i){rt.initialize(t,i),this._defaultDrawingOptions=new Ky(i.viewParameters)}static getDefaultDrawingOptions(t){const i=this._defaultDrawingOptions.clone();return i.updateProperties(t),i}static get supportMultipleDrawings(){return!0}static get typesMap(){return xe(this,"typesMap",new Map([[_e.INK_THICKNESS,"stroke-width"],[_e.INK_COLOR,"stroke"],[_e.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,i,r,s,a){return new QN(t,i,r,s,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,i,r,s,a,o){return dg.deserialize(t,i,r,s,a,o)}static async deserialize(t,i,r){let s=null;if(t instanceof vw){const{data:{inkLists:o,rect:c,rotation:u,id:h,color:d,opacity:f,borderStyle:{rawWidth:p},popupRef:g},parent:{page:{pageNumber:w}}}=t;s=t={annotationType:ve.INK,color:Array.from(d),thickness:p,opacity:f,paths:{points:o},boxes:null,pageIndex:w-1,rect:c.slice(0),rotation:u,id:h,deleted:!1,popupRef:g}}const a=await super.deserialize(t,i,r);return a.annotationElementId=t.id||null,a._initialData=s,a}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:i,parent:r}=this;i.updateSVGProperty("stroke-width"),r.drawLayer.updateProperties(t,i.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:i,opacity:r}){this._drawingOptions=Ll.getDefaultDrawingOptions({stroke:ae.makeHexColor(...t),"stroke-width":i,"stroke-opacity":r})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:i,points:r,rect:s}=this.serializeDraw(t),{_drawingOptions:{stroke:a,"stroke-opacity":o,"stroke-width":c}}=this,u={annotationType:ve.INK,color:rt._colorManager.convert(a),opacity:o,thickness:c,paths:{lines:i,points:r},pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?u:this.annotationElementId&&!A(this,Pg,I_).call(this,u)?null:(u.id=this.annotationElementId,u)}renderAnnotationElement(t){const{points:i,rect:r}=this.serializeDraw(!1);return t.updateEdited({rect:r,thickness:this._drawingOptions["stroke-width"],points:i}),null}};Pg=new WeakSet,I_=function(t){const{color:i,thickness:r,opacity:s,pageIndex:a}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||t.color.some((o,c)=>o!==i[c])||t.thickness!==r||t.opacity!==s||t.pageIndex!==a},de(Ll,"_type","ink"),de(Ll,"_editorType",ve.INK),de(Ll,"_defaultDrawingOptions",null);let qy=Ll;var nt,$t,Ys,qr,Ks,Hc,fr,pr,Wn,$c,Ne,Hu,$u,Ep,Jy,_p,Zy,Cp,D_;const eh=class eh extends rt{constructor(t){super({...t,name:"stampEditor"});b(this,Ne);b(this,nt,null);b(this,$t,null);b(this,Ys,null);b(this,qr,null);b(this,Ks,null);b(this,Hc,"");b(this,fr,null);b(this,pr,null);b(this,Wn,!1);b(this,$c,!1);m(this,qr,t.bitmapUrl),m(this,Ks,t.bitmapFile)}static initialize(t,i){rt.initialize(t,i)}static get supportedTypes(){return xe(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(i=>`image/${i}`))}static get supportedTypesStr(){return xe(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,i){i.pasteEditor(ve.STAMP,{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const i=t.get("hasAltText");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}async mlGuessAltText(t=null,i=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:s,width:a,height:o}=t||this.copyCanvas(null,null,!0).imageData,c=await r.guess({name:"altText",request:{data:s,width:a,height:o,channels:s.length/(a*o)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const u=c.output;return await this.setGuessedAltText(u),i&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}remove(){var t;l(this,$t)&&(m(this,nt,null),this._uiManager.imageManager.deleteId(l(this,$t)),(t=l(this,fr))==null||t.remove(),m(this,fr,null),l(this,pr)&&(clearTimeout(l(this,pr)),m(this,pr,null))),super.remove()}rebuild(){if(!this.parent){l(this,$t)&&A(this,Ne,Ep).call(this);return}super.rebuild(),this.div!==null&&(l(this,$t)&&l(this,fr)===null&&A(this,Ne,Ep).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(l(this,Ys)||l(this,nt)||l(this,qr)||l(this,Ks)||l(this,$t))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,i;if(this.width&&(t=this.x,i=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),l(this,nt)?A(this,Ne,Jy).call(this):A(this,Ne,Ep).call(this),this.width&&!this.annotationElementId){const[r,s]=this.parentDimensions;this.setAt(t*r,i*s,this.width*r,this.height*s)}return this._uiManager.addShouldRescale(this),this.div}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;l(this,pr)!==null&&clearTimeout(l(this,pr)),m(this,pr,setTimeout(()=>{m(this,pr,null),A(this,Ne,Zy).call(this)},200))}copyCanvas(t,i,r=!1){var p;t||(t=224);const{width:s,height:a}=l(this,nt),o=new K0;let c=l(this,nt),u=s,h=a,d=null;if(i){if(s>i||a>i){const M=Math.min(i/s,i/a);u=Math.floor(s*M),h=Math.floor(a*M)}d=document.createElement("canvas");const g=d.width=Math.ceil(u*o.sx),w=d.height=Math.ceil(h*o.sy);l(this,Wn)||(c=A(this,Ne,_p).call(this,g,w));const S=d.getContext("2d");S.filter=this._uiManager.hcmFilter;let v="white",y="#cfcfd8";this._uiManager.hcmFilter!=="none"?y="black":(p=window.matchMedia)!=null&&p.call(window,"(prefers-color-scheme: dark)").matches&&(v="#8f8f9d",y="#42414d");const x=15,E=x*o.sx,T=x*o.sy,_=new OffscreenCanvas(E*2,T*2),R=_.getContext("2d");R.fillStyle=v,R.fillRect(0,0,E*2,T*2),R.fillStyle=y,R.fillRect(0,0,E,T),R.fillRect(E,T,E,T),S.fillStyle=S.createPattern(_,"repeat"),S.fillRect(0,0,g,w),S.drawImage(c,0,0,c.width,c.height,0,0,g,w)}let f=null;if(r){let g,w;if(o.symmetric&&c.width<t&&c.height<t)g=c.width,w=c.height;else if(c=l(this,nt),s>t||a>t){const y=Math.min(t/s,t/a);g=Math.floor(s*y),w=Math.floor(a*y),l(this,Wn)||(c=A(this,Ne,_p).call(this,g,w))}const v=new OffscreenCanvas(g,w).getContext("2d",{willReadFrequently:!0});v.drawImage(c,0,0,c.width,c.height,0,0,g,w),f={width:g,height:w,data:v.getImageData(0,0,g,w).data}}return{canvas:d,width:u,height:h,imageData:f}}getImageForAltText(){return l(this,fr)}static async deserialize(t,i,r){var w;let s=null;if(t instanceof n_){const{data:{rect:S,rotation:v,id:y,structParent:x,popupRef:E},container:T,parent:{page:{pageNumber:_}}}=t,R=T.querySelector("canvas"),M=r.imageManager.getFromCanvas(T.id,R);R.remove();const j=((w=await i._structTree.getAriaAttributes(`${uw}${y}`))==null?void 0:w.get("aria-label"))||"";s=t={annotationType:ve.STAMP,bitmapId:M.id,bitmap:M.bitmap,pageIndex:_-1,rect:S.slice(0),rotation:v,id:y,deleted:!1,accessibilityData:{decorative:!1,altText:j},isSvg:!1,structParent:x,popupRef:E}}const a=await super.deserialize(t,i,r),{rect:o,bitmap:c,bitmapUrl:u,bitmapId:h,isSvg:d,accessibilityData:f}=t;h&&r.imageManager.isValidId(h)?(m(a,$t,h),c&&m(a,nt,c)):m(a,qr,u),m(a,Wn,d);const[p,g]=a.pageDimensions;return a.width=(o[2]-o[0])/p,a.height=(o[3]-o[1])/g,a.annotationElementId=t.id||null,f&&(a.altTextData=f),a._initialData=s,m(a,$c,!!s),a}serialize(t=!1,i=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r={annotationType:ve.STAMP,bitmapId:l(this,$t),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:l(this,Wn),structTreeParentId:this._structTreeParentId};if(t)return r.bitmapUrl=A(this,Ne,Cp).call(this,!0),r.accessibilityData=this.serializeAltText(!0),r;const{decorative:s,altText:a}=this.serializeAltText(!1);if(!s&&a&&(r.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const c=A(this,Ne,D_).call(this,r);if(c.isSame)return null;c.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1}if(r.id=this.annotationElementId,i===null)return r;i.stamps||(i.stamps=new Map);const o=l(this,Wn)?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!i.stamps.has(l(this,$t)))i.stamps.set(l(this,$t),{area:o,serialized:r}),r.bitmap=A(this,Ne,Cp).call(this,!1);else if(l(this,Wn)){const c=i.stamps.get(l(this,$t));o>c.area&&(c.area=o,c.serialized.bitmap.close(),c.serialized.bitmap=A(this,Ne,Cp).call(this,!1))}return r}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}};nt=new WeakMap,$t=new WeakMap,Ys=new WeakMap,qr=new WeakMap,Ks=new WeakMap,Hc=new WeakMap,fr=new WeakMap,pr=new WeakMap,Wn=new WeakMap,$c=new WeakMap,Ne=new WeakSet,Hu=function(t,i=!1){if(!t){this.remove();return}m(this,nt,t.bitmap),i||(m(this,$t,t.id),m(this,Wn,t.isSvg)),t.file&&m(this,Hc,t.file.name),A(this,Ne,Jy).call(this)},$u=function(){if(m(this,Ys,null),this._uiManager.enableWaiting(!1),!!l(this,fr)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,nt)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,nt)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},Ep=function(){if(l(this,$t)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(l(this,$t)).then(r=>A(this,Ne,Hu).call(this,r,!0)).finally(()=>A(this,Ne,$u).call(this));return}if(l(this,qr)){const r=l(this,qr);m(this,qr,null),this._uiManager.enableWaiting(!0),m(this,Ys,this._uiManager.imageManager.getFromUrl(r).then(s=>A(this,Ne,Hu).call(this,s)).finally(()=>A(this,Ne,$u).call(this)));return}if(l(this,Ks)){const r=l(this,Ks);m(this,Ks,null),this._uiManager.enableWaiting(!0),m(this,Ys,this._uiManager.imageManager.getFromFile(r).then(s=>A(this,Ne,Hu).call(this,s)).finally(()=>A(this,Ne,$u).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=eh.supportedTypesStr;const i=this._uiManager._signal;m(this,Ys,new Promise(r=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const s=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),A(this,Ne,Hu).call(this,s)}r()},{signal:i}),t.addEventListener("cancel",()=>{this.remove(),r()},{signal:i})}).finally(()=>A(this,Ne,$u).call(this))),t.click()},Jy=function(){var d;const{div:t}=this;let{width:i,height:r}=l(this,nt);const[s,a]=this.pageDimensions,o=.75;if(this.width)i=this.width*s,r=this.height*a;else if(i>o*s||r>o*a){const f=Math.min(o*s/i,o*a/r);i*=f,r*=f}const[c,u]=this.parentDimensions;this.setDims(i*c/s,r*u/a),this._uiManager.enableWaiting(!1);const h=m(this,fr,document.createElement("canvas"));h.setAttribute("role","img"),this.addContainer(h),this.width=i/s,this.height=r/a,(d=this._initialOptions)!=null&&d.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),A(this,Ne,Zy).call(this),l(this,$c)||(this.parent.addUndoableEditor(this),m(this,$c,!0)),this._reportTelemetry({action:"inserted_image"}),l(this,Hc)&&h.setAttribute("aria-label",l(this,Hc))},_p=function(t,i){const{width:r,height:s}=l(this,nt);let a=r,o=s,c=l(this,nt);for(;a>2*t||o>2*i;){const u=a,h=o;a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),o>2*i&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const d=new OffscreenCanvas(a,o);d.getContext("2d").drawImage(c,0,0,u,h,0,0,a,o),c=d.transferToImageBitmap()}return c},Zy=function(){const[t,i]=this.parentDimensions,{width:r,height:s}=this,a=new K0,o=Math.ceil(r*t*a.sx),c=Math.ceil(s*i*a.sy),u=l(this,fr);if(!u||u.width===o&&u.height===c)return;u.width=o,u.height=c;const h=l(this,Wn)?l(this,nt):A(this,Ne,_p).call(this,o,c),d=u.getContext("2d");d.filter=this._uiManager.hcmFilter,d.drawImage(h,0,0,h.width,h.height,0,0,o,c)},Cp=function(t){if(t){if(l(this,Wn)){const s=this._uiManager.imageManager.getSvgUrl(l(this,$t));if(s)return s}const i=document.createElement("canvas");return{width:i.width,height:i.height}=l(this,nt),i.getContext("2d").drawImage(l(this,nt),0,0),i.toDataURL()}if(l(this,Wn)){const[i,r]=this.pageDimensions,s=Math.round(this.width*i*pa.PDF_TO_CSS_UNITS),a=Math.round(this.height*r*pa.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(s,a);return o.getContext("2d").drawImage(l(this,nt),0,0,l(this,nt).width,l(this,nt).height,0,0,s,a),o.transferToImageBitmap()}return structuredClone(l(this,nt))},D_=function(t){var o;const{pageIndex:i,accessibilityData:{altText:r}}=this._initialData,s=t.pageIndex===i,a=(((o=t.accessibilityData)==null?void 0:o.alt)||"")===r;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&s&&a,isSameAltText:a}},de(eh,"_type","stamp"),de(eh,"_editorType",ve.STAMP);let Qy=eh;var Bo,Uc,gr,qs,Qr,hi,Qs,Gc,Ho,Oi,Jr,tn,Zr,se,Js,Ze,O_,Qi,tv,nv,Tp;const Si=class Si{constructor({uiManager:e,pageIndex:t,div:i,structTreeLayer:r,accessibilityManager:s,annotationLayer:a,drawLayer:o,textLayer:c,viewport:u,l10n:h}){b(this,Ze);b(this,Bo);b(this,Uc,!1);b(this,gr,null);b(this,qs,null);b(this,Qr,null);b(this,hi,new Map);b(this,Qs,!1);b(this,Gc,!1);b(this,Ho,!1);b(this,Oi,null);b(this,Jr,null);b(this,tn,null);b(this,Zr,null);b(this,se);const d=[...l(Si,Js).values()];if(!Si._initialized){Si._initialized=!0;for(const f of d)f.initialize(h,e)}e.registerEditorTypes(d),m(this,se,e),this.pageIndex=t,this.div=i,m(this,Bo,s),m(this,gr,a),this.viewport=u,m(this,tn,c),this.drawLayer=o,this._structTree=r,l(this,se).addLayer(this)}get isEmpty(){return l(this,hi).size===0}get isInvisible(){return this.isEmpty&&l(this,se).getMode()===ve.NONE}updateToolbar(e){l(this,se).updateToolbar(e)}updateMode(e=l(this,se).getMode()){switch(A(this,Ze,Tp).call(this),e){case ve.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case ve.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case ve.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const i of l(Si,Js).values())t.toggle(`${i._type}Editing`,e===i._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=l(this,tn))==null?void 0:t.div)}setEditingState(e){l(this,se).setEditingState(e)}addCommands(e){l(this,se).addCommands(e)}cleanUndoStack(e){l(this,se).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=l(this,gr))==null||t.div.classList.toggle("disabled",!e)}async enable(){m(this,Ho,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const i of l(this,hi).values())i.enableEditing(),i.show(!0),i.annotationElementId&&(l(this,se).removeChangedExistingAnnotation(i),e.add(i.annotationElementId));if(!l(this,gr)){m(this,Ho,!1);return}const t=l(this,gr).getEditableAnnotations();for(const i of t){if(i.hide(),l(this,se).isDeletedAnnotationElement(i.data.id)||e.has(i.data.id))continue;const r=await this.deserialize(i);r&&(this.addOrRebuild(r),r.enableEditing())}m(this,Ho,!1)}disable(){var r;m(this,Gc,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const s of l(this,hi).values())if(s.disableEditing(),!!s.annotationElementId){if(s.serialize()!==null){e.set(s.annotationElementId,s);continue}else t.set(s.annotationElementId,s);(r=this.getEditableAnnotation(s.annotationElementId))==null||r.show(),s.remove()}if(l(this,gr)){const s=l(this,gr).getEditableAnnotations();for(const a of s){const{id:o}=a.data;if(l(this,se).isDeletedAnnotationElement(o))continue;let c=t.get(o);if(c){c.resetAnnotationElement(a),c.show(!1),a.show();continue}c=e.get(o),c&&(l(this,se).addChangedExistingAnnotation(c),c.renderAnnotationElement(a)&&c.show(!1)),a.show()}}A(this,Ze,Tp).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const s of l(Si,Js).values())i.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),m(this,Gc,!1)}getEditableAnnotation(e){var t;return((t=l(this,gr))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){l(this,se).getActive()!==e&&l(this,se).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=l(this,tn))!=null&&e.div&&!l(this,Zr)){m(this,Zr,new AbortController);const t=l(this,se).combinedSignal(l(this,Zr));l(this,tn).div.addEventListener("pointerdown",A(this,Ze,O_).bind(this),{signal:t}),l(this,tn).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=l(this,tn))!=null&&e.div&&l(this,Zr)&&(l(this,Zr).abort(),m(this,Zr,null),l(this,tn).div.classList.remove("highlighting"))}enableClick(){if(l(this,qs))return;m(this,qs,new AbortController);const e=l(this,se).combinedSignal(l(this,qs));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=l(this,qs))==null||e.abort(),m(this,qs,null)}attach(e){l(this,hi).set(e.id,e);const{annotationElementId:t}=e;t&&l(this,se).isDeletedAnnotationElement(t)&&l(this,se).removeDeletedAnnotationElement(e)}detach(e){var t;l(this,hi).delete(e.id),(t=l(this,Bo))==null||t.removePointerInTextLayer(e.contentDiv),!l(this,Gc)&&e.annotationElementId&&l(this,se).addDeletedAnnotationElement(e)}remove(e){this.detach(e),l(this,se).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(l(this,se).addDeletedAnnotationElement(e.annotationElementId),rt.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),l(this,se).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!l(this,Ho)),l(this,se).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var i;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!l(this,Qr)&&(e._focusEventsAllowed=!1,m(this,Qr,setTimeout(()=>{m(this,Qr,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:l(this,se)._signal}),t.focus())},0))),e._structTreeParentId=(i=l(this,Bo))==null?void 0:i.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),i=()=>{e.remove()};this.addCommands({cmd:t,undo:i,mustExec:!1})}getNextId(){return l(this,se).getId()}combinedSignal(e){return l(this,se).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=l(this,Ze,Qi))==null?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){l(this,se).updateToolbar(e),l(this,se).updateMode(e);const{offsetX:i,offsetY:r}=A(this,Ze,nv).call(this),s=this.getNextId(),a=A(this,Ze,tv).call(this,{parent:this,id:s,x:i,y:r,uiManager:l(this,se),isCentered:!0,...t});a&&this.add(a)}async deserialize(e){var t;return await((t=l(Si,Js).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,l(this,se)))||null}createAndAddNewEditor(e,t,i={}){const r=this.getNextId(),s=A(this,Ze,tv).call(this,{parent:this,id:r,x:e.offsetX,y:e.offsetY,uiManager:l(this,se),isCentered:t,...i});return s&&this.add(s),s}addNewEditor(){this.createAndAddNewEditor(A(this,Ze,nv).call(this),!0)}setSelected(e){l(this,se).setSelected(e)}toggleSelected(e){l(this,se).toggleSelected(e)}unselect(e){l(this,se).unselect(e)}pointerup(e){var i;const{isMac:t}=gn.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&l(this,Qs)&&(m(this,Qs,!1),!((i=l(this,Ze,Qi))!=null&&i.isDrawer&&l(this,Ze,Qi).supportMultipleDrawings))){if(!l(this,Uc)){m(this,Uc,!0);return}if(l(this,se).getMode()===ve.STAMP){l(this,se).unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){var r;if(l(this,se).getMode()===ve.HIGHLIGHT&&this.enableTextSelection(),l(this,Qs)){m(this,Qs,!1);return}const{isMac:t}=gn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(m(this,Qs,!0),(r=l(this,Ze,Qi))!=null&&r.isDrawer){this.startDrawingSession(e);return}const i=l(this,se).getActive();m(this,Uc,!i||i.isEmpty())}startDrawingSession(e){if(this.div.focus(),l(this,Oi)){l(this,Ze,Qi).startDrawing(this,l(this,se),!1,e);return}l(this,se).setCurrentDrawingSession(this),m(this,Oi,new AbortController);const t=l(this,se).combinedSignal(l(this,Oi));this.div.addEventListener("blur",({relatedTarget:i})=>{i&&!this.div.contains(i)&&(m(this,Jr,null),this.commitOrRemove())},{signal:t}),l(this,Ze,Qi).startDrawing(this,l(this,se),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&m(this,Jr,t);return}l(this,Jr)&&setTimeout(()=>{var t;(t=l(this,Jr))==null||t.focus(),m(this,Jr,null)},0)}endDrawingSession(e=!1){return l(this,Oi)?(l(this,se).setCurrentDrawingSession(null),l(this,Oi).abort(),m(this,Oi,null),m(this,Jr,null),l(this,Ze,Qi).endDrawing(e)):null}findNewParent(e,t,i){const r=l(this,se).findParent(t,i);return r===null||r===this?!1:(r.changeParent(e),!0)}commitOrRemove(){return l(this,Oi)?(this.endDrawingSession(),!0):!1}onScaleChanging(){l(this,Oi)&&l(this,Ze,Qi).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=l(this,se).getActive())==null?void 0:e.parent)===this&&(l(this,se).commitOrRemove(),l(this,se).setActiveEditor(null)),l(this,Qr)&&(clearTimeout(l(this,Qr)),m(this,Qr,null));for(const i of l(this,hi).values())(t=l(this,Bo))==null||t.removePointerInTextLayer(i.contentDiv),i.setParent(null),i.isAttachedToDOM=!1,i.div.remove();this.div=null,l(this,hi).clear(),l(this,se).removeLayer(this)}render({viewport:e}){this.viewport=e,Jo(this.div,e);for(const t of l(this,se).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){l(this,se).commitOrRemove(),A(this,Ze,Tp).call(this);const t=this.viewport.rotation,i=e.rotation;if(this.viewport=e,Jo(this.div,{rotation:i}),t!==i)for(const r of l(this,hi).values())r.rotate(i)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return l(this,se).viewParameters.realScale}};Bo=new WeakMap,Uc=new WeakMap,gr=new WeakMap,qs=new WeakMap,Qr=new WeakMap,hi=new WeakMap,Qs=new WeakMap,Gc=new WeakMap,Ho=new WeakMap,Oi=new WeakMap,Jr=new WeakMap,tn=new WeakMap,Zr=new WeakMap,se=new WeakMap,Js=new WeakMap,Ze=new WeakSet,O_=function(e){l(this,se).unselectAll();const{target:t}=e;if(t===l(this,tn).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&l(this,tn).div.contains(t)){const{isMac:i}=gn.platform;if(e.button!==0||e.ctrlKey&&i)return;l(this,se).showAllEditors("highlight",!0,!0),l(this,tn).div.classList.add("free"),this.toggleDrawing(),hg.startHighlighting(this,l(this,se).direction==="ltr",{target:l(this,tn).div,x:e.x,y:e.y}),l(this,tn).div.addEventListener("pointerup",()=>{l(this,tn).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:l(this,se)._signal}),e.preventDefault()}},Qi=function(){return l(Si,Js).get(l(this,se).getMode())},tv=function(e){const t=l(this,Ze,Qi);return t?new t.prototype.constructor(e):null},nv=function(){const{x:e,y:t,width:i,height:r}=this.div.getBoundingClientRect(),s=Math.max(0,e),a=Math.max(0,t),o=Math.min(window.innerWidth,e+i),c=Math.min(window.innerHeight,t+r),u=(s+o)/2-e,h=(a+c)/2-t,[d,f]=this.viewport.rotation%180===0?[u,h]:[h,u];return{offsetX:d,offsetY:f}},Tp=function(){for(const e of l(this,hi).values())e.isEmpty()&&e.remove()},de(Si,"_initialized",!1),b(Si,Js,new Map([Dy,qy,Qy,hg].map(e=>[e._editorType,e])));let ev=Si;var Fi,Yd,dn,$o,Lg,F_,wr,rv,j_,sv;const Qt=class Qt{constructor({pageIndex:e}){b(this,wr);b(this,Fi,null);b(this,Yd,0);b(this,dn,new Map);b(this,$o,new Map);this.pageIndex=e}setParent(e){if(!l(this,Fi)){m(this,Fi,e);return}if(l(this,Fi)!==e){if(l(this,dn).size>0)for(const t of l(this,dn).values())t.remove(),e.append(t);m(this,Fi,e)}}static get _svgFactory(){return xe(this,"_svgFactory",new yw)}draw(e,t=!1,i=!1){const r=on(this,Yd)._++,s=A(this,wr,rv).call(this),a=Qt._svgFactory.createElement("defs");s.append(a);const o=Qt._svgFactory.createElement("path");a.append(o);const c=`path_p${this.pageIndex}_${r}`;o.setAttribute("id",c),o.setAttribute("vector-effect","non-scaling-stroke"),t&&l(this,$o).set(r,o);const u=i?A(this,wr,j_).call(this,a,c):null,h=Qt._svgFactory.createElement("use");return s.append(h),h.setAttribute("href",`#${c}`),this.updateProperties(s,e),l(this,dn).set(r,s),{id:r,clipPathId:`url(#${u})`}}drawOutline(e,t){const i=on(this,Yd)._++,r=A(this,wr,rv).call(this),s=Qt._svgFactory.createElement("defs");r.append(s);const a=Qt._svgFactory.createElement("path");s.append(a);const o=`path_p${this.pageIndex}_${i}`;a.setAttribute("id",o),a.setAttribute("vector-effect","non-scaling-stroke");let c;if(t){const d=Qt._svgFactory.createElement("mask");s.append(d),c=`mask_p${this.pageIndex}_${i}`,d.setAttribute("id",c),d.setAttribute("maskUnits","objectBoundingBox");const f=Qt._svgFactory.createElement("rect");d.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const p=Qt._svgFactory.createElement("use");d.append(p),p.setAttribute("href",`#${o}`),p.setAttribute("stroke","none"),p.setAttribute("fill","black"),p.setAttribute("fill-rule","nonzero"),p.classList.add("mask")}const u=Qt._svgFactory.createElement("use");r.append(u),u.setAttribute("href",`#${o}`),c&&u.setAttribute("mask",`url(#${c})`);const h=u.cloneNode();return r.append(h),u.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.updateProperties(r,e),l(this,dn).set(i,r),i}finalizeDraw(e,t){l(this,$o).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var c;if(!t)return;const{root:i,bbox:r,rootClass:s,path:a}=t,o=typeof e=="number"?l(this,dn).get(e):e;if(o){if(i&&A(this,wr,sv).call(this,o,i),r&&A(c=Qt,Lg,F_).call(c,o,r),s){const{classList:u}=o;for(const[h,d]of Object.entries(s))u.toggle(h,d)}if(a){const h=o.firstChild.firstChild;A(this,wr,sv).call(this,h,a)}}}updateParent(e,t){if(t===this)return;const i=l(this,dn).get(e);i&&(l(t,Fi).append(i),l(this,dn).delete(e),l(t,dn).set(e,i))}remove(e){l(this,$o).delete(e),l(this,Fi)!==null&&(l(this,dn).get(e).remove(),l(this,dn).delete(e))}destroy(){m(this,Fi,null);for(const e of l(this,dn).values())e.remove();l(this,dn).clear(),l(this,$o).clear()}};Fi=new WeakMap,Yd=new WeakMap,dn=new WeakMap,$o=new WeakMap,Lg=new WeakSet,F_=function(e,[t,i,r,s]){const{style:a}=e;a.top=`${100*i}%`,a.left=`${100*t}%`,a.width=`${100*r}%`,a.height=`${100*s}%`},wr=new WeakSet,rv=function(){const e=Qt._svgFactory.create(1,1,!0);return l(this,Fi).append(e),e.setAttribute("aria-hidden",!0),e},j_=function(e,t){const i=Qt._svgFactory.createElement("clipPath");e.append(i);const r=`clip_${t}`;i.setAttribute("id",r),i.setAttribute("clipPathUnits","objectBoundingBox");const s=Qt._svgFactory.createElement("use");return i.append(s),s.setAttribute("href",`#${t}`),s.classList.add("clip"),r},sv=function(e,t){for(const[i,r]of Object.entries(t))r===null?e.removeAttribute(i):e.setAttribute(i,r)},b(Qt,Lg);let iv=Qt;globalThis.pdfjsTestingUtils={HighlightOutliner:Fy};ge.AbortException;ge.AnnotationEditorLayer;ge.AnnotationEditorParamsType;ge.AnnotationEditorType;ge.AnnotationEditorUIManager;ge.AnnotationLayer;ge.AnnotationMode;ge.ColorPicker;ge.DOMSVGFactory;ge.DrawLayer;ge.FeatureTest;var JN=ge.GlobalWorkerOptions;ge.ImageKind;ge.InvalidPDFException;ge.MissingPDFException;ge.OPS;ge.OutputScale;ge.PDFDataRangeTransport;ge.PDFDateString;ge.PDFWorker;ge.PasswordResponses;ge.PermissionFlag;ge.PixelsPerInch;ge.RenderingCancelledException;ge.TextLayer;ge.TouchManager;ge.UnexpectedResponseException;ge.Util;ge.VerbosityLevel;ge.XfaLayer;ge.build;ge.createValidAbsoluteUrl;ge.fetchData;var ZN=ge.getDocument;ge.getFilenameFromUrl;ge.getPdfFilenameFromUrl;ge.getXfaPageViewport;ge.isDataScheme;ge.isPdfFile;ge.noContextMenu;ge.normalizeUnicode;ge.setLayerDimensions;ge.shadow;ge.stopEvent;var eI=ge.version;JN.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${eI}/pdf.worker.min.js`;const tI=()=>{const[n,e]=H.useState([]),[t,i]=H.useState(null),[r,s]=H.useState("00:00"),[a,o]=H.useState({}),[c,u]=H.useState(""),[h,d]=H.useState(10),[f,p]=H.useState("Mixed"),[g,w]=H.useState(!1),[S,v]=H.useState(""),[y,x]=H.useState("file");H.useRef(null);const E=H.useRef(null),T=H.useRef(0),_=H.useRef(null),R=()=>{E.current&&clearInterval(E.current),T.current=0,E.current=setInterval(()=>{T.current+=1;const F=Math.floor(T.current/60),P=T.current%60;s(`${String(F).padStart(2,"0")}:${String(P).padStart(2,"0")}`)},1e3)};H.useEffect(()=>()=>{E.current&&clearInterval(E.current)},[]);const M=F=>{try{const P=JSON.parse(F);e(P.questions),i(null),o({}),R()}catch{alert("Invalid JSON format. Please check your input.")}},j=(F,P)=>{o(L=>({...L,[`question${F}`]:P}))},z=()=>{E.current&&clearInterval(E.current);let F=0;n.forEach((P,L)=>{a[`question${L}`]===n[L].correct_answer&&F++}),i(F)},V=async()=>{try{const F=await navigator.clipboard.readText();u(F)}catch{alert("Failed to read clipboard. Please paste manually.")}},ue=()=>{e([]),i(null),o({}),u(""),v(""),_.current&&(_.current.value=""),E.current&&clearInterval(E.current),s("00:00")},pe=()=>{window.open("https://aistudio.google.com/app","_blank")},oe=async F=>{v("Processing image...");const P=await JL.createWorker();try{const L=URL.createObjectURL(F);await P.loadLanguage("eng"),await P.initialize("eng");const{data:{text:D}}=await P.recognize(L);return await P.terminate(),URL.revokeObjectURL(L),D}catch(L){throw console.error("Error extracting text from image:",L),new Error("Failed to extract text from image")}},Ce=async F=>{v("Processing PDF...");try{const P=await F.arrayBuffer(),L=await ZN({data:P}).promise;let D="";for(let U=1;U<=L.numPages;U++){const he=(await(await L.getPage(U)).getTextContent()).items.map(ie=>ie.str).join(" ");D+=he+`
`}return D}catch(P){throw console.error("Error extracting text from PDF:",P),new Error("Failed to extract text from PDF")}},W=async F=>{var L;const P=(L=F.target.files)==null?void 0:L[0];if(P)try{let D="";if(P.type==="text/plain")D=await P.text();else if(P.type.startsWith("image/"))D=await oe(P);else if(P.type==="application/pdf")D=await Ce(P);else{alert("Unsupported file type. Please upload a text file, image, or PDF.");return}u(D),v("Text extracted successfully!")}catch(D){console.error("Error processing file:",D),v("Error processing file. Please try again.")}},X=async()=>{if(!c){alert("Please paste or upload content first!");return}w(!0);try{const P=new DP("AIzaSyBpUOrTjTwukjT4RKLe4yleKZixFMgQTsw").getGenerativeModel({model:"gemini-pro"}),L=`give me ${h} one world question answer from the following data in json format

difficulty level - "${f}"

don't:
- don't generate duplicate questions
- don't hallucinate 

ask different types of questions like:
- start with "what", "how", "why"
- fill in the blanks questions
- which of the statement is correct

give json format like this example:
{"questions": [{"question": "What is the process by which plants make their own food?", "answers": ["Respiration", "Photosynthesis", "Digestion", "Excretion"], "correct_answer": "Photosynthesis"}]}

Here's the content:
${c}`,O=(await(await P.generateContent(L)).response).text();M(O),v("")}catch(F){console.error("Error generating questions:",F),alert("Failed to generate questions. Please try again.")}finally{w(!1)}};return C.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-gray-800 text-gray-100 p-4 md:p-8",children:C.jsxs("div",{className:"max-w-4xl mx-auto",children:[C.jsxs("div",{className:"text-center mb-8",children:[C.jsx("div",{className:"bg-blue-500/10 rounded-full w-16 h-16 md:w-20 md:h-20 mx-auto mb-4 flex items-center justify-center",children:C.jsx(tg,{className:"h-8 w-8 md:h-12 md:w-12 text-blue-400"})}),C.jsx("h1",{className:"text-2xl md:text-4xl font-bold mb-2 bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:"PrepAI Tool"}),C.jsx("p",{className:"text-sm md:text-base text-gray-400",children:"AI That Turns Your Study Material into Practice Questions!"})]}),C.jsxs("div",{className:"space-y-6",children:[C.jsxs("div",{className:"flex flex-wrap gap-2 md:gap-3 mb-4",children:[C.jsxs("button",{onClick:ue,className:"flex items-center gap-1 md:gap-2 bg-red-500 hover:bg-red-600 text-white px-3 md:px-4 py-2 rounded-lg transition-all shadow-lg hover:shadow-red-500/20 text-sm md:text-base",children:[C.jsx(LS,{className:"h-4 w-4"}),"Reset"]}),C.jsxs("button",{onClick:pe,className:"flex items-center gap-1 md:gap-2 bg-green-500 hover:bg-green-600 text-white px-3 md:px-4 py-2 rounded-lg transition-all shadow-lg hover:shadow-green-500/20 text-sm md:text-base",children:[C.jsx(PS,{className:"h-4 w-4"}),"Open AI Studio"]})]}),C.jsx("div",{className:"bg-gray-800/50 p-4 md:p-6 rounded-lg border border-gray-700/50",children:C.jsxs("div",{className:"space-y-4",children:[C.jsxs("div",{className:"flex gap-6 mb-4",children:[C.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[C.jsx("input",{type:"radio",name:"inputMethod",checked:y==="file",onChange:()=>x("file"),className:"form-radio text-blue-500"}),C.jsxs("span",{className:"flex items-center gap-1 text-gray-300",children:[C.jsx(yb,{className:"h-4 w-4"}),"Upload File"]})]}),C.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[C.jsx("input",{type:"radio",name:"inputMethod",checked:y==="text",onChange:()=>x("text"),className:"form-radio text-blue-500"}),C.jsxs("span",{className:"flex items-center gap-1 text-gray-300",children:[C.jsx(lP,{className:"h-4 w-4"}),"Paste Text"]})]})]}),y==="file"&&C.jsx("div",{className:"flex items-center gap-4",children:C.jsxs("label",{className:"flex-1",children:[C.jsxs("div",{className:"flex items-center gap-2 bg-gray-700/50 p-3 rounded-lg cursor-pointer hover:bg-gray-700/70 transition-all",children:[C.jsx(yb,{className:"h-5 w-5 text-blue-400"}),C.jsx("span",{className:"text-sm text-gray-300",children:"Upload File (Text, Image, or PDF)"})]}),C.jsx("input",{type:"file",ref:_,onChange:W,accept:".txt,.pdf,image/*",className:"hidden"})]})}),y==="text"&&C.jsxs("div",{className:"space-y-2",children:[C.jsx("div",{className:"flex items-center gap-2",children:C.jsxs("button",{onClick:V,className:"flex items-center gap-1 bg-blue-500 hover:bg-blue-600 text-white px-3 py-2 rounded-lg transition-all text-sm",children:[C.jsx(RS,{className:"h-4 w-4"}),"Paste from Clipboard"]})}),C.jsx("textarea",{value:c,onChange:F=>u(F.target.value),placeholder:"Enter or paste your text here...",className:"w-full h-32 bg-gray-700/50 border border-gray-600 rounded-lg px-3 py-2 text-sm text-gray-300 focus:ring-blue-500 focus:border-blue-500"})]}),S&&C.jsxs("div",{className:"text-sm text-blue-400 flex items-center gap-2",children:[C.jsx(mb,{className:"h-4 w-4 animate-spin"}),S]}),C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Number of Questions"}),C.jsx("select",{value:h,onChange:F=>d(Number(F.target.value)),className:"w-full bg-gray-700/50 border border-gray-600 rounded-lg px-3 py-2 text-sm text-gray-300 focus:ring-blue-500 focus:border-blue-500",children:[5,10,20,30].map(F=>C.jsxs("option",{value:F,children:[F," Questions"]},F))})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Difficulty Level"}),C.jsx("select",{value:f,onChange:F=>p(F.target.value),className:"w-full bg-gray-700/50 border border-gray-600 rounded-lg px-3 py-2 text-sm text-gray-300 focus:ring-blue-500 focus:border-blue-500",children:["Mixed","Easy","Medium","Hard"].map(F=>C.jsx("option",{value:F,children:F},F))})]}),C.jsx("div",{className:"flex items-end",children:C.jsxs("button",{onClick:X,disabled:g||!c,className:"w-full flex items-center justify-center gap-2 bg-purple-500 hover:bg-purple-600 disabled:bg-gray-600 text-white px-4 py-2 rounded-lg transition-all",children:[g?C.jsx(mb,{className:"h-4 w-4 animate-spin"}):C.jsx(tg,{className:"h-4 w-4"}),"Generate Questions"]})})]})]})}),n.length>0&&C.jsxs("div",{className:"space-y-8",children:[C.jsx("div",{className:"space-y-6",children:n.map((F,P)=>C.jsxs("div",{className:"bg-gray-800/50 p-4 md:p-6 rounded-lg shadow-lg hover:shadow-xl transition-all border border-gray-700/50",children:[C.jsxs("p",{className:"text-base md:text-lg font-semibold mb-4 text-gray-100",children:[P+1,". ",F.question]}),C.jsx("div",{className:"space-y-2 md:space-y-3",children:F.answers.map((L,D)=>{const U=a[`question${P}`]===L,O=t!==null&&L===F.correct_answer,$=t!==null&&U&&!O;return C.jsxs("label",{className:`flex items-center space-x-3 p-2 md:p-3 rounded-lg cursor-pointer transition-all text-sm md:text-base
                              ${U?"bg-blue-500/10 border border-blue-500/50":"hover:bg-gray-700/30"}
                              ${O?"bg-green-500/10 border-green-500/50":""}
                              ${$?"bg-red-500/10 border-red-500/50":""}`,children:[C.jsx("input",{type:"radio",name:`question${P}`,value:L,checked:U,onChange:()=>j(P,L),className:"form-radio h-4 w-4 text-blue-500",disabled:t!==null}),C.jsx("span",{className:`flex-1 ${O?"text-green-400":$?"text-red-400":"text-gray-300"}`,children:L}),t!==null&&(O?C.jsx(TS,{className:"h-4 w-4 text-green-400 flex-shrink-0"}):$?C.jsx(MS,{className:"h-4 w-4 text-red-400 flex-shrink-0"}):null)]},D)})}),t!==null&&C.jsx("div",{className:"mt-3 text-sm md:text-base",children:C.jsxs("p",{className:"text-green-400",children:["Ans:- ",F.correct_answer]})})]},P))}),C.jsxs("div",{className:"flex justify-between items-center",children:[C.jsxs("button",{onClick:z,className:"flex items-center gap-1 md:gap-2 bg-green-500 hover:bg-green-600 text-white px-4 md:px-6 py-2 md:py-3 rounded-lg transition-all shadow-lg hover:shadow-green-500/20 text-sm md:text-base",disabled:t!==null,children:[C.jsx(kS,{className:"h-4 w-4 md:h-5 md:w-5"}),"Submit Answers"]}),C.jsx("div",{className:"fixed bottom-4 md:bottom-6 right-4 md:right-6 bg-gray-800/90 backdrop-blur-sm text-white px-4 md:px-6 py-2 md:py-3 rounded-lg shadow-lg border border-gray-700/50",children:C.jsx("p",{className:"text-base md:text-xl font-mono text-blue-400",children:r})})]}),t!==null&&C.jsxs("div",{className:"bg-gradient-to-r from-blue-500/10 to-purple-500/10 p-6 md:p-8 rounded-lg text-center border border-blue-500/20 shadow-lg",children:[C.jsxs("p",{className:"text-xl md:text-2xl font-semibold",children:["Your Score:"," ",C.jsx("span",{className:"text-green-400 font-bold",children:t}),C.jsx("span",{className:"text-gray-400",children:" / "}),C.jsx("span",{className:"text-blue-400 font-bold",children:n.length})]}),C.jsxs("p",{className:"text-sm md:text-base text-gray-400 mt-2",children:["Time taken: ",r]})]})]})]})]})})},nI=$R([{path:"/",element:C.jsx(fP,{})},{path:"/tools",element:C.jsx(pP,{})},{path:"/ai-tool",element:C.jsx(tI,{})}]);fS(document.getElementById("root")).render(C.jsx(H.StrictMode,{children:C.jsx(QR,{router:nI})}));
